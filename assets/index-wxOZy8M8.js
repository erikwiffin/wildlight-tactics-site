(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))o(u);new MutationObserver(u=>{for(const d of u)if(d.type==="childList")for(const p of d.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&o(p)}).observe(document,{childList:!0,subtree:!0});function i(u){const d={};return u.integrity&&(d.integrity=u.integrity),u.referrerPolicy&&(d.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?d.credentials="include":u.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function o(u){if(u.ep)return;u.ep=!0;const d=i(u);fetch(u.href,d)}})();function Pf(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var ll={exports:{}},ws={},cl={exports:{}},ue={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wd;function cb(){if(Wd)return ue;Wd=1;var n=Symbol.for("react.element"),s=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),u=Symbol.for("react.profiler"),d=Symbol.for("react.provider"),p=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),_=Symbol.iterator;function $(b){return b===null||typeof b!="object"?null:(b=_&&b[_]||b["@@iterator"],typeof b=="function"?b:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},M=Object.assign,L={};function U(b,O,ie){this.props=b,this.context=O,this.refs=L,this.updater=ie||S}U.prototype.isReactComponent={},U.prototype.setState=function(b,O){if(typeof b!="object"&&typeof b!="function"&&b!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,b,O,"setState")},U.prototype.forceUpdate=function(b){this.updater.enqueueForceUpdate(this,b,"forceUpdate")};function E(){}E.prototype=U.prototype;function R(b,O,ie){this.props=b,this.context=O,this.refs=L,this.updater=ie||S}var w=R.prototype=new E;w.constructor=R,M(w,U.prototype),w.isPureReactComponent=!0;var T=Array.isArray,I=Object.prototype.hasOwnProperty,z={current:null},Q={key:!0,ref:!0,__self:!0,__source:!0};function K(b,O,ie){var oe,ce={},ae=null,pe=null;if(O!=null)for(oe in O.ref!==void 0&&(pe=O.ref),O.key!==void 0&&(ae=""+O.key),O)I.call(O,oe)&&!Q.hasOwnProperty(oe)&&(ce[oe]=O[oe]);var fe=arguments.length-2;if(fe===1)ce.children=ie;else if(1<fe){for(var ye=Array(fe),Oe=0;Oe<fe;Oe++)ye[Oe]=arguments[Oe+2];ce.children=ye}if(b&&b.defaultProps)for(oe in fe=b.defaultProps,fe)ce[oe]===void 0&&(ce[oe]=fe[oe]);return{$$typeof:n,type:b,key:ae,ref:pe,props:ce,_owner:z.current}}function ee(b,O){return{$$typeof:n,type:b.type,key:O,ref:b.ref,props:b.props,_owner:b._owner}}function je(b){return typeof b=="object"&&b!==null&&b.$$typeof===n}function ve(b){var O={"=":"=0",":":"=2"};return"$"+b.replace(/[=:]/g,function(ie){return O[ie]})}var we=/\/+/g;function he(b,O){return typeof b=="object"&&b!==null&&b.key!=null?ve(""+b.key):O.toString(36)}function Te(b,O,ie,oe,ce){var ae=typeof b;(ae==="undefined"||ae==="boolean")&&(b=null);var pe=!1;if(b===null)pe=!0;else switch(ae){case"string":case"number":pe=!0;break;case"object":switch(b.$$typeof){case n:case s:pe=!0}}if(pe)return pe=b,ce=ce(pe),b=oe===""?"."+he(pe,0):oe,T(ce)?(ie="",b!=null&&(ie=b.replace(we,"$&/")+"/"),Te(ce,O,ie,"",function(Oe){return Oe})):ce!=null&&(je(ce)&&(ce=ee(ce,ie+(!ce.key||pe&&pe.key===ce.key?"":(""+ce.key).replace(we,"$&/")+"/")+b)),O.push(ce)),1;if(pe=0,oe=oe===""?".":oe+":",T(b))for(var fe=0;fe<b.length;fe++){ae=b[fe];var ye=oe+he(ae,fe);pe+=Te(ae,O,ie,ye,ce)}else if(ye=$(b),typeof ye=="function")for(b=ye.call(b),fe=0;!(ae=b.next()).done;)ae=ae.value,ye=oe+he(ae,fe++),pe+=Te(ae,O,ie,ye,ce);else if(ae==="object")throw O=String(b),Error("Objects are not valid as a React child (found: "+(O==="[object Object]"?"object with keys {"+Object.keys(b).join(", ")+"}":O)+"). If you meant to render a collection of children, use an array instead.");return pe}function ze(b,O,ie){if(b==null)return b;var oe=[],ce=0;return Te(b,oe,"","",function(ae){return O.call(ie,ae,ce++)}),oe}function Ie(b){if(b._status===-1){var O=b._result;O=O(),O.then(function(ie){(b._status===0||b._status===-1)&&(b._status=1,b._result=ie)},function(ie){(b._status===0||b._status===-1)&&(b._status=2,b._result=ie)}),b._status===-1&&(b._status=0,b._result=O)}if(b._status===1)return b._result.default;throw b._result}var ke={current:null},H={transition:null},te={ReactCurrentDispatcher:ke,ReactCurrentBatchConfig:H,ReactCurrentOwner:z};function G(){throw Error("act(...) is not supported in production builds of React.")}return ue.Children={map:ze,forEach:function(b,O,ie){ze(b,function(){O.apply(this,arguments)},ie)},count:function(b){var O=0;return ze(b,function(){O++}),O},toArray:function(b){return ze(b,function(O){return O})||[]},only:function(b){if(!je(b))throw Error("React.Children.only expected to receive a single React element child.");return b}},ue.Component=U,ue.Fragment=i,ue.Profiler=u,ue.PureComponent=R,ue.StrictMode=o,ue.Suspense=h,ue.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=te,ue.act=G,ue.cloneElement=function(b,O,ie){if(b==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+b+".");var oe=M({},b.props),ce=b.key,ae=b.ref,pe=b._owner;if(O!=null){if(O.ref!==void 0&&(ae=O.ref,pe=z.current),O.key!==void 0&&(ce=""+O.key),b.type&&b.type.defaultProps)var fe=b.type.defaultProps;for(ye in O)I.call(O,ye)&&!Q.hasOwnProperty(ye)&&(oe[ye]=O[ye]===void 0&&fe!==void 0?fe[ye]:O[ye])}var ye=arguments.length-2;if(ye===1)oe.children=ie;else if(1<ye){fe=Array(ye);for(var Oe=0;Oe<ye;Oe++)fe[Oe]=arguments[Oe+2];oe.children=fe}return{$$typeof:n,type:b.type,key:ce,ref:ae,props:oe,_owner:pe}},ue.createContext=function(b){return b={$$typeof:p,_currentValue:b,_currentValue2:b,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},b.Provider={$$typeof:d,_context:b},b.Consumer=b},ue.createElement=K,ue.createFactory=function(b){var O=K.bind(null,b);return O.type=b,O},ue.createRef=function(){return{current:null}},ue.forwardRef=function(b){return{$$typeof:m,render:b}},ue.isValidElement=je,ue.lazy=function(b){return{$$typeof:v,_payload:{_status:-1,_result:b},_init:Ie}},ue.memo=function(b,O){return{$$typeof:y,type:b,compare:O===void 0?null:O}},ue.startTransition=function(b){var O=H.transition;H.transition={};try{b()}finally{H.transition=O}},ue.unstable_act=G,ue.useCallback=function(b,O){return ke.current.useCallback(b,O)},ue.useContext=function(b){return ke.current.useContext(b)},ue.useDebugValue=function(){},ue.useDeferredValue=function(b){return ke.current.useDeferredValue(b)},ue.useEffect=function(b,O){return ke.current.useEffect(b,O)},ue.useId=function(){return ke.current.useId()},ue.useImperativeHandle=function(b,O,ie){return ke.current.useImperativeHandle(b,O,ie)},ue.useInsertionEffect=function(b,O){return ke.current.useInsertionEffect(b,O)},ue.useLayoutEffect=function(b,O){return ke.current.useLayoutEffect(b,O)},ue.useMemo=function(b,O){return ke.current.useMemo(b,O)},ue.useReducer=function(b,O,ie){return ke.current.useReducer(b,O,ie)},ue.useRef=function(b){return ke.current.useRef(b)},ue.useState=function(b){return ke.current.useState(b)},ue.useSyncExternalStore=function(b,O,ie){return ke.current.useSyncExternalStore(b,O,ie)},ue.useTransition=function(){return ke.current.useTransition()},ue.version="18.3.1",ue}var Hd;function sa(){return Hd||(Hd=1,cl.exports=cb()),cl.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gd;function ub(){if(Gd)return ws;Gd=1;var n=sa(),s=Symbol.for("react.element"),i=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,u=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,d={key:!0,ref:!0,__self:!0,__source:!0};function p(m,h,y){var v,_={},$=null,S=null;y!==void 0&&($=""+y),h.key!==void 0&&($=""+h.key),h.ref!==void 0&&(S=h.ref);for(v in h)o.call(h,v)&&!d.hasOwnProperty(v)&&(_[v]=h[v]);if(m&&m.defaultProps)for(v in h=m.defaultProps,h)_[v]===void 0&&(_[v]=h[v]);return{$$typeof:s,type:m,key:$,ref:S,props:_,_owner:u.current}}return ws.Fragment=i,ws.jsx=p,ws.jsxs=p,ws}var Vd;function db(){return Vd||(Vd=1,ll.exports=ub()),ll.exports}var l=db(),A=sa();const fb=Pf(A);var Di={},ul={exports:{}},ft={},dl={exports:{}},fl={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kd;function pb(){return Kd||(Kd=1,(function(n){function s(H,te){var G=H.length;H.push(te);e:for(;0<G;){var b=G-1>>>1,O=H[b];if(0<u(O,te))H[b]=te,H[G]=O,G=b;else break e}}function i(H){return H.length===0?null:H[0]}function o(H){if(H.length===0)return null;var te=H[0],G=H.pop();if(G!==te){H[0]=G;e:for(var b=0,O=H.length,ie=O>>>1;b<ie;){var oe=2*(b+1)-1,ce=H[oe],ae=oe+1,pe=H[ae];if(0>u(ce,G))ae<O&&0>u(pe,ce)?(H[b]=pe,H[ae]=G,b=ae):(H[b]=ce,H[oe]=G,b=oe);else if(ae<O&&0>u(pe,G))H[b]=pe,H[ae]=G,b=ae;else break e}}return te}function u(H,te){var G=H.sortIndex-te.sortIndex;return G!==0?G:H.id-te.id}if(typeof performance=="object"&&typeof performance.now=="function"){var d=performance;n.unstable_now=function(){return d.now()}}else{var p=Date,m=p.now();n.unstable_now=function(){return p.now()-m}}var h=[],y=[],v=1,_=null,$=3,S=!1,M=!1,L=!1,U=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(H){for(var te=i(y);te!==null;){if(te.callback===null)o(y);else if(te.startTime<=H)o(y),te.sortIndex=te.expirationTime,s(h,te);else break;te=i(y)}}function T(H){if(L=!1,w(H),!M)if(i(h)!==null)M=!0,Ie(I);else{var te=i(y);te!==null&&ke(T,te.startTime-H)}}function I(H,te){M=!1,L&&(L=!1,E(K),K=-1),S=!0;var G=$;try{for(w(te),_=i(h);_!==null&&(!(_.expirationTime>te)||H&&!ve());){var b=_.callback;if(typeof b=="function"){_.callback=null,$=_.priorityLevel;var O=b(_.expirationTime<=te);te=n.unstable_now(),typeof O=="function"?_.callback=O:_===i(h)&&o(h),w(te)}else o(h);_=i(h)}if(_!==null)var ie=!0;else{var oe=i(y);oe!==null&&ke(T,oe.startTime-te),ie=!1}return ie}finally{_=null,$=G,S=!1}}var z=!1,Q=null,K=-1,ee=5,je=-1;function ve(){return!(n.unstable_now()-je<ee)}function we(){if(Q!==null){var H=n.unstable_now();je=H;var te=!0;try{te=Q(!0,H)}finally{te?he():(z=!1,Q=null)}}else z=!1}var he;if(typeof R=="function")he=function(){R(we)};else if(typeof MessageChannel<"u"){var Te=new MessageChannel,ze=Te.port2;Te.port1.onmessage=we,he=function(){ze.postMessage(null)}}else he=function(){U(we,0)};function Ie(H){Q=H,z||(z=!0,he())}function ke(H,te){K=U(function(){H(n.unstable_now())},te)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(H){H.callback=null},n.unstable_continueExecution=function(){M||S||(M=!0,Ie(I))},n.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ee=0<H?Math.floor(1e3/H):5},n.unstable_getCurrentPriorityLevel=function(){return $},n.unstable_getFirstCallbackNode=function(){return i(h)},n.unstable_next=function(H){switch($){case 1:case 2:case 3:var te=3;break;default:te=$}var G=$;$=te;try{return H()}finally{$=G}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(H,te){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var G=$;$=H;try{return te()}finally{$=G}},n.unstable_scheduleCallback=function(H,te,G){var b=n.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?b+G:b):G=b,H){case 1:var O=-1;break;case 2:O=250;break;case 5:O=1073741823;break;case 4:O=1e4;break;default:O=5e3}return O=G+O,H={id:v++,callback:te,priorityLevel:H,startTime:G,expirationTime:O,sortIndex:-1},G>b?(H.sortIndex=G,s(y,H),i(h)===null&&H===i(y)&&(L?(E(K),K=-1):L=!0,ke(T,G-b))):(H.sortIndex=O,s(h,H),M||S||(M=!0,Ie(I))),H},n.unstable_shouldYield=ve,n.unstable_wrapCallback=function(H){var te=$;return function(){var G=$;$=te;try{return H.apply(this,arguments)}finally{$=G}}}})(fl)),fl}var Qd;function mb(){return Qd||(Qd=1,dl.exports=pb()),dl.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yd;function hb(){if(Yd)return ft;Yd=1;var n=sa(),s=mb();function i(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,u={};function d(e,t){p(e,t),p(e+"Capture",t)}function p(e,t){for(u[e]=t,e=0;e<t.length;e++)o.add(t[e])}var m=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),h=Object.prototype.hasOwnProperty,y=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,v={},_={};function $(e){return h.call(_,e)?!0:h.call(v,e)?!1:y.test(e)?_[e]=!0:(v[e]=!0,!1)}function S(e,t,r,a){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return a?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function M(e,t,r,a){if(t===null||typeof t>"u"||S(e,t,r,a))return!0;if(a)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function L(e,t,r,a,c,f,g){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=a,this.attributeNamespace=c,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=f,this.removeEmptyString=g}var U={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){U[e]=new L(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];U[t]=new L(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){U[e]=new L(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){U[e]=new L(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){U[e]=new L(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){U[e]=new L(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){U[e]=new L(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){U[e]=new L(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){U[e]=new L(e,5,!1,e.toLowerCase(),null,!1,!1)});var E=/[\-:]([a-z])/g;function R(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(E,R);U[t]=new L(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(E,R);U[t]=new L(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(E,R);U[t]=new L(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){U[e]=new L(e,1,!1,e.toLowerCase(),null,!1,!1)}),U.xlinkHref=new L("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){U[e]=new L(e,1,!1,e.toLowerCase(),null,!0,!0)});function w(e,t,r,a){var c=U.hasOwnProperty(t)?U[t]:null;(c!==null?c.type!==0:a||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(M(t,r,c,a)&&(r=null),a||c===null?$(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):c.mustUseProperty?e[c.propertyName]=r===null?c.type===3?!1:"":r:(t=c.attributeName,a=c.attributeNamespace,r===null?e.removeAttribute(t):(c=c.type,r=c===3||c===4&&r===!0?"":""+r,a?e.setAttributeNS(a,t,r):e.setAttribute(t,r))))}var T=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,I=Symbol.for("react.element"),z=Symbol.for("react.portal"),Q=Symbol.for("react.fragment"),K=Symbol.for("react.strict_mode"),ee=Symbol.for("react.profiler"),je=Symbol.for("react.provider"),ve=Symbol.for("react.context"),we=Symbol.for("react.forward_ref"),he=Symbol.for("react.suspense"),Te=Symbol.for("react.suspense_list"),ze=Symbol.for("react.memo"),Ie=Symbol.for("react.lazy"),ke=Symbol.for("react.offscreen"),H=Symbol.iterator;function te(e){return e===null||typeof e!="object"?null:(e=H&&e[H]||e["@@iterator"],typeof e=="function"?e:null)}var G=Object.assign,b;function O(e){if(b===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);b=t&&t[1]||""}return`
`+b+e}var ie=!1;function oe(e,t){if(!e||ie)return"";ie=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(P){var a=P}Reflect.construct(e,[],t)}else{try{t.call()}catch(P){a=P}e.call(t.prototype)}else{try{throw Error()}catch(P){a=P}e()}}catch(P){if(P&&a&&typeof P.stack=="string"){for(var c=P.stack.split(`
`),f=a.stack.split(`
`),g=c.length-1,x=f.length-1;1<=g&&0<=x&&c[g]!==f[x];)x--;for(;1<=g&&0<=x;g--,x--)if(c[g]!==f[x]){if(g!==1||x!==1)do if(g--,x--,0>x||c[g]!==f[x]){var k=`
`+c[g].replace(" at new "," at ");return e.displayName&&k.includes("<anonymous>")&&(k=k.replace("<anonymous>",e.displayName)),k}while(1<=g&&0<=x);break}}}finally{ie=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?O(e):""}function ce(e){switch(e.tag){case 5:return O(e.type);case 16:return O("Lazy");case 13:return O("Suspense");case 19:return O("SuspenseList");case 0:case 2:case 15:return e=oe(e.type,!1),e;case 11:return e=oe(e.type.render,!1),e;case 1:return e=oe(e.type,!0),e;default:return""}}function ae(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Q:return"Fragment";case z:return"Portal";case ee:return"Profiler";case K:return"StrictMode";case he:return"Suspense";case Te:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case ve:return(e.displayName||"Context")+".Consumer";case je:return(e._context.displayName||"Context")+".Provider";case we:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case ze:return t=e.displayName||null,t!==null?t:ae(e.type)||"Memo";case Ie:t=e._payload,e=e._init;try{return ae(e(t))}catch{}}return null}function pe(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ae(t);case 8:return t===K?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function fe(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function ye(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Oe(e){var t=ye(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),a=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var c=r.get,f=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return c.call(this)},set:function(g){a=""+g,f.call(this,g)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return a},setValue:function(g){a=""+g},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Ht(e){e._valueTracker||(e._valueTracker=Oe(e))}function Qn(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),a="";return e&&(a=ye(e)?e.checked?"true":"false":e.value),e=a,e!==r?(t.setValue(e),!0):!1}function Cn(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Yn(e,t){var r=t.checked;return G({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function Ts(e,t){var r=t.defaultValue==null?"":t.defaultValue,a=t.checked!=null?t.checked:t.defaultChecked;r=fe(t.value!=null?t.value:r),e._wrapperState={initialChecked:a,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function $s(e,t){t=t.checked,t!=null&&w(e,"checked",t,!1)}function ha(e,t){$s(e,t);var r=fe(t.value),a=t.type;if(r!=null)a==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(a==="submit"||a==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?ga(e,t.type,r):t.hasOwnProperty("defaultValue")&&ga(e,t.type,fe(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Jl(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var a=t.type;if(!(a!=="submit"&&a!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function ga(e,t,r){(t!=="number"||Cn(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Lr=Array.isArray;function Xn(e,t,r,a){if(e=e.options,t){t={};for(var c=0;c<r.length;c++)t["$"+r[c]]=!0;for(r=0;r<e.length;r++)c=t.hasOwnProperty("$"+e[r].value),e[r].selected!==c&&(e[r].selected=c),c&&a&&(e[r].defaultSelected=!0)}else{for(r=""+fe(r),t=null,c=0;c<e.length;c++){if(e[c].value===r){e[c].selected=!0,a&&(e[c].defaultSelected=!0);return}t!==null||e[c].disabled||(t=e[c])}t!==null&&(t.selected=!0)}}function va(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(i(91));return G({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ec(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(i(92));if(Lr(r)){if(1<r.length)throw Error(i(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:fe(r)}}function tc(e,t){var r=fe(t.value),a=fe(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),a!=null&&(e.defaultValue=""+a)}function nc(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function rc(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ya(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?rc(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Ps,sc=(function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,a,c){MSApp.execUnsafeLocalFunction(function(){return e(t,r,a,c)})}:e})(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Ps=Ps||document.createElement("div"),Ps.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Ps.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Rr(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Or={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pw=["Webkit","ms","Moz","O"];Object.keys(Or).forEach(function(e){pw.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Or[t]=Or[e]})});function ic(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Or.hasOwnProperty(e)&&Or[e]?(""+t).trim():t+"px"}function ac(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var a=r.indexOf("--")===0,c=ic(r,t[r],a);r==="float"&&(r="cssFloat"),a?e.setProperty(r,c):e[r]=c}}var mw=G({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function xa(e,t){if(t){if(mw[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(i(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(i(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(i(61))}if(t.style!=null&&typeof t.style!="object")throw Error(i(62))}}function wa(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ba=null;function ka(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var _a=null,Zn=null,Jn=null;function oc(e){if(e=is(e)){if(typeof _a!="function")throw Error(i(280));var t=e.stateNode;t&&(t=ei(t),_a(e.stateNode,e.type,t))}}function lc(e){Zn?Jn?Jn.push(e):Jn=[e]:Zn=e}function cc(){if(Zn){var e=Zn,t=Jn;if(Jn=Zn=null,oc(e),t)for(e=0;e<t.length;e++)oc(t[e])}}function uc(e,t){return e(t)}function dc(){}var ja=!1;function fc(e,t,r){if(ja)return e(t,r);ja=!0;try{return uc(e,t,r)}finally{ja=!1,(Zn!==null||Jn!==null)&&(dc(),cc())}}function Ur(e,t){var r=e.stateNode;if(r===null)return null;var a=ei(r);if(a===null)return null;r=a[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(e=e.type,a=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!a;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(i(231,t,typeof r));return r}var Na=!1;if(m)try{var Dr={};Object.defineProperty(Dr,"passive",{get:function(){Na=!0}}),window.addEventListener("test",Dr,Dr),window.removeEventListener("test",Dr,Dr)}catch{Na=!1}function hw(e,t,r,a,c,f,g,x,k){var P=Array.prototype.slice.call(arguments,3);try{t.apply(r,P)}catch(q){this.onError(q)}}var Fr=!1,Is=null,As=!1,Sa=null,gw={onError:function(e){Fr=!0,Is=e}};function vw(e,t,r,a,c,f,g,x,k){Fr=!1,Is=null,hw.apply(gw,arguments)}function yw(e,t,r,a,c,f,g,x,k){if(vw.apply(this,arguments),Fr){if(Fr){var P=Is;Fr=!1,Is=null}else throw Error(i(198));As||(As=!0,Sa=P)}}function Tn(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function pc(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function mc(e){if(Tn(e)!==e)throw Error(i(188))}function xw(e){var t=e.alternate;if(!t){if(t=Tn(e),t===null)throw Error(i(188));return t!==e?null:e}for(var r=e,a=t;;){var c=r.return;if(c===null)break;var f=c.alternate;if(f===null){if(a=c.return,a!==null){r=a;continue}break}if(c.child===f.child){for(f=c.child;f;){if(f===r)return mc(c),e;if(f===a)return mc(c),t;f=f.sibling}throw Error(i(188))}if(r.return!==a.return)r=c,a=f;else{for(var g=!1,x=c.child;x;){if(x===r){g=!0,r=c,a=f;break}if(x===a){g=!0,a=c,r=f;break}x=x.sibling}if(!g){for(x=f.child;x;){if(x===r){g=!0,r=f,a=c;break}if(x===a){g=!0,a=f,r=c;break}x=x.sibling}if(!g)throw Error(i(189))}}if(r.alternate!==a)throw Error(i(190))}if(r.tag!==3)throw Error(i(188));return r.stateNode.current===r?e:t}function hc(e){return e=xw(e),e!==null?gc(e):null}function gc(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=gc(e);if(t!==null)return t;e=e.sibling}return null}var vc=s.unstable_scheduleCallback,yc=s.unstable_cancelCallback,ww=s.unstable_shouldYield,bw=s.unstable_requestPaint,Le=s.unstable_now,kw=s.unstable_getCurrentPriorityLevel,Ea=s.unstable_ImmediatePriority,xc=s.unstable_UserBlockingPriority,Ms=s.unstable_NormalPriority,_w=s.unstable_LowPriority,wc=s.unstable_IdlePriority,Ls=null,Dt=null;function jw(e){if(Dt&&typeof Dt.onCommitFiberRoot=="function")try{Dt.onCommitFiberRoot(Ls,e,void 0,(e.current.flags&128)===128)}catch{}}var Pt=Math.clz32?Math.clz32:Ew,Nw=Math.log,Sw=Math.LN2;function Ew(e){return e>>>=0,e===0?32:31-(Nw(e)/Sw|0)|0}var Rs=64,Os=4194304;function zr(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Us(e,t){var r=e.pendingLanes;if(r===0)return 0;var a=0,c=e.suspendedLanes,f=e.pingedLanes,g=r&268435455;if(g!==0){var x=g&~c;x!==0?a=zr(x):(f&=g,f!==0&&(a=zr(f)))}else g=r&~c,g!==0?a=zr(g):f!==0&&(a=zr(f));if(a===0)return 0;if(t!==0&&t!==a&&(t&c)===0&&(c=a&-a,f=t&-t,c>=f||c===16&&(f&4194240)!==0))return t;if((a&4)!==0&&(a|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=a;0<t;)r=31-Pt(t),c=1<<r,a|=e[r],t&=~c;return a}function Cw(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Tw(e,t){for(var r=e.suspendedLanes,a=e.pingedLanes,c=e.expirationTimes,f=e.pendingLanes;0<f;){var g=31-Pt(f),x=1<<g,k=c[g];k===-1?((x&r)===0||(x&a)!==0)&&(c[g]=Cw(x,t)):k<=t&&(e.expiredLanes|=x),f&=~x}}function Ca(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function bc(){var e=Rs;return Rs<<=1,(Rs&4194240)===0&&(Rs=64),e}function Ta(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function qr(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Pt(t),e[t]=r}function $w(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var a=e.eventTimes;for(e=e.expirationTimes;0<r;){var c=31-Pt(r),f=1<<c;t[c]=0,a[c]=-1,e[c]=-1,r&=~f}}function $a(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var a=31-Pt(r),c=1<<a;c&t|e[a]&t&&(e[a]|=t),r&=~c}}var xe=0;function kc(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var _c,Pa,jc,Nc,Sc,Ia=!1,Ds=[],an=null,on=null,ln=null,Br=new Map,Wr=new Map,cn=[],Pw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ec(e,t){switch(e){case"focusin":case"focusout":an=null;break;case"dragenter":case"dragleave":on=null;break;case"mouseover":case"mouseout":ln=null;break;case"pointerover":case"pointerout":Br.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Wr.delete(t.pointerId)}}function Hr(e,t,r,a,c,f){return e===null||e.nativeEvent!==f?(e={blockedOn:t,domEventName:r,eventSystemFlags:a,nativeEvent:f,targetContainers:[c]},t!==null&&(t=is(t),t!==null&&Pa(t)),e):(e.eventSystemFlags|=a,t=e.targetContainers,c!==null&&t.indexOf(c)===-1&&t.push(c),e)}function Iw(e,t,r,a,c){switch(t){case"focusin":return an=Hr(an,e,t,r,a,c),!0;case"dragenter":return on=Hr(on,e,t,r,a,c),!0;case"mouseover":return ln=Hr(ln,e,t,r,a,c),!0;case"pointerover":var f=c.pointerId;return Br.set(f,Hr(Br.get(f)||null,e,t,r,a,c)),!0;case"gotpointercapture":return f=c.pointerId,Wr.set(f,Hr(Wr.get(f)||null,e,t,r,a,c)),!0}return!1}function Cc(e){var t=$n(e.target);if(t!==null){var r=Tn(t);if(r!==null){if(t=r.tag,t===13){if(t=pc(r),t!==null){e.blockedOn=t,Sc(e.priority,function(){jc(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Fs(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=Ma(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var a=new r.constructor(r.type,r);ba=a,r.target.dispatchEvent(a),ba=null}else return t=is(r),t!==null&&Pa(t),e.blockedOn=r,!1;t.shift()}return!0}function Tc(e,t,r){Fs(e)&&r.delete(t)}function Aw(){Ia=!1,an!==null&&Fs(an)&&(an=null),on!==null&&Fs(on)&&(on=null),ln!==null&&Fs(ln)&&(ln=null),Br.forEach(Tc),Wr.forEach(Tc)}function Gr(e,t){e.blockedOn===t&&(e.blockedOn=null,Ia||(Ia=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,Aw)))}function Vr(e){function t(c){return Gr(c,e)}if(0<Ds.length){Gr(Ds[0],e);for(var r=1;r<Ds.length;r++){var a=Ds[r];a.blockedOn===e&&(a.blockedOn=null)}}for(an!==null&&Gr(an,e),on!==null&&Gr(on,e),ln!==null&&Gr(ln,e),Br.forEach(t),Wr.forEach(t),r=0;r<cn.length;r++)a=cn[r],a.blockedOn===e&&(a.blockedOn=null);for(;0<cn.length&&(r=cn[0],r.blockedOn===null);)Cc(r),r.blockedOn===null&&cn.shift()}var er=T.ReactCurrentBatchConfig,zs=!0;function Mw(e,t,r,a){var c=xe,f=er.transition;er.transition=null;try{xe=1,Aa(e,t,r,a)}finally{xe=c,er.transition=f}}function Lw(e,t,r,a){var c=xe,f=er.transition;er.transition=null;try{xe=4,Aa(e,t,r,a)}finally{xe=c,er.transition=f}}function Aa(e,t,r,a){if(zs){var c=Ma(e,t,r,a);if(c===null)Xa(e,t,a,qs,r),Ec(e,a);else if(Iw(c,e,t,r,a))a.stopPropagation();else if(Ec(e,a),t&4&&-1<Pw.indexOf(e)){for(;c!==null;){var f=is(c);if(f!==null&&_c(f),f=Ma(e,t,r,a),f===null&&Xa(e,t,a,qs,r),f===c)break;c=f}c!==null&&a.stopPropagation()}else Xa(e,t,a,null,r)}}var qs=null;function Ma(e,t,r,a){if(qs=null,e=ka(a),e=$n(e),e!==null)if(t=Tn(e),t===null)e=null;else if(r=t.tag,r===13){if(e=pc(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return qs=e,null}function $c(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(kw()){case Ea:return 1;case xc:return 4;case Ms:case _w:return 16;case wc:return 536870912;default:return 16}default:return 16}}var un=null,La=null,Bs=null;function Pc(){if(Bs)return Bs;var e,t=La,r=t.length,a,c="value"in un?un.value:un.textContent,f=c.length;for(e=0;e<r&&t[e]===c[e];e++);var g=r-e;for(a=1;a<=g&&t[r-a]===c[f-a];a++);return Bs=c.slice(e,1<a?1-a:void 0)}function Ws(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Hs(){return!0}function Ic(){return!1}function mt(e){function t(r,a,c,f,g){this._reactName=r,this._targetInst=c,this.type=a,this.nativeEvent=f,this.target=g,this.currentTarget=null;for(var x in e)e.hasOwnProperty(x)&&(r=e[x],this[x]=r?r(f):f[x]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?Hs:Ic,this.isPropagationStopped=Ic,this}return G(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Hs)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Hs)},persist:function(){},isPersistent:Hs}),t}var tr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ra=mt(tr),Kr=G({},tr,{view:0,detail:0}),Rw=mt(Kr),Oa,Ua,Qr,Gs=G({},Kr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Fa,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Qr&&(Qr&&e.type==="mousemove"?(Oa=e.screenX-Qr.screenX,Ua=e.screenY-Qr.screenY):Ua=Oa=0,Qr=e),Oa)},movementY:function(e){return"movementY"in e?e.movementY:Ua}}),Ac=mt(Gs),Ow=G({},Gs,{dataTransfer:0}),Uw=mt(Ow),Dw=G({},Kr,{relatedTarget:0}),Da=mt(Dw),Fw=G({},tr,{animationName:0,elapsedTime:0,pseudoElement:0}),zw=mt(Fw),qw=G({},tr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Bw=mt(qw),Ww=G({},tr,{data:0}),Mc=mt(Ww),Hw={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Gw={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Vw={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Kw(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Vw[e])?!!t[e]:!1}function Fa(){return Kw}var Qw=G({},Kr,{key:function(e){if(e.key){var t=Hw[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Ws(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Gw[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Fa,charCode:function(e){return e.type==="keypress"?Ws(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ws(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Yw=mt(Qw),Xw=G({},Gs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Lc=mt(Xw),Zw=G({},Kr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Fa}),Jw=mt(Zw),e0=G({},tr,{propertyName:0,elapsedTime:0,pseudoElement:0}),t0=mt(e0),n0=G({},Gs,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),r0=mt(n0),s0=[9,13,27,32],za=m&&"CompositionEvent"in window,Yr=null;m&&"documentMode"in document&&(Yr=document.documentMode);var i0=m&&"TextEvent"in window&&!Yr,Rc=m&&(!za||Yr&&8<Yr&&11>=Yr),Oc=" ",Uc=!1;function Dc(e,t){switch(e){case"keyup":return s0.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Fc(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var nr=!1;function a0(e,t){switch(e){case"compositionend":return Fc(t);case"keypress":return t.which!==32?null:(Uc=!0,Oc);case"textInput":return e=t.data,e===Oc&&Uc?null:e;default:return null}}function o0(e,t){if(nr)return e==="compositionend"||!za&&Dc(e,t)?(e=Pc(),Bs=La=un=null,nr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Rc&&t.locale!=="ko"?null:t.data;default:return null}}var l0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function zc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!l0[e.type]:t==="textarea"}function qc(e,t,r,a){lc(a),t=Xs(t,"onChange"),0<t.length&&(r=new Ra("onChange","change",null,r,a),e.push({event:r,listeners:t}))}var Xr=null,Zr=null;function c0(e){au(e,0)}function Vs(e){var t=or(e);if(Qn(t))return e}function u0(e,t){if(e==="change")return t}var Bc=!1;if(m){var qa;if(m){var Ba="oninput"in document;if(!Ba){var Wc=document.createElement("div");Wc.setAttribute("oninput","return;"),Ba=typeof Wc.oninput=="function"}qa=Ba}else qa=!1;Bc=qa&&(!document.documentMode||9<document.documentMode)}function Hc(){Xr&&(Xr.detachEvent("onpropertychange",Gc),Zr=Xr=null)}function Gc(e){if(e.propertyName==="value"&&Vs(Zr)){var t=[];qc(t,Zr,e,ka(e)),fc(c0,t)}}function d0(e,t,r){e==="focusin"?(Hc(),Xr=t,Zr=r,Xr.attachEvent("onpropertychange",Gc)):e==="focusout"&&Hc()}function f0(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Vs(Zr)}function p0(e,t){if(e==="click")return Vs(t)}function m0(e,t){if(e==="input"||e==="change")return Vs(t)}function h0(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var It=typeof Object.is=="function"?Object.is:h0;function Jr(e,t){if(It(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),a=Object.keys(t);if(r.length!==a.length)return!1;for(a=0;a<r.length;a++){var c=r[a];if(!h.call(t,c)||!It(e[c],t[c]))return!1}return!0}function Vc(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Kc(e,t){var r=Vc(e);e=0;for(var a;r;){if(r.nodeType===3){if(a=e+r.textContent.length,e<=t&&a>=t)return{node:r,offset:t-e};e=a}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Vc(r)}}function Qc(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Qc(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Yc(){for(var e=window,t=Cn();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=Cn(e.document)}return t}function Wa(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function g0(e){var t=Yc(),r=e.focusedElem,a=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&Qc(r.ownerDocument.documentElement,r)){if(a!==null&&Wa(r)){if(t=a.start,e=a.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var c=r.textContent.length,f=Math.min(a.start,c);a=a.end===void 0?f:Math.min(a.end,c),!e.extend&&f>a&&(c=a,a=f,f=c),c=Kc(r,f);var g=Kc(r,a);c&&g&&(e.rangeCount!==1||e.anchorNode!==c.node||e.anchorOffset!==c.offset||e.focusNode!==g.node||e.focusOffset!==g.offset)&&(t=t.createRange(),t.setStart(c.node,c.offset),e.removeAllRanges(),f>a?(e.addRange(t),e.extend(g.node,g.offset)):(t.setEnd(g.node,g.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var v0=m&&"documentMode"in document&&11>=document.documentMode,rr=null,Ha=null,es=null,Ga=!1;function Xc(e,t,r){var a=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Ga||rr==null||rr!==Cn(a)||(a=rr,"selectionStart"in a&&Wa(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),es&&Jr(es,a)||(es=a,a=Xs(Ha,"onSelect"),0<a.length&&(t=new Ra("onSelect","select",null,t,r),e.push({event:t,listeners:a}),t.target=rr)))}function Ks(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var sr={animationend:Ks("Animation","AnimationEnd"),animationiteration:Ks("Animation","AnimationIteration"),animationstart:Ks("Animation","AnimationStart"),transitionend:Ks("Transition","TransitionEnd")},Va={},Zc={};m&&(Zc=document.createElement("div").style,"AnimationEvent"in window||(delete sr.animationend.animation,delete sr.animationiteration.animation,delete sr.animationstart.animation),"TransitionEvent"in window||delete sr.transitionend.transition);function Qs(e){if(Va[e])return Va[e];if(!sr[e])return e;var t=sr[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in Zc)return Va[e]=t[r];return e}var Jc=Qs("animationend"),eu=Qs("animationiteration"),tu=Qs("animationstart"),nu=Qs("transitionend"),ru=new Map,su="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function dn(e,t){ru.set(e,t),d(t,[e])}for(var Ka=0;Ka<su.length;Ka++){var Qa=su[Ka],y0=Qa.toLowerCase(),x0=Qa[0].toUpperCase()+Qa.slice(1);dn(y0,"on"+x0)}dn(Jc,"onAnimationEnd"),dn(eu,"onAnimationIteration"),dn(tu,"onAnimationStart"),dn("dblclick","onDoubleClick"),dn("focusin","onFocus"),dn("focusout","onBlur"),dn(nu,"onTransitionEnd"),p("onMouseEnter",["mouseout","mouseover"]),p("onMouseLeave",["mouseout","mouseover"]),p("onPointerEnter",["pointerout","pointerover"]),p("onPointerLeave",["pointerout","pointerover"]),d("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),d("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),d("onBeforeInput",["compositionend","keypress","textInput","paste"]),d("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),d("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),d("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ts="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),w0=new Set("cancel close invalid load scroll toggle".split(" ").concat(ts));function iu(e,t,r){var a=e.type||"unknown-event";e.currentTarget=r,yw(a,t,void 0,e),e.currentTarget=null}function au(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var a=e[r],c=a.event;a=a.listeners;e:{var f=void 0;if(t)for(var g=a.length-1;0<=g;g--){var x=a[g],k=x.instance,P=x.currentTarget;if(x=x.listener,k!==f&&c.isPropagationStopped())break e;iu(c,x,P),f=k}else for(g=0;g<a.length;g++){if(x=a[g],k=x.instance,P=x.currentTarget,x=x.listener,k!==f&&c.isPropagationStopped())break e;iu(c,x,P),f=k}}}if(As)throw e=Sa,As=!1,Sa=null,e}function Ne(e,t){var r=t[ro];r===void 0&&(r=t[ro]=new Set);var a=e+"__bubble";r.has(a)||(ou(t,e,2,!1),r.add(a))}function Ya(e,t,r){var a=0;t&&(a|=4),ou(r,e,a,t)}var Ys="_reactListening"+Math.random().toString(36).slice(2);function ns(e){if(!e[Ys]){e[Ys]=!0,o.forEach(function(r){r!=="selectionchange"&&(w0.has(r)||Ya(r,!1,e),Ya(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Ys]||(t[Ys]=!0,Ya("selectionchange",!1,t))}}function ou(e,t,r,a){switch($c(t)){case 1:var c=Mw;break;case 4:c=Lw;break;default:c=Aa}r=c.bind(null,t,r,e),c=void 0,!Na||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(c=!0),a?c!==void 0?e.addEventListener(t,r,{capture:!0,passive:c}):e.addEventListener(t,r,!0):c!==void 0?e.addEventListener(t,r,{passive:c}):e.addEventListener(t,r,!1)}function Xa(e,t,r,a,c){var f=a;if((t&1)===0&&(t&2)===0&&a!==null)e:for(;;){if(a===null)return;var g=a.tag;if(g===3||g===4){var x=a.stateNode.containerInfo;if(x===c||x.nodeType===8&&x.parentNode===c)break;if(g===4)for(g=a.return;g!==null;){var k=g.tag;if((k===3||k===4)&&(k=g.stateNode.containerInfo,k===c||k.nodeType===8&&k.parentNode===c))return;g=g.return}for(;x!==null;){if(g=$n(x),g===null)return;if(k=g.tag,k===5||k===6){a=f=g;continue e}x=x.parentNode}}a=a.return}fc(function(){var P=f,q=ka(r),B=[];e:{var F=ru.get(e);if(F!==void 0){var V=Ra,X=e;switch(e){case"keypress":if(Ws(r)===0)break e;case"keydown":case"keyup":V=Yw;break;case"focusin":X="focus",V=Da;break;case"focusout":X="blur",V=Da;break;case"beforeblur":case"afterblur":V=Da;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":V=Ac;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":V=Uw;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":V=Jw;break;case Jc:case eu:case tu:V=zw;break;case nu:V=t0;break;case"scroll":V=Rw;break;case"wheel":V=r0;break;case"copy":case"cut":case"paste":V=Bw;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":V=Lc}var Z=(t&4)!==0,Re=!Z&&e==="scroll",N=Z?F!==null?F+"Capture":null:F;Z=[];for(var j=P,C;j!==null;){C=j;var W=C.stateNode;if(C.tag===5&&W!==null&&(C=W,N!==null&&(W=Ur(j,N),W!=null&&Z.push(rs(j,W,C)))),Re)break;j=j.return}0<Z.length&&(F=new V(F,X,null,r,q),B.push({event:F,listeners:Z}))}}if((t&7)===0){e:{if(F=e==="mouseover"||e==="pointerover",V=e==="mouseout"||e==="pointerout",F&&r!==ba&&(X=r.relatedTarget||r.fromElement)&&($n(X)||X[Gt]))break e;if((V||F)&&(F=q.window===q?q:(F=q.ownerDocument)?F.defaultView||F.parentWindow:window,V?(X=r.relatedTarget||r.toElement,V=P,X=X?$n(X):null,X!==null&&(Re=Tn(X),X!==Re||X.tag!==5&&X.tag!==6)&&(X=null)):(V=null,X=P),V!==X)){if(Z=Ac,W="onMouseLeave",N="onMouseEnter",j="mouse",(e==="pointerout"||e==="pointerover")&&(Z=Lc,W="onPointerLeave",N="onPointerEnter",j="pointer"),Re=V==null?F:or(V),C=X==null?F:or(X),F=new Z(W,j+"leave",V,r,q),F.target=Re,F.relatedTarget=C,W=null,$n(q)===P&&(Z=new Z(N,j+"enter",X,r,q),Z.target=C,Z.relatedTarget=Re,W=Z),Re=W,V&&X)t:{for(Z=V,N=X,j=0,C=Z;C;C=ir(C))j++;for(C=0,W=N;W;W=ir(W))C++;for(;0<j-C;)Z=ir(Z),j--;for(;0<C-j;)N=ir(N),C--;for(;j--;){if(Z===N||N!==null&&Z===N.alternate)break t;Z=ir(Z),N=ir(N)}Z=null}else Z=null;V!==null&&lu(B,F,V,Z,!1),X!==null&&Re!==null&&lu(B,Re,X,Z,!0)}}e:{if(F=P?or(P):window,V=F.nodeName&&F.nodeName.toLowerCase(),V==="select"||V==="input"&&F.type==="file")var J=u0;else if(zc(F))if(Bc)J=m0;else{J=f0;var ne=d0}else(V=F.nodeName)&&V.toLowerCase()==="input"&&(F.type==="checkbox"||F.type==="radio")&&(J=p0);if(J&&(J=J(e,P))){qc(B,J,r,q);break e}ne&&ne(e,F,P),e==="focusout"&&(ne=F._wrapperState)&&ne.controlled&&F.type==="number"&&ga(F,"number",F.value)}switch(ne=P?or(P):window,e){case"focusin":(zc(ne)||ne.contentEditable==="true")&&(rr=ne,Ha=P,es=null);break;case"focusout":es=Ha=rr=null;break;case"mousedown":Ga=!0;break;case"contextmenu":case"mouseup":case"dragend":Ga=!1,Xc(B,r,q);break;case"selectionchange":if(v0)break;case"keydown":case"keyup":Xc(B,r,q)}var re;if(za)e:{switch(e){case"compositionstart":var se="onCompositionStart";break e;case"compositionend":se="onCompositionEnd";break e;case"compositionupdate":se="onCompositionUpdate";break e}se=void 0}else nr?Dc(e,r)&&(se="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(se="onCompositionStart");se&&(Rc&&r.locale!=="ko"&&(nr||se!=="onCompositionStart"?se==="onCompositionEnd"&&nr&&(re=Pc()):(un=q,La="value"in un?un.value:un.textContent,nr=!0)),ne=Xs(P,se),0<ne.length&&(se=new Mc(se,e,null,r,q),B.push({event:se,listeners:ne}),re?se.data=re:(re=Fc(r),re!==null&&(se.data=re)))),(re=i0?a0(e,r):o0(e,r))&&(P=Xs(P,"onBeforeInput"),0<P.length&&(q=new Mc("onBeforeInput","beforeinput",null,r,q),B.push({event:q,listeners:P}),q.data=re))}au(B,t)})}function rs(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Xs(e,t){for(var r=t+"Capture",a=[];e!==null;){var c=e,f=c.stateNode;c.tag===5&&f!==null&&(c=f,f=Ur(e,r),f!=null&&a.unshift(rs(e,f,c)),f=Ur(e,t),f!=null&&a.push(rs(e,f,c))),e=e.return}return a}function ir(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function lu(e,t,r,a,c){for(var f=t._reactName,g=[];r!==null&&r!==a;){var x=r,k=x.alternate,P=x.stateNode;if(k!==null&&k===a)break;x.tag===5&&P!==null&&(x=P,c?(k=Ur(r,f),k!=null&&g.unshift(rs(r,k,x))):c||(k=Ur(r,f),k!=null&&g.push(rs(r,k,x)))),r=r.return}g.length!==0&&e.push({event:t,listeners:g})}var b0=/\r\n?/g,k0=/\u0000|\uFFFD/g;function cu(e){return(typeof e=="string"?e:""+e).replace(b0,`
`).replace(k0,"")}function Zs(e,t,r){if(t=cu(t),cu(e)!==t&&r)throw Error(i(425))}function Js(){}var Za=null,Ja=null;function eo(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var to=typeof setTimeout=="function"?setTimeout:void 0,_0=typeof clearTimeout=="function"?clearTimeout:void 0,uu=typeof Promise=="function"?Promise:void 0,j0=typeof queueMicrotask=="function"?queueMicrotask:typeof uu<"u"?function(e){return uu.resolve(null).then(e).catch(N0)}:to;function N0(e){setTimeout(function(){throw e})}function no(e,t){var r=t,a=0;do{var c=r.nextSibling;if(e.removeChild(r),c&&c.nodeType===8)if(r=c.data,r==="/$"){if(a===0){e.removeChild(c),Vr(t);return}a--}else r!=="$"&&r!=="$?"&&r!=="$!"||a++;r=c}while(r);Vr(t)}function fn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function du(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var ar=Math.random().toString(36).slice(2),Ft="__reactFiber$"+ar,ss="__reactProps$"+ar,Gt="__reactContainer$"+ar,ro="__reactEvents$"+ar,S0="__reactListeners$"+ar,E0="__reactHandles$"+ar;function $n(e){var t=e[Ft];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Gt]||r[Ft]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=du(e);e!==null;){if(r=e[Ft])return r;e=du(e)}return t}e=r,r=e.parentNode}return null}function is(e){return e=e[Ft]||e[Gt],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function or(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(i(33))}function ei(e){return e[ss]||null}var so=[],lr=-1;function pn(e){return{current:e}}function Se(e){0>lr||(e.current=so[lr],so[lr]=null,lr--)}function _e(e,t){lr++,so[lr]=e.current,e.current=t}var mn={},Xe=pn(mn),ot=pn(!1),Pn=mn;function cr(e,t){var r=e.type.contextTypes;if(!r)return mn;var a=e.stateNode;if(a&&a.__reactInternalMemoizedUnmaskedChildContext===t)return a.__reactInternalMemoizedMaskedChildContext;var c={},f;for(f in r)c[f]=t[f];return a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=c),c}function lt(e){return e=e.childContextTypes,e!=null}function ti(){Se(ot),Se(Xe)}function fu(e,t,r){if(Xe.current!==mn)throw Error(i(168));_e(Xe,t),_e(ot,r)}function pu(e,t,r){var a=e.stateNode;if(t=t.childContextTypes,typeof a.getChildContext!="function")return r;a=a.getChildContext();for(var c in a)if(!(c in t))throw Error(i(108,pe(e)||"Unknown",c));return G({},r,a)}function ni(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||mn,Pn=Xe.current,_e(Xe,e),_e(ot,ot.current),!0}function mu(e,t,r){var a=e.stateNode;if(!a)throw Error(i(169));r?(e=pu(e,t,Pn),a.__reactInternalMemoizedMergedChildContext=e,Se(ot),Se(Xe),_e(Xe,e)):Se(ot),_e(ot,r)}var Vt=null,ri=!1,io=!1;function hu(e){Vt===null?Vt=[e]:Vt.push(e)}function C0(e){ri=!0,hu(e)}function hn(){if(!io&&Vt!==null){io=!0;var e=0,t=xe;try{var r=Vt;for(xe=1;e<r.length;e++){var a=r[e];do a=a(!0);while(a!==null)}Vt=null,ri=!1}catch(c){throw Vt!==null&&(Vt=Vt.slice(e+1)),vc(Ea,hn),c}finally{xe=t,io=!1}}return null}var ur=[],dr=0,si=null,ii=0,jt=[],Nt=0,In=null,Kt=1,Qt="";function An(e,t){ur[dr++]=ii,ur[dr++]=si,si=e,ii=t}function gu(e,t,r){jt[Nt++]=Kt,jt[Nt++]=Qt,jt[Nt++]=In,In=e;var a=Kt;e=Qt;var c=32-Pt(a)-1;a&=~(1<<c),r+=1;var f=32-Pt(t)+c;if(30<f){var g=c-c%5;f=(a&(1<<g)-1).toString(32),a>>=g,c-=g,Kt=1<<32-Pt(t)+c|r<<c|a,Qt=f+e}else Kt=1<<f|r<<c|a,Qt=e}function ao(e){e.return!==null&&(An(e,1),gu(e,1,0))}function oo(e){for(;e===si;)si=ur[--dr],ur[dr]=null,ii=ur[--dr],ur[dr]=null;for(;e===In;)In=jt[--Nt],jt[Nt]=null,Qt=jt[--Nt],jt[Nt]=null,Kt=jt[--Nt],jt[Nt]=null}var ht=null,gt=null,Ce=!1,At=null;function vu(e,t){var r=Tt(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function yu(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,ht=e,gt=fn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,ht=e,gt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=In!==null?{id:Kt,overflow:Qt}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Tt(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,ht=e,gt=null,!0):!1;default:return!1}}function lo(e){return(e.mode&1)!==0&&(e.flags&128)===0}function co(e){if(Ce){var t=gt;if(t){var r=t;if(!yu(e,t)){if(lo(e))throw Error(i(418));t=fn(r.nextSibling);var a=ht;t&&yu(e,t)?vu(a,r):(e.flags=e.flags&-4097|2,Ce=!1,ht=e)}}else{if(lo(e))throw Error(i(418));e.flags=e.flags&-4097|2,Ce=!1,ht=e}}}function xu(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;ht=e}function ai(e){if(e!==ht)return!1;if(!Ce)return xu(e),Ce=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!eo(e.type,e.memoizedProps)),t&&(t=gt)){if(lo(e))throw wu(),Error(i(418));for(;t;)vu(e,t),t=fn(t.nextSibling)}if(xu(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(i(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){gt=fn(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}gt=null}}else gt=ht?fn(e.stateNode.nextSibling):null;return!0}function wu(){for(var e=gt;e;)e=fn(e.nextSibling)}function fr(){gt=ht=null,Ce=!1}function uo(e){At===null?At=[e]:At.push(e)}var T0=T.ReactCurrentBatchConfig;function as(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(i(309));var a=r.stateNode}if(!a)throw Error(i(147,e));var c=a,f=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===f?t.ref:(t=function(g){var x=c.refs;g===null?delete x[f]:x[f]=g},t._stringRef=f,t)}if(typeof e!="string")throw Error(i(284));if(!r._owner)throw Error(i(290,e))}return e}function oi(e,t){throw e=Object.prototype.toString.call(t),Error(i(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function bu(e){var t=e._init;return t(e._payload)}function ku(e){function t(N,j){if(e){var C=N.deletions;C===null?(N.deletions=[j],N.flags|=16):C.push(j)}}function r(N,j){if(!e)return null;for(;j!==null;)t(N,j),j=j.sibling;return null}function a(N,j){for(N=new Map;j!==null;)j.key!==null?N.set(j.key,j):N.set(j.index,j),j=j.sibling;return N}function c(N,j){return N=_n(N,j),N.index=0,N.sibling=null,N}function f(N,j,C){return N.index=C,e?(C=N.alternate,C!==null?(C=C.index,C<j?(N.flags|=2,j):C):(N.flags|=2,j)):(N.flags|=1048576,j)}function g(N){return e&&N.alternate===null&&(N.flags|=2),N}function x(N,j,C,W){return j===null||j.tag!==6?(j=nl(C,N.mode,W),j.return=N,j):(j=c(j,C),j.return=N,j)}function k(N,j,C,W){var J=C.type;return J===Q?q(N,j,C.props.children,W,C.key):j!==null&&(j.elementType===J||typeof J=="object"&&J!==null&&J.$$typeof===Ie&&bu(J)===j.type)?(W=c(j,C.props),W.ref=as(N,j,C),W.return=N,W):(W=Pi(C.type,C.key,C.props,null,N.mode,W),W.ref=as(N,j,C),W.return=N,W)}function P(N,j,C,W){return j===null||j.tag!==4||j.stateNode.containerInfo!==C.containerInfo||j.stateNode.implementation!==C.implementation?(j=rl(C,N.mode,W),j.return=N,j):(j=c(j,C.children||[]),j.return=N,j)}function q(N,j,C,W,J){return j===null||j.tag!==7?(j=zn(C,N.mode,W,J),j.return=N,j):(j=c(j,C),j.return=N,j)}function B(N,j,C){if(typeof j=="string"&&j!==""||typeof j=="number")return j=nl(""+j,N.mode,C),j.return=N,j;if(typeof j=="object"&&j!==null){switch(j.$$typeof){case I:return C=Pi(j.type,j.key,j.props,null,N.mode,C),C.ref=as(N,null,j),C.return=N,C;case z:return j=rl(j,N.mode,C),j.return=N,j;case Ie:var W=j._init;return B(N,W(j._payload),C)}if(Lr(j)||te(j))return j=zn(j,N.mode,C,null),j.return=N,j;oi(N,j)}return null}function F(N,j,C,W){var J=j!==null?j.key:null;if(typeof C=="string"&&C!==""||typeof C=="number")return J!==null?null:x(N,j,""+C,W);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case I:return C.key===J?k(N,j,C,W):null;case z:return C.key===J?P(N,j,C,W):null;case Ie:return J=C._init,F(N,j,J(C._payload),W)}if(Lr(C)||te(C))return J!==null?null:q(N,j,C,W,null);oi(N,C)}return null}function V(N,j,C,W,J){if(typeof W=="string"&&W!==""||typeof W=="number")return N=N.get(C)||null,x(j,N,""+W,J);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case I:return N=N.get(W.key===null?C:W.key)||null,k(j,N,W,J);case z:return N=N.get(W.key===null?C:W.key)||null,P(j,N,W,J);case Ie:var ne=W._init;return V(N,j,C,ne(W._payload),J)}if(Lr(W)||te(W))return N=N.get(C)||null,q(j,N,W,J,null);oi(j,W)}return null}function X(N,j,C,W){for(var J=null,ne=null,re=j,se=j=0,We=null;re!==null&&se<C.length;se++){re.index>se?(We=re,re=null):We=re.sibling;var ge=F(N,re,C[se],W);if(ge===null){re===null&&(re=We);break}e&&re&&ge.alternate===null&&t(N,re),j=f(ge,j,se),ne===null?J=ge:ne.sibling=ge,ne=ge,re=We}if(se===C.length)return r(N,re),Ce&&An(N,se),J;if(re===null){for(;se<C.length;se++)re=B(N,C[se],W),re!==null&&(j=f(re,j,se),ne===null?J=re:ne.sibling=re,ne=re);return Ce&&An(N,se),J}for(re=a(N,re);se<C.length;se++)We=V(re,N,se,C[se],W),We!==null&&(e&&We.alternate!==null&&re.delete(We.key===null?se:We.key),j=f(We,j,se),ne===null?J=We:ne.sibling=We,ne=We);return e&&re.forEach(function(jn){return t(N,jn)}),Ce&&An(N,se),J}function Z(N,j,C,W){var J=te(C);if(typeof J!="function")throw Error(i(150));if(C=J.call(C),C==null)throw Error(i(151));for(var ne=J=null,re=j,se=j=0,We=null,ge=C.next();re!==null&&!ge.done;se++,ge=C.next()){re.index>se?(We=re,re=null):We=re.sibling;var jn=F(N,re,ge.value,W);if(jn===null){re===null&&(re=We);break}e&&re&&jn.alternate===null&&t(N,re),j=f(jn,j,se),ne===null?J=jn:ne.sibling=jn,ne=jn,re=We}if(ge.done)return r(N,re),Ce&&An(N,se),J;if(re===null){for(;!ge.done;se++,ge=C.next())ge=B(N,ge.value,W),ge!==null&&(j=f(ge,j,se),ne===null?J=ge:ne.sibling=ge,ne=ge);return Ce&&An(N,se),J}for(re=a(N,re);!ge.done;se++,ge=C.next())ge=V(re,N,se,ge.value,W),ge!==null&&(e&&ge.alternate!==null&&re.delete(ge.key===null?se:ge.key),j=f(ge,j,se),ne===null?J=ge:ne.sibling=ge,ne=ge);return e&&re.forEach(function(lb){return t(N,lb)}),Ce&&An(N,se),J}function Re(N,j,C,W){if(typeof C=="object"&&C!==null&&C.type===Q&&C.key===null&&(C=C.props.children),typeof C=="object"&&C!==null){switch(C.$$typeof){case I:e:{for(var J=C.key,ne=j;ne!==null;){if(ne.key===J){if(J=C.type,J===Q){if(ne.tag===7){r(N,ne.sibling),j=c(ne,C.props.children),j.return=N,N=j;break e}}else if(ne.elementType===J||typeof J=="object"&&J!==null&&J.$$typeof===Ie&&bu(J)===ne.type){r(N,ne.sibling),j=c(ne,C.props),j.ref=as(N,ne,C),j.return=N,N=j;break e}r(N,ne);break}else t(N,ne);ne=ne.sibling}C.type===Q?(j=zn(C.props.children,N.mode,W,C.key),j.return=N,N=j):(W=Pi(C.type,C.key,C.props,null,N.mode,W),W.ref=as(N,j,C),W.return=N,N=W)}return g(N);case z:e:{for(ne=C.key;j!==null;){if(j.key===ne)if(j.tag===4&&j.stateNode.containerInfo===C.containerInfo&&j.stateNode.implementation===C.implementation){r(N,j.sibling),j=c(j,C.children||[]),j.return=N,N=j;break e}else{r(N,j);break}else t(N,j);j=j.sibling}j=rl(C,N.mode,W),j.return=N,N=j}return g(N);case Ie:return ne=C._init,Re(N,j,ne(C._payload),W)}if(Lr(C))return X(N,j,C,W);if(te(C))return Z(N,j,C,W);oi(N,C)}return typeof C=="string"&&C!==""||typeof C=="number"?(C=""+C,j!==null&&j.tag===6?(r(N,j.sibling),j=c(j,C),j.return=N,N=j):(r(N,j),j=nl(C,N.mode,W),j.return=N,N=j),g(N)):r(N,j)}return Re}var pr=ku(!0),_u=ku(!1),li=pn(null),ci=null,mr=null,fo=null;function po(){fo=mr=ci=null}function mo(e){var t=li.current;Se(li),e._currentValue=t}function ho(e,t,r){for(;e!==null;){var a=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,a!==null&&(a.childLanes|=t)):a!==null&&(a.childLanes&t)!==t&&(a.childLanes|=t),e===r)break;e=e.return}}function hr(e,t){ci=e,fo=mr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&t)!==0&&(ct=!0),e.firstContext=null)}function St(e){var t=e._currentValue;if(fo!==e)if(e={context:e,memoizedValue:t,next:null},mr===null){if(ci===null)throw Error(i(308));mr=e,ci.dependencies={lanes:0,firstContext:e}}else mr=mr.next=e;return t}var Mn=null;function go(e){Mn===null?Mn=[e]:Mn.push(e)}function ju(e,t,r,a){var c=t.interleaved;return c===null?(r.next=r,go(t)):(r.next=c.next,c.next=r),t.interleaved=r,Yt(e,a)}function Yt(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var gn=!1;function vo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Nu(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Xt(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function vn(e,t,r){var a=e.updateQueue;if(a===null)return null;if(a=a.shared,(me&2)!==0){var c=a.pending;return c===null?t.next=t:(t.next=c.next,c.next=t),a.pending=t,Yt(e,r)}return c=a.interleaved,c===null?(t.next=t,go(a)):(t.next=c.next,c.next=t),a.interleaved=t,Yt(e,r)}function ui(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var a=t.lanes;a&=e.pendingLanes,r|=a,t.lanes=r,$a(e,r)}}function Su(e,t){var r=e.updateQueue,a=e.alternate;if(a!==null&&(a=a.updateQueue,r===a)){var c=null,f=null;if(r=r.firstBaseUpdate,r!==null){do{var g={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};f===null?c=f=g:f=f.next=g,r=r.next}while(r!==null);f===null?c=f=t:f=f.next=t}else c=f=t;r={baseState:a.baseState,firstBaseUpdate:c,lastBaseUpdate:f,shared:a.shared,effects:a.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function di(e,t,r,a){var c=e.updateQueue;gn=!1;var f=c.firstBaseUpdate,g=c.lastBaseUpdate,x=c.shared.pending;if(x!==null){c.shared.pending=null;var k=x,P=k.next;k.next=null,g===null?f=P:g.next=P,g=k;var q=e.alternate;q!==null&&(q=q.updateQueue,x=q.lastBaseUpdate,x!==g&&(x===null?q.firstBaseUpdate=P:x.next=P,q.lastBaseUpdate=k))}if(f!==null){var B=c.baseState;g=0,q=P=k=null,x=f;do{var F=x.lane,V=x.eventTime;if((a&F)===F){q!==null&&(q=q.next={eventTime:V,lane:0,tag:x.tag,payload:x.payload,callback:x.callback,next:null});e:{var X=e,Z=x;switch(F=t,V=r,Z.tag){case 1:if(X=Z.payload,typeof X=="function"){B=X.call(V,B,F);break e}B=X;break e;case 3:X.flags=X.flags&-65537|128;case 0:if(X=Z.payload,F=typeof X=="function"?X.call(V,B,F):X,F==null)break e;B=G({},B,F);break e;case 2:gn=!0}}x.callback!==null&&x.lane!==0&&(e.flags|=64,F=c.effects,F===null?c.effects=[x]:F.push(x))}else V={eventTime:V,lane:F,tag:x.tag,payload:x.payload,callback:x.callback,next:null},q===null?(P=q=V,k=B):q=q.next=V,g|=F;if(x=x.next,x===null){if(x=c.shared.pending,x===null)break;F=x,x=F.next,F.next=null,c.lastBaseUpdate=F,c.shared.pending=null}}while(!0);if(q===null&&(k=B),c.baseState=k,c.firstBaseUpdate=P,c.lastBaseUpdate=q,t=c.shared.interleaved,t!==null){c=t;do g|=c.lane,c=c.next;while(c!==t)}else f===null&&(c.shared.lanes=0);On|=g,e.lanes=g,e.memoizedState=B}}function Eu(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var a=e[t],c=a.callback;if(c!==null){if(a.callback=null,a=r,typeof c!="function")throw Error(i(191,c));c.call(a)}}}var os={},zt=pn(os),ls=pn(os),cs=pn(os);function Ln(e){if(e===os)throw Error(i(174));return e}function yo(e,t){switch(_e(cs,t),_e(ls,e),_e(zt,os),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ya(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=ya(t,e)}Se(zt),_e(zt,t)}function gr(){Se(zt),Se(ls),Se(cs)}function Cu(e){Ln(cs.current);var t=Ln(zt.current),r=ya(t,e.type);t!==r&&(_e(ls,e),_e(zt,r))}function xo(e){ls.current===e&&(Se(zt),Se(ls))}var $e=pn(0);function fi(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var wo=[];function bo(){for(var e=0;e<wo.length;e++)wo[e]._workInProgressVersionPrimary=null;wo.length=0}var pi=T.ReactCurrentDispatcher,ko=T.ReactCurrentBatchConfig,Rn=0,Pe=null,De=null,qe=null,mi=!1,us=!1,ds=0,$0=0;function Ze(){throw Error(i(321))}function _o(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!It(e[r],t[r]))return!1;return!0}function jo(e,t,r,a,c,f){if(Rn=f,Pe=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,pi.current=e===null||e.memoizedState===null?M0:L0,e=r(a,c),us){f=0;do{if(us=!1,ds=0,25<=f)throw Error(i(301));f+=1,qe=De=null,t.updateQueue=null,pi.current=R0,e=r(a,c)}while(us)}if(pi.current=vi,t=De!==null&&De.next!==null,Rn=0,qe=De=Pe=null,mi=!1,t)throw Error(i(300));return e}function No(){var e=ds!==0;return ds=0,e}function qt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return qe===null?Pe.memoizedState=qe=e:qe=qe.next=e,qe}function Et(){if(De===null){var e=Pe.alternate;e=e!==null?e.memoizedState:null}else e=De.next;var t=qe===null?Pe.memoizedState:qe.next;if(t!==null)qe=t,De=e;else{if(e===null)throw Error(i(310));De=e,e={memoizedState:De.memoizedState,baseState:De.baseState,baseQueue:De.baseQueue,queue:De.queue,next:null},qe===null?Pe.memoizedState=qe=e:qe=qe.next=e}return qe}function fs(e,t){return typeof t=="function"?t(e):t}function So(e){var t=Et(),r=t.queue;if(r===null)throw Error(i(311));r.lastRenderedReducer=e;var a=De,c=a.baseQueue,f=r.pending;if(f!==null){if(c!==null){var g=c.next;c.next=f.next,f.next=g}a.baseQueue=c=f,r.pending=null}if(c!==null){f=c.next,a=a.baseState;var x=g=null,k=null,P=f;do{var q=P.lane;if((Rn&q)===q)k!==null&&(k=k.next={lane:0,action:P.action,hasEagerState:P.hasEagerState,eagerState:P.eagerState,next:null}),a=P.hasEagerState?P.eagerState:e(a,P.action);else{var B={lane:q,action:P.action,hasEagerState:P.hasEagerState,eagerState:P.eagerState,next:null};k===null?(x=k=B,g=a):k=k.next=B,Pe.lanes|=q,On|=q}P=P.next}while(P!==null&&P!==f);k===null?g=a:k.next=x,It(a,t.memoizedState)||(ct=!0),t.memoizedState=a,t.baseState=g,t.baseQueue=k,r.lastRenderedState=a}if(e=r.interleaved,e!==null){c=e;do f=c.lane,Pe.lanes|=f,On|=f,c=c.next;while(c!==e)}else c===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Eo(e){var t=Et(),r=t.queue;if(r===null)throw Error(i(311));r.lastRenderedReducer=e;var a=r.dispatch,c=r.pending,f=t.memoizedState;if(c!==null){r.pending=null;var g=c=c.next;do f=e(f,g.action),g=g.next;while(g!==c);It(f,t.memoizedState)||(ct=!0),t.memoizedState=f,t.baseQueue===null&&(t.baseState=f),r.lastRenderedState=f}return[f,a]}function Tu(){}function $u(e,t){var r=Pe,a=Et(),c=t(),f=!It(a.memoizedState,c);if(f&&(a.memoizedState=c,ct=!0),a=a.queue,Co(Au.bind(null,r,a,e),[e]),a.getSnapshot!==t||f||qe!==null&&qe.memoizedState.tag&1){if(r.flags|=2048,ps(9,Iu.bind(null,r,a,c,t),void 0,null),Be===null)throw Error(i(349));(Rn&30)!==0||Pu(r,t,c)}return c}function Pu(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=Pe.updateQueue,t===null?(t={lastEffect:null,stores:null},Pe.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function Iu(e,t,r,a){t.value=r,t.getSnapshot=a,Mu(t)&&Lu(e)}function Au(e,t,r){return r(function(){Mu(t)&&Lu(e)})}function Mu(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!It(e,r)}catch{return!0}}function Lu(e){var t=Yt(e,1);t!==null&&Ot(t,e,1,-1)}function Ru(e){var t=qt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:fs,lastRenderedState:e},t.queue=e,e=e.dispatch=A0.bind(null,Pe,e),[t.memoizedState,e]}function ps(e,t,r,a){return e={tag:e,create:t,destroy:r,deps:a,next:null},t=Pe.updateQueue,t===null?(t={lastEffect:null,stores:null},Pe.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(a=r.next,r.next=e,e.next=a,t.lastEffect=e)),e}function Ou(){return Et().memoizedState}function hi(e,t,r,a){var c=qt();Pe.flags|=e,c.memoizedState=ps(1|t,r,void 0,a===void 0?null:a)}function gi(e,t,r,a){var c=Et();a=a===void 0?null:a;var f=void 0;if(De!==null){var g=De.memoizedState;if(f=g.destroy,a!==null&&_o(a,g.deps)){c.memoizedState=ps(t,r,f,a);return}}Pe.flags|=e,c.memoizedState=ps(1|t,r,f,a)}function Uu(e,t){return hi(8390656,8,e,t)}function Co(e,t){return gi(2048,8,e,t)}function Du(e,t){return gi(4,2,e,t)}function Fu(e,t){return gi(4,4,e,t)}function zu(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function qu(e,t,r){return r=r!=null?r.concat([e]):null,gi(4,4,zu.bind(null,t,e),r)}function To(){}function Bu(e,t){var r=Et();t=t===void 0?null:t;var a=r.memoizedState;return a!==null&&t!==null&&_o(t,a[1])?a[0]:(r.memoizedState=[e,t],e)}function Wu(e,t){var r=Et();t=t===void 0?null:t;var a=r.memoizedState;return a!==null&&t!==null&&_o(t,a[1])?a[0]:(e=e(),r.memoizedState=[e,t],e)}function Hu(e,t,r){return(Rn&21)===0?(e.baseState&&(e.baseState=!1,ct=!0),e.memoizedState=r):(It(r,t)||(r=bc(),Pe.lanes|=r,On|=r,e.baseState=!0),t)}function P0(e,t){var r=xe;xe=r!==0&&4>r?r:4,e(!0);var a=ko.transition;ko.transition={};try{e(!1),t()}finally{xe=r,ko.transition=a}}function Gu(){return Et().memoizedState}function I0(e,t,r){var a=bn(e);if(r={lane:a,action:r,hasEagerState:!1,eagerState:null,next:null},Vu(e))Ku(t,r);else if(r=ju(e,t,r,a),r!==null){var c=it();Ot(r,e,a,c),Qu(r,t,a)}}function A0(e,t,r){var a=bn(e),c={lane:a,action:r,hasEagerState:!1,eagerState:null,next:null};if(Vu(e))Ku(t,c);else{var f=e.alternate;if(e.lanes===0&&(f===null||f.lanes===0)&&(f=t.lastRenderedReducer,f!==null))try{var g=t.lastRenderedState,x=f(g,r);if(c.hasEagerState=!0,c.eagerState=x,It(x,g)){var k=t.interleaved;k===null?(c.next=c,go(t)):(c.next=k.next,k.next=c),t.interleaved=c;return}}catch{}finally{}r=ju(e,t,c,a),r!==null&&(c=it(),Ot(r,e,a,c),Qu(r,t,a))}}function Vu(e){var t=e.alternate;return e===Pe||t!==null&&t===Pe}function Ku(e,t){us=mi=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function Qu(e,t,r){if((r&4194240)!==0){var a=t.lanes;a&=e.pendingLanes,r|=a,t.lanes=r,$a(e,r)}}var vi={readContext:St,useCallback:Ze,useContext:Ze,useEffect:Ze,useImperativeHandle:Ze,useInsertionEffect:Ze,useLayoutEffect:Ze,useMemo:Ze,useReducer:Ze,useRef:Ze,useState:Ze,useDebugValue:Ze,useDeferredValue:Ze,useTransition:Ze,useMutableSource:Ze,useSyncExternalStore:Ze,useId:Ze,unstable_isNewReconciler:!1},M0={readContext:St,useCallback:function(e,t){return qt().memoizedState=[e,t===void 0?null:t],e},useContext:St,useEffect:Uu,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,hi(4194308,4,zu.bind(null,t,e),r)},useLayoutEffect:function(e,t){return hi(4194308,4,e,t)},useInsertionEffect:function(e,t){return hi(4,2,e,t)},useMemo:function(e,t){var r=qt();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var a=qt();return t=r!==void 0?r(t):t,a.memoizedState=a.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},a.queue=e,e=e.dispatch=I0.bind(null,Pe,e),[a.memoizedState,e]},useRef:function(e){var t=qt();return e={current:e},t.memoizedState=e},useState:Ru,useDebugValue:To,useDeferredValue:function(e){return qt().memoizedState=e},useTransition:function(){var e=Ru(!1),t=e[0];return e=P0.bind(null,e[1]),qt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var a=Pe,c=qt();if(Ce){if(r===void 0)throw Error(i(407));r=r()}else{if(r=t(),Be===null)throw Error(i(349));(Rn&30)!==0||Pu(a,t,r)}c.memoizedState=r;var f={value:r,getSnapshot:t};return c.queue=f,Uu(Au.bind(null,a,f,e),[e]),a.flags|=2048,ps(9,Iu.bind(null,a,f,r,t),void 0,null),r},useId:function(){var e=qt(),t=Be.identifierPrefix;if(Ce){var r=Qt,a=Kt;r=(a&~(1<<32-Pt(a)-1)).toString(32)+r,t=":"+t+"R"+r,r=ds++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=$0++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},L0={readContext:St,useCallback:Bu,useContext:St,useEffect:Co,useImperativeHandle:qu,useInsertionEffect:Du,useLayoutEffect:Fu,useMemo:Wu,useReducer:So,useRef:Ou,useState:function(){return So(fs)},useDebugValue:To,useDeferredValue:function(e){var t=Et();return Hu(t,De.memoizedState,e)},useTransition:function(){var e=So(fs)[0],t=Et().memoizedState;return[e,t]},useMutableSource:Tu,useSyncExternalStore:$u,useId:Gu,unstable_isNewReconciler:!1},R0={readContext:St,useCallback:Bu,useContext:St,useEffect:Co,useImperativeHandle:qu,useInsertionEffect:Du,useLayoutEffect:Fu,useMemo:Wu,useReducer:Eo,useRef:Ou,useState:function(){return Eo(fs)},useDebugValue:To,useDeferredValue:function(e){var t=Et();return De===null?t.memoizedState=e:Hu(t,De.memoizedState,e)},useTransition:function(){var e=Eo(fs)[0],t=Et().memoizedState;return[e,t]},useMutableSource:Tu,useSyncExternalStore:$u,useId:Gu,unstable_isNewReconciler:!1};function Mt(e,t){if(e&&e.defaultProps){t=G({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function $o(e,t,r,a){t=e.memoizedState,r=r(a,t),r=r==null?t:G({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var yi={isMounted:function(e){return(e=e._reactInternals)?Tn(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var a=it(),c=bn(e),f=Xt(a,c);f.payload=t,r!=null&&(f.callback=r),t=vn(e,f,c),t!==null&&(Ot(t,e,c,a),ui(t,e,c))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var a=it(),c=bn(e),f=Xt(a,c);f.tag=1,f.payload=t,r!=null&&(f.callback=r),t=vn(e,f,c),t!==null&&(Ot(t,e,c,a),ui(t,e,c))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=it(),a=bn(e),c=Xt(r,a);c.tag=2,t!=null&&(c.callback=t),t=vn(e,c,a),t!==null&&(Ot(t,e,a,r),ui(t,e,a))}};function Yu(e,t,r,a,c,f,g){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(a,f,g):t.prototype&&t.prototype.isPureReactComponent?!Jr(r,a)||!Jr(c,f):!0}function Xu(e,t,r){var a=!1,c=mn,f=t.contextType;return typeof f=="object"&&f!==null?f=St(f):(c=lt(t)?Pn:Xe.current,a=t.contextTypes,f=(a=a!=null)?cr(e,c):mn),t=new t(r,f),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=yi,e.stateNode=t,t._reactInternals=e,a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=c,e.__reactInternalMemoizedMaskedChildContext=f),t}function Zu(e,t,r,a){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,a),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,a),t.state!==e&&yi.enqueueReplaceState(t,t.state,null)}function Po(e,t,r,a){var c=e.stateNode;c.props=r,c.state=e.memoizedState,c.refs={},vo(e);var f=t.contextType;typeof f=="object"&&f!==null?c.context=St(f):(f=lt(t)?Pn:Xe.current,c.context=cr(e,f)),c.state=e.memoizedState,f=t.getDerivedStateFromProps,typeof f=="function"&&($o(e,t,f,r),c.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof c.getSnapshotBeforeUpdate=="function"||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(t=c.state,typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount(),t!==c.state&&yi.enqueueReplaceState(c,c.state,null),di(e,r,c,a),c.state=e.memoizedState),typeof c.componentDidMount=="function"&&(e.flags|=4194308)}function vr(e,t){try{var r="",a=t;do r+=ce(a),a=a.return;while(a);var c=r}catch(f){c=`
Error generating stack: `+f.message+`
`+f.stack}return{value:e,source:t,stack:c,digest:null}}function Io(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function Ao(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var O0=typeof WeakMap=="function"?WeakMap:Map;function Ju(e,t,r){r=Xt(-1,r),r.tag=3,r.payload={element:null};var a=t.value;return r.callback=function(){Ni||(Ni=!0,Ko=a),Ao(e,t)},r}function ed(e,t,r){r=Xt(-1,r),r.tag=3;var a=e.type.getDerivedStateFromError;if(typeof a=="function"){var c=t.value;r.payload=function(){return a(c)},r.callback=function(){Ao(e,t)}}var f=e.stateNode;return f!==null&&typeof f.componentDidCatch=="function"&&(r.callback=function(){Ao(e,t),typeof a!="function"&&(xn===null?xn=new Set([this]):xn.add(this));var g=t.stack;this.componentDidCatch(t.value,{componentStack:g!==null?g:""})}),r}function td(e,t,r){var a=e.pingCache;if(a===null){a=e.pingCache=new O0;var c=new Set;a.set(t,c)}else c=a.get(t),c===void 0&&(c=new Set,a.set(t,c));c.has(r)||(c.add(r),e=X0.bind(null,e,t,r),t.then(e,e))}function nd(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function rd(e,t,r,a,c){return(e.mode&1)===0?(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Xt(-1,1),t.tag=2,vn(r,t,1))),r.lanes|=1),e):(e.flags|=65536,e.lanes=c,e)}var U0=T.ReactCurrentOwner,ct=!1;function st(e,t,r,a){t.child=e===null?_u(t,null,r,a):pr(t,e.child,r,a)}function sd(e,t,r,a,c){r=r.render;var f=t.ref;return hr(t,c),a=jo(e,t,r,a,f,c),r=No(),e!==null&&!ct?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~c,Zt(e,t,c)):(Ce&&r&&ao(t),t.flags|=1,st(e,t,a,c),t.child)}function id(e,t,r,a,c){if(e===null){var f=r.type;return typeof f=="function"&&!tl(f)&&f.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=f,ad(e,t,f,a,c)):(e=Pi(r.type,null,a,t,t.mode,c),e.ref=t.ref,e.return=t,t.child=e)}if(f=e.child,(e.lanes&c)===0){var g=f.memoizedProps;if(r=r.compare,r=r!==null?r:Jr,r(g,a)&&e.ref===t.ref)return Zt(e,t,c)}return t.flags|=1,e=_n(f,a),e.ref=t.ref,e.return=t,t.child=e}function ad(e,t,r,a,c){if(e!==null){var f=e.memoizedProps;if(Jr(f,a)&&e.ref===t.ref)if(ct=!1,t.pendingProps=a=f,(e.lanes&c)!==0)(e.flags&131072)!==0&&(ct=!0);else return t.lanes=e.lanes,Zt(e,t,c)}return Mo(e,t,r,a,c)}function od(e,t,r){var a=t.pendingProps,c=a.children,f=e!==null?e.memoizedState:null;if(a.mode==="hidden")if((t.mode&1)===0)t.memoizedState={baseLanes:0,cachePool:null,transitions:null},_e(xr,vt),vt|=r;else{if((r&1073741824)===0)return e=f!==null?f.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,_e(xr,vt),vt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},a=f!==null?f.baseLanes:r,_e(xr,vt),vt|=a}else f!==null?(a=f.baseLanes|r,t.memoizedState=null):a=r,_e(xr,vt),vt|=a;return st(e,t,c,r),t.child}function ld(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function Mo(e,t,r,a,c){var f=lt(r)?Pn:Xe.current;return f=cr(t,f),hr(t,c),r=jo(e,t,r,a,f,c),a=No(),e!==null&&!ct?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~c,Zt(e,t,c)):(Ce&&a&&ao(t),t.flags|=1,st(e,t,r,c),t.child)}function cd(e,t,r,a,c){if(lt(r)){var f=!0;ni(t)}else f=!1;if(hr(t,c),t.stateNode===null)wi(e,t),Xu(t,r,a),Po(t,r,a,c),a=!0;else if(e===null){var g=t.stateNode,x=t.memoizedProps;g.props=x;var k=g.context,P=r.contextType;typeof P=="object"&&P!==null?P=St(P):(P=lt(r)?Pn:Xe.current,P=cr(t,P));var q=r.getDerivedStateFromProps,B=typeof q=="function"||typeof g.getSnapshotBeforeUpdate=="function";B||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(x!==a||k!==P)&&Zu(t,g,a,P),gn=!1;var F=t.memoizedState;g.state=F,di(t,a,g,c),k=t.memoizedState,x!==a||F!==k||ot.current||gn?(typeof q=="function"&&($o(t,r,q,a),k=t.memoizedState),(x=gn||Yu(t,r,x,a,F,k,P))?(B||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(t.flags|=4194308)):(typeof g.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=a,t.memoizedState=k),g.props=a,g.state=k,g.context=P,a=x):(typeof g.componentDidMount=="function"&&(t.flags|=4194308),a=!1)}else{g=t.stateNode,Nu(e,t),x=t.memoizedProps,P=t.type===t.elementType?x:Mt(t.type,x),g.props=P,B=t.pendingProps,F=g.context,k=r.contextType,typeof k=="object"&&k!==null?k=St(k):(k=lt(r)?Pn:Xe.current,k=cr(t,k));var V=r.getDerivedStateFromProps;(q=typeof V=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(x!==B||F!==k)&&Zu(t,g,a,k),gn=!1,F=t.memoizedState,g.state=F,di(t,a,g,c);var X=t.memoizedState;x!==B||F!==X||ot.current||gn?(typeof V=="function"&&($o(t,r,V,a),X=t.memoizedState),(P=gn||Yu(t,r,P,a,F,X,k)||!1)?(q||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(a,X,k),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(a,X,k)),typeof g.componentDidUpdate=="function"&&(t.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof g.componentDidUpdate!="function"||x===e.memoizedProps&&F===e.memoizedState||(t.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||x===e.memoizedProps&&F===e.memoizedState||(t.flags|=1024),t.memoizedProps=a,t.memoizedState=X),g.props=a,g.state=X,g.context=k,a=P):(typeof g.componentDidUpdate!="function"||x===e.memoizedProps&&F===e.memoizedState||(t.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||x===e.memoizedProps&&F===e.memoizedState||(t.flags|=1024),a=!1)}return Lo(e,t,r,a,f,c)}function Lo(e,t,r,a,c,f){ld(e,t);var g=(t.flags&128)!==0;if(!a&&!g)return c&&mu(t,r,!1),Zt(e,t,f);a=t.stateNode,U0.current=t;var x=g&&typeof r.getDerivedStateFromError!="function"?null:a.render();return t.flags|=1,e!==null&&g?(t.child=pr(t,e.child,null,f),t.child=pr(t,null,x,f)):st(e,t,x,f),t.memoizedState=a.state,c&&mu(t,r,!0),t.child}function ud(e){var t=e.stateNode;t.pendingContext?fu(e,t.pendingContext,t.pendingContext!==t.context):t.context&&fu(e,t.context,!1),yo(e,t.containerInfo)}function dd(e,t,r,a,c){return fr(),uo(c),t.flags|=256,st(e,t,r,a),t.child}var Ro={dehydrated:null,treeContext:null,retryLane:0};function Oo(e){return{baseLanes:e,cachePool:null,transitions:null}}function fd(e,t,r){var a=t.pendingProps,c=$e.current,f=!1,g=(t.flags&128)!==0,x;if((x=g)||(x=e!==null&&e.memoizedState===null?!1:(c&2)!==0),x?(f=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(c|=1),_e($e,c&1),e===null)return co(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((t.mode&1)===0?t.lanes=1:e.data==="$!"?t.lanes=8:t.lanes=1073741824,null):(g=a.children,e=a.fallback,f?(a=t.mode,f=t.child,g={mode:"hidden",children:g},(a&1)===0&&f!==null?(f.childLanes=0,f.pendingProps=g):f=Ii(g,a,0,null),e=zn(e,a,r,null),f.return=t,e.return=t,f.sibling=e,t.child=f,t.child.memoizedState=Oo(r),t.memoizedState=Ro,e):Uo(t,g));if(c=e.memoizedState,c!==null&&(x=c.dehydrated,x!==null))return D0(e,t,g,a,x,c,r);if(f){f=a.fallback,g=t.mode,c=e.child,x=c.sibling;var k={mode:"hidden",children:a.children};return(g&1)===0&&t.child!==c?(a=t.child,a.childLanes=0,a.pendingProps=k,t.deletions=null):(a=_n(c,k),a.subtreeFlags=c.subtreeFlags&14680064),x!==null?f=_n(x,f):(f=zn(f,g,r,null),f.flags|=2),f.return=t,a.return=t,a.sibling=f,t.child=a,a=f,f=t.child,g=e.child.memoizedState,g=g===null?Oo(r):{baseLanes:g.baseLanes|r,cachePool:null,transitions:g.transitions},f.memoizedState=g,f.childLanes=e.childLanes&~r,t.memoizedState=Ro,a}return f=e.child,e=f.sibling,a=_n(f,{mode:"visible",children:a.children}),(t.mode&1)===0&&(a.lanes=r),a.return=t,a.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=a,t.memoizedState=null,a}function Uo(e,t){return t=Ii({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function xi(e,t,r,a){return a!==null&&uo(a),pr(t,e.child,null,r),e=Uo(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function D0(e,t,r,a,c,f,g){if(r)return t.flags&256?(t.flags&=-257,a=Io(Error(i(422))),xi(e,t,g,a)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(f=a.fallback,c=t.mode,a=Ii({mode:"visible",children:a.children},c,0,null),f=zn(f,c,g,null),f.flags|=2,a.return=t,f.return=t,a.sibling=f,t.child=a,(t.mode&1)!==0&&pr(t,e.child,null,g),t.child.memoizedState=Oo(g),t.memoizedState=Ro,f);if((t.mode&1)===0)return xi(e,t,g,null);if(c.data==="$!"){if(a=c.nextSibling&&c.nextSibling.dataset,a)var x=a.dgst;return a=x,f=Error(i(419)),a=Io(f,a,void 0),xi(e,t,g,a)}if(x=(g&e.childLanes)!==0,ct||x){if(a=Be,a!==null){switch(g&-g){case 4:c=2;break;case 16:c=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:c=32;break;case 536870912:c=268435456;break;default:c=0}c=(c&(a.suspendedLanes|g))!==0?0:c,c!==0&&c!==f.retryLane&&(f.retryLane=c,Yt(e,c),Ot(a,e,c,-1))}return el(),a=Io(Error(i(421))),xi(e,t,g,a)}return c.data==="$?"?(t.flags|=128,t.child=e.child,t=Z0.bind(null,e),c._reactRetry=t,null):(e=f.treeContext,gt=fn(c.nextSibling),ht=t,Ce=!0,At=null,e!==null&&(jt[Nt++]=Kt,jt[Nt++]=Qt,jt[Nt++]=In,Kt=e.id,Qt=e.overflow,In=t),t=Uo(t,a.children),t.flags|=4096,t)}function pd(e,t,r){e.lanes|=t;var a=e.alternate;a!==null&&(a.lanes|=t),ho(e.return,t,r)}function Do(e,t,r,a,c){var f=e.memoizedState;f===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:a,tail:r,tailMode:c}:(f.isBackwards=t,f.rendering=null,f.renderingStartTime=0,f.last=a,f.tail=r,f.tailMode=c)}function md(e,t,r){var a=t.pendingProps,c=a.revealOrder,f=a.tail;if(st(e,t,a.children,r),a=$e.current,(a&2)!==0)a=a&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&pd(e,r,t);else if(e.tag===19)pd(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}a&=1}if(_e($e,a),(t.mode&1)===0)t.memoizedState=null;else switch(c){case"forwards":for(r=t.child,c=null;r!==null;)e=r.alternate,e!==null&&fi(e)===null&&(c=r),r=r.sibling;r=c,r===null?(c=t.child,t.child=null):(c=r.sibling,r.sibling=null),Do(t,!1,c,r,f);break;case"backwards":for(r=null,c=t.child,t.child=null;c!==null;){if(e=c.alternate,e!==null&&fi(e)===null){t.child=c;break}e=c.sibling,c.sibling=r,r=c,c=e}Do(t,!0,r,null,f);break;case"together":Do(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function wi(e,t){(t.mode&1)===0&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Zt(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),On|=t.lanes,(r&t.childLanes)===0)return null;if(e!==null&&t.child!==e.child)throw Error(i(153));if(t.child!==null){for(e=t.child,r=_n(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=_n(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function F0(e,t,r){switch(t.tag){case 3:ud(t),fr();break;case 5:Cu(t);break;case 1:lt(t.type)&&ni(t);break;case 4:yo(t,t.stateNode.containerInfo);break;case 10:var a=t.type._context,c=t.memoizedProps.value;_e(li,a._currentValue),a._currentValue=c;break;case 13:if(a=t.memoizedState,a!==null)return a.dehydrated!==null?(_e($e,$e.current&1),t.flags|=128,null):(r&t.child.childLanes)!==0?fd(e,t,r):(_e($e,$e.current&1),e=Zt(e,t,r),e!==null?e.sibling:null);_e($e,$e.current&1);break;case 19:if(a=(r&t.childLanes)!==0,(e.flags&128)!==0){if(a)return md(e,t,r);t.flags|=128}if(c=t.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),_e($e,$e.current),a)break;return null;case 22:case 23:return t.lanes=0,od(e,t,r)}return Zt(e,t,r)}var hd,Fo,gd,vd;hd=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}},Fo=function(){},gd=function(e,t,r,a){var c=e.memoizedProps;if(c!==a){e=t.stateNode,Ln(zt.current);var f=null;switch(r){case"input":c=Yn(e,c),a=Yn(e,a),f=[];break;case"select":c=G({},c,{value:void 0}),a=G({},a,{value:void 0}),f=[];break;case"textarea":c=va(e,c),a=va(e,a),f=[];break;default:typeof c.onClick!="function"&&typeof a.onClick=="function"&&(e.onclick=Js)}xa(r,a);var g;r=null;for(P in c)if(!a.hasOwnProperty(P)&&c.hasOwnProperty(P)&&c[P]!=null)if(P==="style"){var x=c[P];for(g in x)x.hasOwnProperty(g)&&(r||(r={}),r[g]="")}else P!=="dangerouslySetInnerHTML"&&P!=="children"&&P!=="suppressContentEditableWarning"&&P!=="suppressHydrationWarning"&&P!=="autoFocus"&&(u.hasOwnProperty(P)?f||(f=[]):(f=f||[]).push(P,null));for(P in a){var k=a[P];if(x=c?.[P],a.hasOwnProperty(P)&&k!==x&&(k!=null||x!=null))if(P==="style")if(x){for(g in x)!x.hasOwnProperty(g)||k&&k.hasOwnProperty(g)||(r||(r={}),r[g]="");for(g in k)k.hasOwnProperty(g)&&x[g]!==k[g]&&(r||(r={}),r[g]=k[g])}else r||(f||(f=[]),f.push(P,r)),r=k;else P==="dangerouslySetInnerHTML"?(k=k?k.__html:void 0,x=x?x.__html:void 0,k!=null&&x!==k&&(f=f||[]).push(P,k)):P==="children"?typeof k!="string"&&typeof k!="number"||(f=f||[]).push(P,""+k):P!=="suppressContentEditableWarning"&&P!=="suppressHydrationWarning"&&(u.hasOwnProperty(P)?(k!=null&&P==="onScroll"&&Ne("scroll",e),f||x===k||(f=[])):(f=f||[]).push(P,k))}r&&(f=f||[]).push("style",r);var P=f;(t.updateQueue=P)&&(t.flags|=4)}},vd=function(e,t,r,a){r!==a&&(t.flags|=4)};function ms(e,t){if(!Ce)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:a.sibling=null}}function Je(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,a=0;if(t)for(var c=e.child;c!==null;)r|=c.lanes|c.childLanes,a|=c.subtreeFlags&14680064,a|=c.flags&14680064,c.return=e,c=c.sibling;else for(c=e.child;c!==null;)r|=c.lanes|c.childLanes,a|=c.subtreeFlags,a|=c.flags,c.return=e,c=c.sibling;return e.subtreeFlags|=a,e.childLanes=r,t}function z0(e,t,r){var a=t.pendingProps;switch(oo(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Je(t),null;case 1:return lt(t.type)&&ti(),Je(t),null;case 3:return a=t.stateNode,gr(),Se(ot),Se(Xe),bo(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(ai(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,At!==null&&(Xo(At),At=null))),Fo(e,t),Je(t),null;case 5:xo(t);var c=Ln(cs.current);if(r=t.type,e!==null&&t.stateNode!=null)gd(e,t,r,a,c),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!a){if(t.stateNode===null)throw Error(i(166));return Je(t),null}if(e=Ln(zt.current),ai(t)){a=t.stateNode,r=t.type;var f=t.memoizedProps;switch(a[Ft]=t,a[ss]=f,e=(t.mode&1)!==0,r){case"dialog":Ne("cancel",a),Ne("close",a);break;case"iframe":case"object":case"embed":Ne("load",a);break;case"video":case"audio":for(c=0;c<ts.length;c++)Ne(ts[c],a);break;case"source":Ne("error",a);break;case"img":case"image":case"link":Ne("error",a),Ne("load",a);break;case"details":Ne("toggle",a);break;case"input":Ts(a,f),Ne("invalid",a);break;case"select":a._wrapperState={wasMultiple:!!f.multiple},Ne("invalid",a);break;case"textarea":ec(a,f),Ne("invalid",a)}xa(r,f),c=null;for(var g in f)if(f.hasOwnProperty(g)){var x=f[g];g==="children"?typeof x=="string"?a.textContent!==x&&(f.suppressHydrationWarning!==!0&&Zs(a.textContent,x,e),c=["children",x]):typeof x=="number"&&a.textContent!==""+x&&(f.suppressHydrationWarning!==!0&&Zs(a.textContent,x,e),c=["children",""+x]):u.hasOwnProperty(g)&&x!=null&&g==="onScroll"&&Ne("scroll",a)}switch(r){case"input":Ht(a),Jl(a,f,!0);break;case"textarea":Ht(a),nc(a);break;case"select":case"option":break;default:typeof f.onClick=="function"&&(a.onclick=Js)}a=c,t.updateQueue=a,a!==null&&(t.flags|=4)}else{g=c.nodeType===9?c:c.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=rc(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=g.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof a.is=="string"?e=g.createElement(r,{is:a.is}):(e=g.createElement(r),r==="select"&&(g=e,a.multiple?g.multiple=!0:a.size&&(g.size=a.size))):e=g.createElementNS(e,r),e[Ft]=t,e[ss]=a,hd(e,t,!1,!1),t.stateNode=e;e:{switch(g=wa(r,a),r){case"dialog":Ne("cancel",e),Ne("close",e),c=a;break;case"iframe":case"object":case"embed":Ne("load",e),c=a;break;case"video":case"audio":for(c=0;c<ts.length;c++)Ne(ts[c],e);c=a;break;case"source":Ne("error",e),c=a;break;case"img":case"image":case"link":Ne("error",e),Ne("load",e),c=a;break;case"details":Ne("toggle",e),c=a;break;case"input":Ts(e,a),c=Yn(e,a),Ne("invalid",e);break;case"option":c=a;break;case"select":e._wrapperState={wasMultiple:!!a.multiple},c=G({},a,{value:void 0}),Ne("invalid",e);break;case"textarea":ec(e,a),c=va(e,a),Ne("invalid",e);break;default:c=a}xa(r,c),x=c;for(f in x)if(x.hasOwnProperty(f)){var k=x[f];f==="style"?ac(e,k):f==="dangerouslySetInnerHTML"?(k=k?k.__html:void 0,k!=null&&sc(e,k)):f==="children"?typeof k=="string"?(r!=="textarea"||k!=="")&&Rr(e,k):typeof k=="number"&&Rr(e,""+k):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(u.hasOwnProperty(f)?k!=null&&f==="onScroll"&&Ne("scroll",e):k!=null&&w(e,f,k,g))}switch(r){case"input":Ht(e),Jl(e,a,!1);break;case"textarea":Ht(e),nc(e);break;case"option":a.value!=null&&e.setAttribute("value",""+fe(a.value));break;case"select":e.multiple=!!a.multiple,f=a.value,f!=null?Xn(e,!!a.multiple,f,!1):a.defaultValue!=null&&Xn(e,!!a.multiple,a.defaultValue,!0);break;default:typeof c.onClick=="function"&&(e.onclick=Js)}switch(r){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}}a&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Je(t),null;case 6:if(e&&t.stateNode!=null)vd(e,t,e.memoizedProps,a);else{if(typeof a!="string"&&t.stateNode===null)throw Error(i(166));if(r=Ln(cs.current),Ln(zt.current),ai(t)){if(a=t.stateNode,r=t.memoizedProps,a[Ft]=t,(f=a.nodeValue!==r)&&(e=ht,e!==null))switch(e.tag){case 3:Zs(a.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Zs(a.nodeValue,r,(e.mode&1)!==0)}f&&(t.flags|=4)}else a=(r.nodeType===9?r:r.ownerDocument).createTextNode(a),a[Ft]=t,t.stateNode=a}return Je(t),null;case 13:if(Se($e),a=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ce&&gt!==null&&(t.mode&1)!==0&&(t.flags&128)===0)wu(),fr(),t.flags|=98560,f=!1;else if(f=ai(t),a!==null&&a.dehydrated!==null){if(e===null){if(!f)throw Error(i(318));if(f=t.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(i(317));f[Ft]=t}else fr(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Je(t),f=!1}else At!==null&&(Xo(At),At=null),f=!0;if(!f)return t.flags&65536?t:null}return(t.flags&128)!==0?(t.lanes=r,t):(a=a!==null,a!==(e!==null&&e.memoizedState!==null)&&a&&(t.child.flags|=8192,(t.mode&1)!==0&&(e===null||($e.current&1)!==0?Fe===0&&(Fe=3):el())),t.updateQueue!==null&&(t.flags|=4),Je(t),null);case 4:return gr(),Fo(e,t),e===null&&ns(t.stateNode.containerInfo),Je(t),null;case 10:return mo(t.type._context),Je(t),null;case 17:return lt(t.type)&&ti(),Je(t),null;case 19:if(Se($e),f=t.memoizedState,f===null)return Je(t),null;if(a=(t.flags&128)!==0,g=f.rendering,g===null)if(a)ms(f,!1);else{if(Fe!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(g=fi(e),g!==null){for(t.flags|=128,ms(f,!1),a=g.updateQueue,a!==null&&(t.updateQueue=a,t.flags|=4),t.subtreeFlags=0,a=r,r=t.child;r!==null;)f=r,e=a,f.flags&=14680066,g=f.alternate,g===null?(f.childLanes=0,f.lanes=e,f.child=null,f.subtreeFlags=0,f.memoizedProps=null,f.memoizedState=null,f.updateQueue=null,f.dependencies=null,f.stateNode=null):(f.childLanes=g.childLanes,f.lanes=g.lanes,f.child=g.child,f.subtreeFlags=0,f.deletions=null,f.memoizedProps=g.memoizedProps,f.memoizedState=g.memoizedState,f.updateQueue=g.updateQueue,f.type=g.type,e=g.dependencies,f.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return _e($e,$e.current&1|2),t.child}e=e.sibling}f.tail!==null&&Le()>wr&&(t.flags|=128,a=!0,ms(f,!1),t.lanes=4194304)}else{if(!a)if(e=fi(g),e!==null){if(t.flags|=128,a=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),ms(f,!0),f.tail===null&&f.tailMode==="hidden"&&!g.alternate&&!Ce)return Je(t),null}else 2*Le()-f.renderingStartTime>wr&&r!==1073741824&&(t.flags|=128,a=!0,ms(f,!1),t.lanes=4194304);f.isBackwards?(g.sibling=t.child,t.child=g):(r=f.last,r!==null?r.sibling=g:t.child=g,f.last=g)}return f.tail!==null?(t=f.tail,f.rendering=t,f.tail=t.sibling,f.renderingStartTime=Le(),t.sibling=null,r=$e.current,_e($e,a?r&1|2:r&1),t):(Je(t),null);case 22:case 23:return Jo(),a=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==a&&(t.flags|=8192),a&&(t.mode&1)!==0?(vt&1073741824)!==0&&(Je(t),t.subtreeFlags&6&&(t.flags|=8192)):Je(t),null;case 24:return null;case 25:return null}throw Error(i(156,t.tag))}function q0(e,t){switch(oo(t),t.tag){case 1:return lt(t.type)&&ti(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return gr(),Se(ot),Se(Xe),bo(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 5:return xo(t),null;case 13:if(Se($e),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(i(340));fr()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Se($e),null;case 4:return gr(),null;case 10:return mo(t.type._context),null;case 22:case 23:return Jo(),null;case 24:return null;default:return null}}var bi=!1,et=!1,B0=typeof WeakSet=="function"?WeakSet:Set,Y=null;function yr(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(a){Ae(e,t,a)}else r.current=null}function zo(e,t,r){try{r()}catch(a){Ae(e,t,a)}}var yd=!1;function W0(e,t){if(Za=zs,e=Yc(),Wa(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var a=r.getSelection&&r.getSelection();if(a&&a.rangeCount!==0){r=a.anchorNode;var c=a.anchorOffset,f=a.focusNode;a=a.focusOffset;try{r.nodeType,f.nodeType}catch{r=null;break e}var g=0,x=-1,k=-1,P=0,q=0,B=e,F=null;t:for(;;){for(var V;B!==r||c!==0&&B.nodeType!==3||(x=g+c),B!==f||a!==0&&B.nodeType!==3||(k=g+a),B.nodeType===3&&(g+=B.nodeValue.length),(V=B.firstChild)!==null;)F=B,B=V;for(;;){if(B===e)break t;if(F===r&&++P===c&&(x=g),F===f&&++q===a&&(k=g),(V=B.nextSibling)!==null)break;B=F,F=B.parentNode}B=V}r=x===-1||k===-1?null:{start:x,end:k}}else r=null}r=r||{start:0,end:0}}else r=null;for(Ja={focusedElem:e,selectionRange:r},zs=!1,Y=t;Y!==null;)if(t=Y,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Y=e;else for(;Y!==null;){t=Y;try{var X=t.alternate;if((t.flags&1024)!==0)switch(t.tag){case 0:case 11:case 15:break;case 1:if(X!==null){var Z=X.memoizedProps,Re=X.memoizedState,N=t.stateNode,j=N.getSnapshotBeforeUpdate(t.elementType===t.type?Z:Mt(t.type,Z),Re);N.__reactInternalSnapshotBeforeUpdate=j}break;case 3:var C=t.stateNode.containerInfo;C.nodeType===1?C.textContent="":C.nodeType===9&&C.documentElement&&C.removeChild(C.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(i(163))}}catch(W){Ae(t,t.return,W)}if(e=t.sibling,e!==null){e.return=t.return,Y=e;break}Y=t.return}return X=yd,yd=!1,X}function hs(e,t,r){var a=t.updateQueue;if(a=a!==null?a.lastEffect:null,a!==null){var c=a=a.next;do{if((c.tag&e)===e){var f=c.destroy;c.destroy=void 0,f!==void 0&&zo(t,r,f)}c=c.next}while(c!==a)}}function ki(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var a=r.create;r.destroy=a()}r=r.next}while(r!==t)}}function qo(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function xd(e){var t=e.alternate;t!==null&&(e.alternate=null,xd(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Ft],delete t[ss],delete t[ro],delete t[S0],delete t[E0])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function wd(e){return e.tag===5||e.tag===3||e.tag===4}function bd(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||wd(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Bo(e,t,r){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Js));else if(a!==4&&(e=e.child,e!==null))for(Bo(e,t,r),e=e.sibling;e!==null;)Bo(e,t,r),e=e.sibling}function Wo(e,t,r){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(a!==4&&(e=e.child,e!==null))for(Wo(e,t,r),e=e.sibling;e!==null;)Wo(e,t,r),e=e.sibling}var Ve=null,Lt=!1;function yn(e,t,r){for(r=r.child;r!==null;)kd(e,t,r),r=r.sibling}function kd(e,t,r){if(Dt&&typeof Dt.onCommitFiberUnmount=="function")try{Dt.onCommitFiberUnmount(Ls,r)}catch{}switch(r.tag){case 5:et||yr(r,t);case 6:var a=Ve,c=Lt;Ve=null,yn(e,t,r),Ve=a,Lt=c,Ve!==null&&(Lt?(e=Ve,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):Ve.removeChild(r.stateNode));break;case 18:Ve!==null&&(Lt?(e=Ve,r=r.stateNode,e.nodeType===8?no(e.parentNode,r):e.nodeType===1&&no(e,r),Vr(e)):no(Ve,r.stateNode));break;case 4:a=Ve,c=Lt,Ve=r.stateNode.containerInfo,Lt=!0,yn(e,t,r),Ve=a,Lt=c;break;case 0:case 11:case 14:case 15:if(!et&&(a=r.updateQueue,a!==null&&(a=a.lastEffect,a!==null))){c=a=a.next;do{var f=c,g=f.destroy;f=f.tag,g!==void 0&&((f&2)!==0||(f&4)!==0)&&zo(r,t,g),c=c.next}while(c!==a)}yn(e,t,r);break;case 1:if(!et&&(yr(r,t),a=r.stateNode,typeof a.componentWillUnmount=="function"))try{a.props=r.memoizedProps,a.state=r.memoizedState,a.componentWillUnmount()}catch(x){Ae(r,t,x)}yn(e,t,r);break;case 21:yn(e,t,r);break;case 22:r.mode&1?(et=(a=et)||r.memoizedState!==null,yn(e,t,r),et=a):yn(e,t,r);break;default:yn(e,t,r)}}function _d(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new B0),t.forEach(function(a){var c=J0.bind(null,e,a);r.has(a)||(r.add(a),a.then(c,c))})}}function Rt(e,t){var r=t.deletions;if(r!==null)for(var a=0;a<r.length;a++){var c=r[a];try{var f=e,g=t,x=g;e:for(;x!==null;){switch(x.tag){case 5:Ve=x.stateNode,Lt=!1;break e;case 3:Ve=x.stateNode.containerInfo,Lt=!0;break e;case 4:Ve=x.stateNode.containerInfo,Lt=!0;break e}x=x.return}if(Ve===null)throw Error(i(160));kd(f,g,c),Ve=null,Lt=!1;var k=c.alternate;k!==null&&(k.return=null),c.return=null}catch(P){Ae(c,t,P)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)jd(t,e),t=t.sibling}function jd(e,t){var r=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Rt(t,e),Bt(e),a&4){try{hs(3,e,e.return),ki(3,e)}catch(Z){Ae(e,e.return,Z)}try{hs(5,e,e.return)}catch(Z){Ae(e,e.return,Z)}}break;case 1:Rt(t,e),Bt(e),a&512&&r!==null&&yr(r,r.return);break;case 5:if(Rt(t,e),Bt(e),a&512&&r!==null&&yr(r,r.return),e.flags&32){var c=e.stateNode;try{Rr(c,"")}catch(Z){Ae(e,e.return,Z)}}if(a&4&&(c=e.stateNode,c!=null)){var f=e.memoizedProps,g=r!==null?r.memoizedProps:f,x=e.type,k=e.updateQueue;if(e.updateQueue=null,k!==null)try{x==="input"&&f.type==="radio"&&f.name!=null&&$s(c,f),wa(x,g);var P=wa(x,f);for(g=0;g<k.length;g+=2){var q=k[g],B=k[g+1];q==="style"?ac(c,B):q==="dangerouslySetInnerHTML"?sc(c,B):q==="children"?Rr(c,B):w(c,q,B,P)}switch(x){case"input":ha(c,f);break;case"textarea":tc(c,f);break;case"select":var F=c._wrapperState.wasMultiple;c._wrapperState.wasMultiple=!!f.multiple;var V=f.value;V!=null?Xn(c,!!f.multiple,V,!1):F!==!!f.multiple&&(f.defaultValue!=null?Xn(c,!!f.multiple,f.defaultValue,!0):Xn(c,!!f.multiple,f.multiple?[]:"",!1))}c[ss]=f}catch(Z){Ae(e,e.return,Z)}}break;case 6:if(Rt(t,e),Bt(e),a&4){if(e.stateNode===null)throw Error(i(162));c=e.stateNode,f=e.memoizedProps;try{c.nodeValue=f}catch(Z){Ae(e,e.return,Z)}}break;case 3:if(Rt(t,e),Bt(e),a&4&&r!==null&&r.memoizedState.isDehydrated)try{Vr(t.containerInfo)}catch(Z){Ae(e,e.return,Z)}break;case 4:Rt(t,e),Bt(e);break;case 13:Rt(t,e),Bt(e),c=e.child,c.flags&8192&&(f=c.memoizedState!==null,c.stateNode.isHidden=f,!f||c.alternate!==null&&c.alternate.memoizedState!==null||(Vo=Le())),a&4&&_d(e);break;case 22:if(q=r!==null&&r.memoizedState!==null,e.mode&1?(et=(P=et)||q,Rt(t,e),et=P):Rt(t,e),Bt(e),a&8192){if(P=e.memoizedState!==null,(e.stateNode.isHidden=P)&&!q&&(e.mode&1)!==0)for(Y=e,q=e.child;q!==null;){for(B=Y=q;Y!==null;){switch(F=Y,V=F.child,F.tag){case 0:case 11:case 14:case 15:hs(4,F,F.return);break;case 1:yr(F,F.return);var X=F.stateNode;if(typeof X.componentWillUnmount=="function"){a=F,r=F.return;try{t=a,X.props=t.memoizedProps,X.state=t.memoizedState,X.componentWillUnmount()}catch(Z){Ae(a,r,Z)}}break;case 5:yr(F,F.return);break;case 22:if(F.memoizedState!==null){Ed(B);continue}}V!==null?(V.return=F,Y=V):Ed(B)}q=q.sibling}e:for(q=null,B=e;;){if(B.tag===5){if(q===null){q=B;try{c=B.stateNode,P?(f=c.style,typeof f.setProperty=="function"?f.setProperty("display","none","important"):f.display="none"):(x=B.stateNode,k=B.memoizedProps.style,g=k!=null&&k.hasOwnProperty("display")?k.display:null,x.style.display=ic("display",g))}catch(Z){Ae(e,e.return,Z)}}}else if(B.tag===6){if(q===null)try{B.stateNode.nodeValue=P?"":B.memoizedProps}catch(Z){Ae(e,e.return,Z)}}else if((B.tag!==22&&B.tag!==23||B.memoizedState===null||B===e)&&B.child!==null){B.child.return=B,B=B.child;continue}if(B===e)break e;for(;B.sibling===null;){if(B.return===null||B.return===e)break e;q===B&&(q=null),B=B.return}q===B&&(q=null),B.sibling.return=B.return,B=B.sibling}}break;case 19:Rt(t,e),Bt(e),a&4&&_d(e);break;case 21:break;default:Rt(t,e),Bt(e)}}function Bt(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(wd(r)){var a=r;break e}r=r.return}throw Error(i(160))}switch(a.tag){case 5:var c=a.stateNode;a.flags&32&&(Rr(c,""),a.flags&=-33);var f=bd(e);Wo(e,f,c);break;case 3:case 4:var g=a.stateNode.containerInfo,x=bd(e);Bo(e,x,g);break;default:throw Error(i(161))}}catch(k){Ae(e,e.return,k)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function H0(e,t,r){Y=e,Nd(e)}function Nd(e,t,r){for(var a=(e.mode&1)!==0;Y!==null;){var c=Y,f=c.child;if(c.tag===22&&a){var g=c.memoizedState!==null||bi;if(!g){var x=c.alternate,k=x!==null&&x.memoizedState!==null||et;x=bi;var P=et;if(bi=g,(et=k)&&!P)for(Y=c;Y!==null;)g=Y,k=g.child,g.tag===22&&g.memoizedState!==null?Cd(c):k!==null?(k.return=g,Y=k):Cd(c);for(;f!==null;)Y=f,Nd(f),f=f.sibling;Y=c,bi=x,et=P}Sd(e)}else(c.subtreeFlags&8772)!==0&&f!==null?(f.return=c,Y=f):Sd(e)}}function Sd(e){for(;Y!==null;){var t=Y;if((t.flags&8772)!==0){var r=t.alternate;try{if((t.flags&8772)!==0)switch(t.tag){case 0:case 11:case 15:et||ki(5,t);break;case 1:var a=t.stateNode;if(t.flags&4&&!et)if(r===null)a.componentDidMount();else{var c=t.elementType===t.type?r.memoizedProps:Mt(t.type,r.memoizedProps);a.componentDidUpdate(c,r.memoizedState,a.__reactInternalSnapshotBeforeUpdate)}var f=t.updateQueue;f!==null&&Eu(t,f,a);break;case 3:var g=t.updateQueue;if(g!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}Eu(t,g,r)}break;case 5:var x=t.stateNode;if(r===null&&t.flags&4){r=x;var k=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":k.autoFocus&&r.focus();break;case"img":k.src&&(r.src=k.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var P=t.alternate;if(P!==null){var q=P.memoizedState;if(q!==null){var B=q.dehydrated;B!==null&&Vr(B)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(i(163))}et||t.flags&512&&qo(t)}catch(F){Ae(t,t.return,F)}}if(t===e){Y=null;break}if(r=t.sibling,r!==null){r.return=t.return,Y=r;break}Y=t.return}}function Ed(e){for(;Y!==null;){var t=Y;if(t===e){Y=null;break}var r=t.sibling;if(r!==null){r.return=t.return,Y=r;break}Y=t.return}}function Cd(e){for(;Y!==null;){var t=Y;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{ki(4,t)}catch(k){Ae(t,r,k)}break;case 1:var a=t.stateNode;if(typeof a.componentDidMount=="function"){var c=t.return;try{a.componentDidMount()}catch(k){Ae(t,c,k)}}var f=t.return;try{qo(t)}catch(k){Ae(t,f,k)}break;case 5:var g=t.return;try{qo(t)}catch(k){Ae(t,g,k)}}}catch(k){Ae(t,t.return,k)}if(t===e){Y=null;break}var x=t.sibling;if(x!==null){x.return=t.return,Y=x;break}Y=t.return}}var G0=Math.ceil,_i=T.ReactCurrentDispatcher,Ho=T.ReactCurrentOwner,Ct=T.ReactCurrentBatchConfig,me=0,Be=null,Ue=null,Ke=0,vt=0,xr=pn(0),Fe=0,gs=null,On=0,ji=0,Go=0,vs=null,ut=null,Vo=0,wr=1/0,Jt=null,Ni=!1,Ko=null,xn=null,Si=!1,wn=null,Ei=0,ys=0,Qo=null,Ci=-1,Ti=0;function it(){return(me&6)!==0?Le():Ci!==-1?Ci:Ci=Le()}function bn(e){return(e.mode&1)===0?1:(me&2)!==0&&Ke!==0?Ke&-Ke:T0.transition!==null?(Ti===0&&(Ti=bc()),Ti):(e=xe,e!==0||(e=window.event,e=e===void 0?16:$c(e.type)),e)}function Ot(e,t,r,a){if(50<ys)throw ys=0,Qo=null,Error(i(185));qr(e,r,a),((me&2)===0||e!==Be)&&(e===Be&&((me&2)===0&&(ji|=r),Fe===4&&kn(e,Ke)),dt(e,a),r===1&&me===0&&(t.mode&1)===0&&(wr=Le()+500,ri&&hn()))}function dt(e,t){var r=e.callbackNode;Tw(e,t);var a=Us(e,e===Be?Ke:0);if(a===0)r!==null&&yc(r),e.callbackNode=null,e.callbackPriority=0;else if(t=a&-a,e.callbackPriority!==t){if(r!=null&&yc(r),t===1)e.tag===0?C0($d.bind(null,e)):hu($d.bind(null,e)),j0(function(){(me&6)===0&&hn()}),r=null;else{switch(kc(a)){case 1:r=Ea;break;case 4:r=xc;break;case 16:r=Ms;break;case 536870912:r=wc;break;default:r=Ms}r=Ud(r,Td.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function Td(e,t){if(Ci=-1,Ti=0,(me&6)!==0)throw Error(i(327));var r=e.callbackNode;if(br()&&e.callbackNode!==r)return null;var a=Us(e,e===Be?Ke:0);if(a===0)return null;if((a&30)!==0||(a&e.expiredLanes)!==0||t)t=$i(e,a);else{t=a;var c=me;me|=2;var f=Id();(Be!==e||Ke!==t)&&(Jt=null,wr=Le()+500,Dn(e,t));do try{Q0();break}catch(x){Pd(e,x)}while(!0);po(),_i.current=f,me=c,Ue!==null?t=0:(Be=null,Ke=0,t=Fe)}if(t!==0){if(t===2&&(c=Ca(e),c!==0&&(a=c,t=Yo(e,c))),t===1)throw r=gs,Dn(e,0),kn(e,a),dt(e,Le()),r;if(t===6)kn(e,a);else{if(c=e.current.alternate,(a&30)===0&&!V0(c)&&(t=$i(e,a),t===2&&(f=Ca(e),f!==0&&(a=f,t=Yo(e,f))),t===1))throw r=gs,Dn(e,0),kn(e,a),dt(e,Le()),r;switch(e.finishedWork=c,e.finishedLanes=a,t){case 0:case 1:throw Error(i(345));case 2:Fn(e,ut,Jt);break;case 3:if(kn(e,a),(a&130023424)===a&&(t=Vo+500-Le(),10<t)){if(Us(e,0)!==0)break;if(c=e.suspendedLanes,(c&a)!==a){it(),e.pingedLanes|=e.suspendedLanes&c;break}e.timeoutHandle=to(Fn.bind(null,e,ut,Jt),t);break}Fn(e,ut,Jt);break;case 4:if(kn(e,a),(a&4194240)===a)break;for(t=e.eventTimes,c=-1;0<a;){var g=31-Pt(a);f=1<<g,g=t[g],g>c&&(c=g),a&=~f}if(a=c,a=Le()-a,a=(120>a?120:480>a?480:1080>a?1080:1920>a?1920:3e3>a?3e3:4320>a?4320:1960*G0(a/1960))-a,10<a){e.timeoutHandle=to(Fn.bind(null,e,ut,Jt),a);break}Fn(e,ut,Jt);break;case 5:Fn(e,ut,Jt);break;default:throw Error(i(329))}}}return dt(e,Le()),e.callbackNode===r?Td.bind(null,e):null}function Yo(e,t){var r=vs;return e.current.memoizedState.isDehydrated&&(Dn(e,t).flags|=256),e=$i(e,t),e!==2&&(t=ut,ut=r,t!==null&&Xo(t)),e}function Xo(e){ut===null?ut=e:ut.push.apply(ut,e)}function V0(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var a=0;a<r.length;a++){var c=r[a],f=c.getSnapshot;c=c.value;try{if(!It(f(),c))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function kn(e,t){for(t&=~Go,t&=~ji,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Pt(t),a=1<<r;e[r]=-1,t&=~a}}function $d(e){if((me&6)!==0)throw Error(i(327));br();var t=Us(e,0);if((t&1)===0)return dt(e,Le()),null;var r=$i(e,t);if(e.tag!==0&&r===2){var a=Ca(e);a!==0&&(t=a,r=Yo(e,a))}if(r===1)throw r=gs,Dn(e,0),kn(e,t),dt(e,Le()),r;if(r===6)throw Error(i(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Fn(e,ut,Jt),dt(e,Le()),null}function Zo(e,t){var r=me;me|=1;try{return e(t)}finally{me=r,me===0&&(wr=Le()+500,ri&&hn())}}function Un(e){wn!==null&&wn.tag===0&&(me&6)===0&&br();var t=me;me|=1;var r=Ct.transition,a=xe;try{if(Ct.transition=null,xe=1,e)return e()}finally{xe=a,Ct.transition=r,me=t,(me&6)===0&&hn()}}function Jo(){vt=xr.current,Se(xr)}function Dn(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,_0(r)),Ue!==null)for(r=Ue.return;r!==null;){var a=r;switch(oo(a),a.tag){case 1:a=a.type.childContextTypes,a!=null&&ti();break;case 3:gr(),Se(ot),Se(Xe),bo();break;case 5:xo(a);break;case 4:gr();break;case 13:Se($e);break;case 19:Se($e);break;case 10:mo(a.type._context);break;case 22:case 23:Jo()}r=r.return}if(Be=e,Ue=e=_n(e.current,null),Ke=vt=t,Fe=0,gs=null,Go=ji=On=0,ut=vs=null,Mn!==null){for(t=0;t<Mn.length;t++)if(r=Mn[t],a=r.interleaved,a!==null){r.interleaved=null;var c=a.next,f=r.pending;if(f!==null){var g=f.next;f.next=c,a.next=g}r.pending=a}Mn=null}return e}function Pd(e,t){do{var r=Ue;try{if(po(),pi.current=vi,mi){for(var a=Pe.memoizedState;a!==null;){var c=a.queue;c!==null&&(c.pending=null),a=a.next}mi=!1}if(Rn=0,qe=De=Pe=null,us=!1,ds=0,Ho.current=null,r===null||r.return===null){Fe=1,gs=t,Ue=null;break}e:{var f=e,g=r.return,x=r,k=t;if(t=Ke,x.flags|=32768,k!==null&&typeof k=="object"&&typeof k.then=="function"){var P=k,q=x,B=q.tag;if((q.mode&1)===0&&(B===0||B===11||B===15)){var F=q.alternate;F?(q.updateQueue=F.updateQueue,q.memoizedState=F.memoizedState,q.lanes=F.lanes):(q.updateQueue=null,q.memoizedState=null)}var V=nd(g);if(V!==null){V.flags&=-257,rd(V,g,x,f,t),V.mode&1&&td(f,P,t),t=V,k=P;var X=t.updateQueue;if(X===null){var Z=new Set;Z.add(k),t.updateQueue=Z}else X.add(k);break e}else{if((t&1)===0){td(f,P,t),el();break e}k=Error(i(426))}}else if(Ce&&x.mode&1){var Re=nd(g);if(Re!==null){(Re.flags&65536)===0&&(Re.flags|=256),rd(Re,g,x,f,t),uo(vr(k,x));break e}}f=k=vr(k,x),Fe!==4&&(Fe=2),vs===null?vs=[f]:vs.push(f),f=g;do{switch(f.tag){case 3:f.flags|=65536,t&=-t,f.lanes|=t;var N=Ju(f,k,t);Su(f,N);break e;case 1:x=k;var j=f.type,C=f.stateNode;if((f.flags&128)===0&&(typeof j.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(xn===null||!xn.has(C)))){f.flags|=65536,t&=-t,f.lanes|=t;var W=ed(f,x,t);Su(f,W);break e}}f=f.return}while(f!==null)}Md(r)}catch(J){t=J,Ue===r&&r!==null&&(Ue=r=r.return);continue}break}while(!0)}function Id(){var e=_i.current;return _i.current=vi,e===null?vi:e}function el(){(Fe===0||Fe===3||Fe===2)&&(Fe=4),Be===null||(On&268435455)===0&&(ji&268435455)===0||kn(Be,Ke)}function $i(e,t){var r=me;me|=2;var a=Id();(Be!==e||Ke!==t)&&(Jt=null,Dn(e,t));do try{K0();break}catch(c){Pd(e,c)}while(!0);if(po(),me=r,_i.current=a,Ue!==null)throw Error(i(261));return Be=null,Ke=0,Fe}function K0(){for(;Ue!==null;)Ad(Ue)}function Q0(){for(;Ue!==null&&!ww();)Ad(Ue)}function Ad(e){var t=Od(e.alternate,e,vt);e.memoizedProps=e.pendingProps,t===null?Md(e):Ue=t,Ho.current=null}function Md(e){var t=e;do{var r=t.alternate;if(e=t.return,(t.flags&32768)===0){if(r=z0(r,t,vt),r!==null){Ue=r;return}}else{if(r=q0(r,t),r!==null){r.flags&=32767,Ue=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Fe=6,Ue=null;return}}if(t=t.sibling,t!==null){Ue=t;return}Ue=t=e}while(t!==null);Fe===0&&(Fe=5)}function Fn(e,t,r){var a=xe,c=Ct.transition;try{Ct.transition=null,xe=1,Y0(e,t,r,a)}finally{Ct.transition=c,xe=a}return null}function Y0(e,t,r,a){do br();while(wn!==null);if((me&6)!==0)throw Error(i(327));r=e.finishedWork;var c=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(i(177));e.callbackNode=null,e.callbackPriority=0;var f=r.lanes|r.childLanes;if($w(e,f),e===Be&&(Ue=Be=null,Ke=0),(r.subtreeFlags&2064)===0&&(r.flags&2064)===0||Si||(Si=!0,Ud(Ms,function(){return br(),null})),f=(r.flags&15990)!==0,(r.subtreeFlags&15990)!==0||f){f=Ct.transition,Ct.transition=null;var g=xe;xe=1;var x=me;me|=4,Ho.current=null,W0(e,r),jd(r,e),g0(Ja),zs=!!Za,Ja=Za=null,e.current=r,H0(r),bw(),me=x,xe=g,Ct.transition=f}else e.current=r;if(Si&&(Si=!1,wn=e,Ei=c),f=e.pendingLanes,f===0&&(xn=null),jw(r.stateNode),dt(e,Le()),t!==null)for(a=e.onRecoverableError,r=0;r<t.length;r++)c=t[r],a(c.value,{componentStack:c.stack,digest:c.digest});if(Ni)throw Ni=!1,e=Ko,Ko=null,e;return(Ei&1)!==0&&e.tag!==0&&br(),f=e.pendingLanes,(f&1)!==0?e===Qo?ys++:(ys=0,Qo=e):ys=0,hn(),null}function br(){if(wn!==null){var e=kc(Ei),t=Ct.transition,r=xe;try{if(Ct.transition=null,xe=16>e?16:e,wn===null)var a=!1;else{if(e=wn,wn=null,Ei=0,(me&6)!==0)throw Error(i(331));var c=me;for(me|=4,Y=e.current;Y!==null;){var f=Y,g=f.child;if((Y.flags&16)!==0){var x=f.deletions;if(x!==null){for(var k=0;k<x.length;k++){var P=x[k];for(Y=P;Y!==null;){var q=Y;switch(q.tag){case 0:case 11:case 15:hs(8,q,f)}var B=q.child;if(B!==null)B.return=q,Y=B;else for(;Y!==null;){q=Y;var F=q.sibling,V=q.return;if(xd(q),q===P){Y=null;break}if(F!==null){F.return=V,Y=F;break}Y=V}}}var X=f.alternate;if(X!==null){var Z=X.child;if(Z!==null){X.child=null;do{var Re=Z.sibling;Z.sibling=null,Z=Re}while(Z!==null)}}Y=f}}if((f.subtreeFlags&2064)!==0&&g!==null)g.return=f,Y=g;else e:for(;Y!==null;){if(f=Y,(f.flags&2048)!==0)switch(f.tag){case 0:case 11:case 15:hs(9,f,f.return)}var N=f.sibling;if(N!==null){N.return=f.return,Y=N;break e}Y=f.return}}var j=e.current;for(Y=j;Y!==null;){g=Y;var C=g.child;if((g.subtreeFlags&2064)!==0&&C!==null)C.return=g,Y=C;else e:for(g=j;Y!==null;){if(x=Y,(x.flags&2048)!==0)try{switch(x.tag){case 0:case 11:case 15:ki(9,x)}}catch(J){Ae(x,x.return,J)}if(x===g){Y=null;break e}var W=x.sibling;if(W!==null){W.return=x.return,Y=W;break e}Y=x.return}}if(me=c,hn(),Dt&&typeof Dt.onPostCommitFiberRoot=="function")try{Dt.onPostCommitFiberRoot(Ls,e)}catch{}a=!0}return a}finally{xe=r,Ct.transition=t}}return!1}function Ld(e,t,r){t=vr(r,t),t=Ju(e,t,1),e=vn(e,t,1),t=it(),e!==null&&(qr(e,1,t),dt(e,t))}function Ae(e,t,r){if(e.tag===3)Ld(e,e,r);else for(;t!==null;){if(t.tag===3){Ld(t,e,r);break}else if(t.tag===1){var a=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(xn===null||!xn.has(a))){e=vr(r,e),e=ed(t,e,1),t=vn(t,e,1),e=it(),t!==null&&(qr(t,1,e),dt(t,e));break}}t=t.return}}function X0(e,t,r){var a=e.pingCache;a!==null&&a.delete(t),t=it(),e.pingedLanes|=e.suspendedLanes&r,Be===e&&(Ke&r)===r&&(Fe===4||Fe===3&&(Ke&130023424)===Ke&&500>Le()-Vo?Dn(e,0):Go|=r),dt(e,t)}function Rd(e,t){t===0&&((e.mode&1)===0?t=1:(t=Os,Os<<=1,(Os&130023424)===0&&(Os=4194304)));var r=it();e=Yt(e,t),e!==null&&(qr(e,t,r),dt(e,r))}function Z0(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),Rd(e,r)}function J0(e,t){var r=0;switch(e.tag){case 13:var a=e.stateNode,c=e.memoizedState;c!==null&&(r=c.retryLane);break;case 19:a=e.stateNode;break;default:throw Error(i(314))}a!==null&&a.delete(t),Rd(e,r)}var Od;Od=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||ot.current)ct=!0;else{if((e.lanes&r)===0&&(t.flags&128)===0)return ct=!1,F0(e,t,r);ct=(e.flags&131072)!==0}else ct=!1,Ce&&(t.flags&1048576)!==0&&gu(t,ii,t.index);switch(t.lanes=0,t.tag){case 2:var a=t.type;wi(e,t),e=t.pendingProps;var c=cr(t,Xe.current);hr(t,r),c=jo(null,t,a,e,c,r);var f=No();return t.flags|=1,typeof c=="object"&&c!==null&&typeof c.render=="function"&&c.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,lt(a)?(f=!0,ni(t)):f=!1,t.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,vo(t),c.updater=yi,t.stateNode=c,c._reactInternals=t,Po(t,a,e,r),t=Lo(null,t,a,!0,f,r)):(t.tag=0,Ce&&f&&ao(t),st(null,t,c,r),t=t.child),t;case 16:a=t.elementType;e:{switch(wi(e,t),e=t.pendingProps,c=a._init,a=c(a._payload),t.type=a,c=t.tag=tb(a),e=Mt(a,e),c){case 0:t=Mo(null,t,a,e,r);break e;case 1:t=cd(null,t,a,e,r);break e;case 11:t=sd(null,t,a,e,r);break e;case 14:t=id(null,t,a,Mt(a.type,e),r);break e}throw Error(i(306,a,""))}return t;case 0:return a=t.type,c=t.pendingProps,c=t.elementType===a?c:Mt(a,c),Mo(e,t,a,c,r);case 1:return a=t.type,c=t.pendingProps,c=t.elementType===a?c:Mt(a,c),cd(e,t,a,c,r);case 3:e:{if(ud(t),e===null)throw Error(i(387));a=t.pendingProps,f=t.memoizedState,c=f.element,Nu(e,t),di(t,a,null,r);var g=t.memoizedState;if(a=g.element,f.isDehydrated)if(f={element:a,isDehydrated:!1,cache:g.cache,pendingSuspenseBoundaries:g.pendingSuspenseBoundaries,transitions:g.transitions},t.updateQueue.baseState=f,t.memoizedState=f,t.flags&256){c=vr(Error(i(423)),t),t=dd(e,t,a,r,c);break e}else if(a!==c){c=vr(Error(i(424)),t),t=dd(e,t,a,r,c);break e}else for(gt=fn(t.stateNode.containerInfo.firstChild),ht=t,Ce=!0,At=null,r=_u(t,null,a,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(fr(),a===c){t=Zt(e,t,r);break e}st(e,t,a,r)}t=t.child}return t;case 5:return Cu(t),e===null&&co(t),a=t.type,c=t.pendingProps,f=e!==null?e.memoizedProps:null,g=c.children,eo(a,c)?g=null:f!==null&&eo(a,f)&&(t.flags|=32),ld(e,t),st(e,t,g,r),t.child;case 6:return e===null&&co(t),null;case 13:return fd(e,t,r);case 4:return yo(t,t.stateNode.containerInfo),a=t.pendingProps,e===null?t.child=pr(t,null,a,r):st(e,t,a,r),t.child;case 11:return a=t.type,c=t.pendingProps,c=t.elementType===a?c:Mt(a,c),sd(e,t,a,c,r);case 7:return st(e,t,t.pendingProps,r),t.child;case 8:return st(e,t,t.pendingProps.children,r),t.child;case 12:return st(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(a=t.type._context,c=t.pendingProps,f=t.memoizedProps,g=c.value,_e(li,a._currentValue),a._currentValue=g,f!==null)if(It(f.value,g)){if(f.children===c.children&&!ot.current){t=Zt(e,t,r);break e}}else for(f=t.child,f!==null&&(f.return=t);f!==null;){var x=f.dependencies;if(x!==null){g=f.child;for(var k=x.firstContext;k!==null;){if(k.context===a){if(f.tag===1){k=Xt(-1,r&-r),k.tag=2;var P=f.updateQueue;if(P!==null){P=P.shared;var q=P.pending;q===null?k.next=k:(k.next=q.next,q.next=k),P.pending=k}}f.lanes|=r,k=f.alternate,k!==null&&(k.lanes|=r),ho(f.return,r,t),x.lanes|=r;break}k=k.next}}else if(f.tag===10)g=f.type===t.type?null:f.child;else if(f.tag===18){if(g=f.return,g===null)throw Error(i(341));g.lanes|=r,x=g.alternate,x!==null&&(x.lanes|=r),ho(g,r,t),g=f.sibling}else g=f.child;if(g!==null)g.return=f;else for(g=f;g!==null;){if(g===t){g=null;break}if(f=g.sibling,f!==null){f.return=g.return,g=f;break}g=g.return}f=g}st(e,t,c.children,r),t=t.child}return t;case 9:return c=t.type,a=t.pendingProps.children,hr(t,r),c=St(c),a=a(c),t.flags|=1,st(e,t,a,r),t.child;case 14:return a=t.type,c=Mt(a,t.pendingProps),c=Mt(a.type,c),id(e,t,a,c,r);case 15:return ad(e,t,t.type,t.pendingProps,r);case 17:return a=t.type,c=t.pendingProps,c=t.elementType===a?c:Mt(a,c),wi(e,t),t.tag=1,lt(a)?(e=!0,ni(t)):e=!1,hr(t,r),Xu(t,a,c),Po(t,a,c,r),Lo(null,t,a,!0,e,r);case 19:return md(e,t,r);case 22:return od(e,t,r)}throw Error(i(156,t.tag))};function Ud(e,t){return vc(e,t)}function eb(e,t,r,a){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Tt(e,t,r,a){return new eb(e,t,r,a)}function tl(e){return e=e.prototype,!(!e||!e.isReactComponent)}function tb(e){if(typeof e=="function")return tl(e)?1:0;if(e!=null){if(e=e.$$typeof,e===we)return 11;if(e===ze)return 14}return 2}function _n(e,t){var r=e.alternate;return r===null?(r=Tt(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Pi(e,t,r,a,c,f){var g=2;if(a=e,typeof e=="function")tl(e)&&(g=1);else if(typeof e=="string")g=5;else e:switch(e){case Q:return zn(r.children,c,f,t);case K:g=8,c|=8;break;case ee:return e=Tt(12,r,t,c|2),e.elementType=ee,e.lanes=f,e;case he:return e=Tt(13,r,t,c),e.elementType=he,e.lanes=f,e;case Te:return e=Tt(19,r,t,c),e.elementType=Te,e.lanes=f,e;case ke:return Ii(r,c,f,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case je:g=10;break e;case ve:g=9;break e;case we:g=11;break e;case ze:g=14;break e;case Ie:g=16,a=null;break e}throw Error(i(130,e==null?e:typeof e,""))}return t=Tt(g,r,t,c),t.elementType=e,t.type=a,t.lanes=f,t}function zn(e,t,r,a){return e=Tt(7,e,a,t),e.lanes=r,e}function Ii(e,t,r,a){return e=Tt(22,e,a,t),e.elementType=ke,e.lanes=r,e.stateNode={isHidden:!1},e}function nl(e,t,r){return e=Tt(6,e,null,t),e.lanes=r,e}function rl(e,t,r){return t=Tt(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function nb(e,t,r,a,c){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ta(0),this.expirationTimes=Ta(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ta(0),this.identifierPrefix=a,this.onRecoverableError=c,this.mutableSourceEagerHydrationData=null}function sl(e,t,r,a,c,f,g,x,k){return e=new nb(e,t,r,x,k),t===1?(t=1,f===!0&&(t|=8)):t=0,f=Tt(3,null,null,t),e.current=f,f.stateNode=e,f.memoizedState={element:a,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},vo(f),e}function rb(e,t,r){var a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:z,key:a==null?null:""+a,children:e,containerInfo:t,implementation:r}}function Dd(e){if(!e)return mn;e=e._reactInternals;e:{if(Tn(e)!==e||e.tag!==1)throw Error(i(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(lt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(i(171))}if(e.tag===1){var r=e.type;if(lt(r))return pu(e,r,t)}return t}function Fd(e,t,r,a,c,f,g,x,k){return e=sl(r,a,!0,e,c,f,g,x,k),e.context=Dd(null),r=e.current,a=it(),c=bn(r),f=Xt(a,c),f.callback=t??null,vn(r,f,c),e.current.lanes=c,qr(e,c,a),dt(e,a),e}function Ai(e,t,r,a){var c=t.current,f=it(),g=bn(c);return r=Dd(r),t.context===null?t.context=r:t.pendingContext=r,t=Xt(f,g),t.payload={element:e},a=a===void 0?null:a,a!==null&&(t.callback=a),e=vn(c,t,g),e!==null&&(Ot(e,c,g,f),ui(e,c,g)),g}function Mi(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function zd(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function il(e,t){zd(e,t),(e=e.alternate)&&zd(e,t)}function sb(){return null}var qd=typeof reportError=="function"?reportError:function(e){console.error(e)};function al(e){this._internalRoot=e}Li.prototype.render=al.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(i(409));Ai(e,t,null,null)},Li.prototype.unmount=al.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Un(function(){Ai(null,e,null,null)}),t[Gt]=null}};function Li(e){this._internalRoot=e}Li.prototype.unstable_scheduleHydration=function(e){if(e){var t=Nc();e={blockedOn:null,target:e,priority:t};for(var r=0;r<cn.length&&t!==0&&t<cn[r].priority;r++);cn.splice(r,0,e),r===0&&Cc(e)}};function ol(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Ri(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Bd(){}function ib(e,t,r,a,c){if(c){if(typeof a=="function"){var f=a;a=function(){var P=Mi(g);f.call(P)}}var g=Fd(t,a,e,0,null,!1,!1,"",Bd);return e._reactRootContainer=g,e[Gt]=g.current,ns(e.nodeType===8?e.parentNode:e),Un(),g}for(;c=e.lastChild;)e.removeChild(c);if(typeof a=="function"){var x=a;a=function(){var P=Mi(k);x.call(P)}}var k=sl(e,0,!1,null,null,!1,!1,"",Bd);return e._reactRootContainer=k,e[Gt]=k.current,ns(e.nodeType===8?e.parentNode:e),Un(function(){Ai(t,k,r,a)}),k}function Oi(e,t,r,a,c){var f=r._reactRootContainer;if(f){var g=f;if(typeof c=="function"){var x=c;c=function(){var k=Mi(g);x.call(k)}}Ai(t,g,e,c)}else g=ib(r,t,e,c,a);return Mi(g)}_c=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=zr(t.pendingLanes);r!==0&&($a(t,r|1),dt(t,Le()),(me&6)===0&&(wr=Le()+500,hn()))}break;case 13:Un(function(){var a=Yt(e,1);if(a!==null){var c=it();Ot(a,e,1,c)}}),il(e,1)}},Pa=function(e){if(e.tag===13){var t=Yt(e,134217728);if(t!==null){var r=it();Ot(t,e,134217728,r)}il(e,134217728)}},jc=function(e){if(e.tag===13){var t=bn(e),r=Yt(e,t);if(r!==null){var a=it();Ot(r,e,t,a)}il(e,t)}},Nc=function(){return xe},Sc=function(e,t){var r=xe;try{return xe=e,t()}finally{xe=r}},_a=function(e,t,r){switch(t){case"input":if(ha(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var a=r[t];if(a!==e&&a.form===e.form){var c=ei(a);if(!c)throw Error(i(90));Qn(a),ha(a,c)}}}break;case"textarea":tc(e,r);break;case"select":t=r.value,t!=null&&Xn(e,!!r.multiple,t,!1)}},uc=Zo,dc=Un;var ab={usingClientEntryPoint:!1,Events:[is,or,ei,lc,cc,Zo]},xs={findFiberByHostInstance:$n,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ob={bundleType:xs.bundleType,version:xs.version,rendererPackageName:xs.rendererPackageName,rendererConfig:xs.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:T.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=hc(e),e===null?null:e.stateNode},findFiberByHostInstance:xs.findFiberByHostInstance||sb,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ui=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ui.isDisabled&&Ui.supportsFiber)try{Ls=Ui.inject(ob),Dt=Ui}catch{}}return ft.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ab,ft.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ol(t))throw Error(i(200));return rb(e,t,null,r)},ft.createRoot=function(e,t){if(!ol(e))throw Error(i(299));var r=!1,a="",c=qd;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(a=t.identifierPrefix),t.onRecoverableError!==void 0&&(c=t.onRecoverableError)),t=sl(e,1,!1,null,null,r,!1,a,c),e[Gt]=t.current,ns(e.nodeType===8?e.parentNode:e),new al(t)},ft.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(i(188)):(e=Object.keys(e).join(","),Error(i(268,e)));return e=hc(t),e=e===null?null:e.stateNode,e},ft.flushSync=function(e){return Un(e)},ft.hydrate=function(e,t,r){if(!Ri(t))throw Error(i(200));return Oi(null,e,t,!0,r)},ft.hydrateRoot=function(e,t,r){if(!ol(e))throw Error(i(405));var a=r!=null&&r.hydratedSources||null,c=!1,f="",g=qd;if(r!=null&&(r.unstable_strictMode===!0&&(c=!0),r.identifierPrefix!==void 0&&(f=r.identifierPrefix),r.onRecoverableError!==void 0&&(g=r.onRecoverableError)),t=Fd(t,null,e,1,r??null,c,!1,f,g),e[Gt]=t.current,ns(e),a)for(e=0;e<a.length;e++)r=a[e],c=r._getVersion,c=c(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,c]:t.mutableSourceEagerHydrationData.push(r,c);return new Li(t)},ft.render=function(e,t,r){if(!Ri(t))throw Error(i(200));return Oi(null,e,t,!1,r)},ft.unmountComponentAtNode=function(e){if(!Ri(e))throw Error(i(40));return e._reactRootContainer?(Un(function(){Oi(null,null,e,!1,function(){e._reactRootContainer=null,e[Gt]=null})}),!0):!1},ft.unstable_batchedUpdates=Zo,ft.unstable_renderSubtreeIntoContainer=function(e,t,r,a){if(!Ri(r))throw Error(i(200));if(e==null||e._reactInternals===void 0)throw Error(i(38));return Oi(e,t,r,!1,a)},ft.version="18.3.1-next-f1338f8080-20240426",ft}var Xd;function gb(){if(Xd)return ul.exports;Xd=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(s){console.error(s)}}return n(),ul.exports=hb(),ul.exports}var Zd;function vb(){if(Zd)return Di;Zd=1;var n=gb();return Di.createRoot=n.createRoot,Di.hydrateRoot=n.hydrateRoot,Di}var yb=vb(),pl={exports:{}},ml={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jd;function xb(){if(Jd)return ml;Jd=1;var n=sa();function s(h,y){return h===y&&(h!==0||1/h===1/y)||h!==h&&y!==y}var i=typeof Object.is=="function"?Object.is:s,o=n.useSyncExternalStore,u=n.useRef,d=n.useEffect,p=n.useMemo,m=n.useDebugValue;return ml.useSyncExternalStoreWithSelector=function(h,y,v,_,$){var S=u(null);if(S.current===null){var M={hasValue:!1,value:null};S.current=M}else M=S.current;S=p(function(){function U(I){if(!E){if(E=!0,R=I,I=_(I),$!==void 0&&M.hasValue){var z=M.value;if($(z,I))return w=z}return w=I}if(z=w,i(R,I))return z;var Q=_(I);return $!==void 0&&$(z,Q)?(R=I,z):(R=I,w=Q)}var E=!1,R,w,T=v===void 0?null:v;return[function(){return U(y())},T===null?void 0:function(){return U(T())}]},[y,v,_,$]);var L=o(h,S[0],S[1]);return d(function(){M.hasValue=!0,M.value=L},[L]),m(L),L},ml}var ef;function wb(){return ef||(ef=1,pl.exports=xb()),pl.exports}var bb=wb();function kb(n){n()}function _b(){let n=null,s=null;return{clear(){n=null,s=null},notify(){kb(()=>{let i=n;for(;i;)i.callback(),i=i.next})},get(){const i=[];let o=n;for(;o;)i.push(o),o=o.next;return i},subscribe(i){let o=!0;const u=s={callback:i,next:null,prev:s};return u.prev?u.prev.next=u:n=u,function(){!o||n===null||(o=!1,u.next?u.next.prev=u.prev:s=u.prev,u.prev?u.prev.next=u.next:n=u.next)}}}}var tf={notify(){},get:()=>[]};function jb(n,s){let i,o=tf,u=0,d=!1;function p(L){v();const U=o.subscribe(L);let E=!1;return()=>{E||(E=!0,U(),_())}}function m(){o.notify()}function h(){M.onStateChange&&M.onStateChange()}function y(){return d}function v(){u++,i||(i=n.subscribe(h),o=_b())}function _(){u--,i&&u===0&&(i(),i=void 0,o.clear(),o=tf)}function $(){d||(d=!0,v())}function S(){d&&(d=!1,_())}const M={addNestedSub:p,notifyNestedSubs:m,handleChangeWrapper:h,isSubscribed:y,trySubscribe:$,tryUnsubscribe:S,getListeners:()=>o};return M}var Nb=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Sb=Nb(),Eb=()=>typeof navigator<"u"&&navigator.product==="ReactNative",Cb=Eb(),Tb=()=>Sb||Cb?A.useLayoutEffect:A.useEffect,$b=Tb(),Pb=Symbol.for("react-redux-context"),Ib=typeof globalThis<"u"?globalThis:{};function Ab(){if(!A.createContext)return{};const n=Ib[Pb]??=new Map;let s=n.get(A.createContext);return s||(s=A.createContext(null),n.set(A.createContext,s)),s}var Nn=Ab();function Mb(n){const{children:s,context:i,serverState:o,store:u}=n,d=A.useMemo(()=>{const h=jb(u);return{store:u,subscription:h,getServerState:o?()=>o:void 0}},[u,o]),p=A.useMemo(()=>u.getState(),[u]);$b(()=>{const{subscription:h}=d;return h.onStateChange=h.notifyNestedSubs,h.trySubscribe(),p!==u.getState()&&h.notifyNestedSubs(),()=>{h.tryUnsubscribe(),h.onStateChange=void 0}},[d,p]);const m=i||Nn;return A.createElement(m.Provider,{value:d},s)}var Lb=Mb;function Il(n=Nn){return function(){return A.useContext(n)}}var If=Il();function Af(n=Nn){const s=n===Nn?If:Il(n),i=()=>{const{store:o}=s();return o};return Object.assign(i,{withTypes:()=>i}),i}var Rb=Af();function Ob(n=Nn){const s=n===Nn?Rb:Af(n),i=()=>s().dispatch;return Object.assign(i,{withTypes:()=>i}),i}var Ub=Ob(),Db=(n,s)=>n===s;function Fb(n=Nn){const s=n===Nn?If:Il(n),i=(o,u={})=>{const{equalityFn:d=Db}=typeof u=="function"?{equalityFn:u}:u,p=s(),{store:m,subscription:h,getServerState:y}=p;A.useRef(!0);const v=A.useCallback({[o.name]($){return o($)}}[o.name],[o]),_=bb.useSyncExternalStoreWithSelector(h.addNestedSub,m.getState,y||m.getState,v,d);return A.useDebugValue(_),_};return Object.assign(i,{withTypes:()=>i}),i}var zb=Fb();function Hi(n){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Hi=function(i){return typeof i}:Hi=function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},Hi(n)}function qb(n,s){if(!(n instanceof s))throw new TypeError("Cannot call a class as a function")}function Bb(n,s){for(var i=0;i<s.length;i++){var o=s[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(n,o.key,o)}}function Wb(n,s,i){return s&&Bb(n.prototype,s),n}function Hb(n,s){return s&&(Hi(s)==="object"||typeof s=="function")?s:Gi(n)}function xl(n){return xl=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},xl(n)}function Gi(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Gb(n,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(s&&s.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),s&&wl(n,s)}function wl(n,s){return wl=Object.setPrototypeOf||function(o,u){return o.__proto__=u,o},wl(n,s)}function Vi(n,s,i){return s in n?Object.defineProperty(n,s,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[s]=i,n}var Mf=(function(n){Gb(s,n);function s(){var i,o;qb(this,s);for(var u=arguments.length,d=new Array(u),p=0;p<u;p++)d[p]=arguments[p];return o=Hb(this,(i=xl(s)).call.apply(i,[this].concat(d))),Vi(Gi(o),"state",{bootstrapped:!1}),Vi(Gi(o),"_unsubscribe",void 0),Vi(Gi(o),"handlePersistorState",function(){var m=o.props.persistor,h=m.getState(),y=h.bootstrapped;y&&(o.props.onBeforeLift?Promise.resolve(o.props.onBeforeLift()).finally(function(){return o.setState({bootstrapped:!0})}):o.setState({bootstrapped:!0}),o._unsubscribe&&o._unsubscribe())}),o}return Wb(s,[{key:"componentDidMount",value:function(){this._unsubscribe=this.props.persistor.subscribe(this.handlePersistorState),this.handlePersistorState()}},{key:"componentWillUnmount",value:function(){this._unsubscribe&&this._unsubscribe()}},{key:"render",value:function(){return typeof this.props.children=="function"?this.props.children(this.state.bootstrapped):this.state.bootstrapped?this.props.children:this.props.loading}}]),s})(A.PureComponent);Vi(Mf,"defaultProps",{children:null,loading:null});function Qe(n){return`Minified Redux error #${n}; visit https://redux.js.org/Errors?code=${n} for the full message or use the non-minified dev environment for full errors. `}var Vb=typeof Symbol=="function"&&Symbol.observable||"@@observable",nf=Vb,hl=()=>Math.random().toString(36).substring(7).split("").join("."),Kb={INIT:`@@redux/INIT${hl()}`,REPLACE:`@@redux/REPLACE${hl()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${hl()}`},Yi=Kb;function Al(n){if(typeof n!="object"||n===null)return!1;let s=n;for(;Object.getPrototypeOf(s)!==null;)s=Object.getPrototypeOf(s);return Object.getPrototypeOf(n)===s||Object.getPrototypeOf(n)===null}function Ml(n,s,i){if(typeof n!="function")throw new Error(Qe(2));if(typeof s=="function"&&typeof i=="function"||typeof i=="function"&&typeof arguments[3]=="function")throw new Error(Qe(0));if(typeof s=="function"&&typeof i>"u"&&(i=s,s=void 0),typeof i<"u"){if(typeof i!="function")throw new Error(Qe(1));return i(Ml)(n,s)}let o=n,u=s,d=new Map,p=d,m=0,h=!1;function y(){p===d&&(p=new Map,d.forEach((U,E)=>{p.set(E,U)}))}function v(){if(h)throw new Error(Qe(3));return u}function _(U){if(typeof U!="function")throw new Error(Qe(4));if(h)throw new Error(Qe(5));let E=!0;y();const R=m++;return p.set(R,U),function(){if(E){if(h)throw new Error(Qe(6));E=!1,y(),p.delete(R),d=null}}}function $(U){if(!Al(U))throw new Error(Qe(7));if(typeof U.type>"u")throw new Error(Qe(8));if(typeof U.type!="string")throw new Error(Qe(17));if(h)throw new Error(Qe(9));try{h=!0,u=o(u,U)}finally{h=!1}return(d=p).forEach(R=>{R()}),U}function S(U){if(typeof U!="function")throw new Error(Qe(10));o=U,$({type:Yi.REPLACE})}function M(){const U=_;return{subscribe(E){if(typeof E!="object"||E===null)throw new Error(Qe(11));function R(){const T=E;T.next&&T.next(v())}return R(),{unsubscribe:U(R)}},[nf](){return this}}}return $({type:Yi.INIT}),{dispatch:$,subscribe:_,getState:v,replaceReducer:S,[nf]:M}}function Qb(n){Object.keys(n).forEach(s=>{const i=n[s];if(typeof i(void 0,{type:Yi.INIT})>"u")throw new Error(Qe(12));if(typeof i(void 0,{type:Yi.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Qe(13))})}function Lf(n){const s=Object.keys(n),i={};for(let d=0;d<s.length;d++){const p=s[d];typeof n[p]=="function"&&(i[p]=n[p])}const o=Object.keys(i);let u;try{Qb(i)}catch(d){u=d}return function(p={},m){if(u)throw u;let h=!1;const y={};for(let v=0;v<o.length;v++){const _=o[v],$=i[_],S=p[_],M=$(S,m);if(typeof M>"u")throw m&&m.type,new Error(Qe(14));y[_]=M,h=h||M!==S}return h=h||o.length!==Object.keys(p).length,h?y:p}}function Xi(...n){return n.length===0?s=>s:n.length===1?n[0]:n.reduce((s,i)=>(...o)=>s(i(...o)))}function Yb(...n){return s=>(i,o)=>{const u=s(i,o);let d=()=>{throw new Error(Qe(15))};const p={getState:u.getState,dispatch:(h,...y)=>d(h,...y)},m=n.map(h=>h(p));return d=Xi(...m)(u.dispatch),{...u,dispatch:d}}}function Rf(n){return Al(n)&&"type"in n&&typeof n.type=="string"}var Of=Symbol.for("immer-nothing"),rf=Symbol.for("immer-draftable"),kt=Symbol.for("immer-state");function Ut(n,...s){throw new Error(`[Immer] minified error nr: ${n}. Full error at: https://bit.ly/3cXEKWf`)}var Nr=Object.getPrototypeOf;function Vn(n){return!!n&&!!n[kt]}function rn(n){return n?Uf(n)||Array.isArray(n)||!!n[rf]||!!n.constructor?.[rf]||aa(n)||oa(n):!1}var Xb=Object.prototype.constructor.toString();function Uf(n){if(!n||typeof n!="object")return!1;const s=Nr(n);if(s===null)return!0;const i=Object.hasOwnProperty.call(s,"constructor")&&s.constructor;return i===Object?!0:typeof i=="function"&&Function.toString.call(i)===Xb}function Zi(n,s){ia(n)===0?Reflect.ownKeys(n).forEach(i=>{s(i,n[i],n)}):n.forEach((i,o)=>s(o,i,n))}function ia(n){const s=n[kt];return s?s.type_:Array.isArray(n)?1:aa(n)?2:oa(n)?3:0}function bl(n,s){return ia(n)===2?n.has(s):Object.prototype.hasOwnProperty.call(n,s)}function Df(n,s,i){const o=ia(n);o===2?n.set(s,i):o===3?n.add(i):n[s]=i}function Zb(n,s){return n===s?n!==0||1/n===1/s:n!==n&&s!==s}function aa(n){return n instanceof Map}function oa(n){return n instanceof Set}function qn(n){return n.copy_||n.base_}function kl(n,s){if(aa(n))return new Map(n);if(oa(n))return new Set(n);if(Array.isArray(n))return Array.prototype.slice.call(n);const i=Uf(n);if(s===!0||s==="class_only"&&!i){const o=Object.getOwnPropertyDescriptors(n);delete o[kt];let u=Reflect.ownKeys(o);for(let d=0;d<u.length;d++){const p=u[d],m=o[p];m.writable===!1&&(m.writable=!0,m.configurable=!0),(m.get||m.set)&&(o[p]={configurable:!0,writable:!0,enumerable:m.enumerable,value:n[p]})}return Object.create(Nr(n),o)}else{const o=Nr(n);if(o!==null&&i)return{...n};const u=Object.create(o);return Object.assign(u,n)}}function Ll(n,s=!1){return la(n)||Vn(n)||!rn(n)||(ia(n)>1&&(n.set=n.add=n.clear=n.delete=Jb),Object.freeze(n),s&&Object.entries(n).forEach(([i,o])=>Ll(o,!0))),n}function Jb(){Ut(2)}function la(n){return Object.isFrozen(n)}var e1={};function Kn(n){const s=e1[n];return s||Ut(0,n),s}var Ns;function Ff(){return Ns}function t1(n,s){return{drafts_:[],parent_:n,immer_:s,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function sf(n,s){s&&(Kn("Patches"),n.patches_=[],n.inversePatches_=[],n.patchListener_=s)}function _l(n){jl(n),n.drafts_.forEach(n1),n.drafts_=null}function jl(n){n===Ns&&(Ns=n.parent_)}function af(n){return Ns=t1(Ns,n)}function n1(n){const s=n[kt];s.type_===0||s.type_===1?s.revoke_():s.revoked_=!0}function of(n,s){s.unfinalizedDrafts_=s.drafts_.length;const i=s.drafts_[0];return n!==void 0&&n!==i?(i[kt].modified_&&(_l(s),Ut(4)),rn(n)&&(n=Ji(s,n),s.parent_||ea(s,n)),s.patches_&&Kn("Patches").generateReplacementPatches_(i[kt].base_,n,s.patches_,s.inversePatches_)):n=Ji(s,i,[]),_l(s),s.patches_&&s.patchListener_(s.patches_,s.inversePatches_),n!==Of?n:void 0}function Ji(n,s,i){if(la(s))return s;const o=s[kt];if(!o)return Zi(s,(u,d)=>lf(n,o,s,u,d,i)),s;if(o.scope_!==n)return s;if(!o.modified_)return ea(n,o.base_,!0),o.base_;if(!o.finalized_){o.finalized_=!0,o.scope_.unfinalizedDrafts_--;const u=o.copy_;let d=u,p=!1;o.type_===3&&(d=new Set(u),u.clear(),p=!0),Zi(d,(m,h)=>lf(n,o,u,m,h,i,p)),ea(n,u,!1),i&&n.patches_&&Kn("Patches").generatePatches_(o,i,n.patches_,n.inversePatches_)}return o.copy_}function lf(n,s,i,o,u,d,p){if(Vn(u)){const m=d&&s&&s.type_!==3&&!bl(s.assigned_,o)?d.concat(o):void 0,h=Ji(n,u,m);if(Df(i,o,h),Vn(h))n.canAutoFreeze_=!1;else return}else p&&i.add(u);if(rn(u)&&!la(u)){if(!n.immer_.autoFreeze_&&n.unfinalizedDrafts_<1)return;Ji(n,u),(!s||!s.scope_.parent_)&&typeof o!="symbol"&&Object.prototype.propertyIsEnumerable.call(i,o)&&ea(n,u)}}function ea(n,s,i=!1){!n.parent_&&n.immer_.autoFreeze_&&n.canAutoFreeze_&&Ll(s,i)}function r1(n,s){const i=Array.isArray(n),o={type_:i?1:0,scope_:s?s.scope_:Ff(),modified_:!1,finalized_:!1,assigned_:{},parent_:s,base_:n,draft_:null,copy_:null,revoke_:null,isManual_:!1};let u=o,d=Rl;i&&(u=[o],d=Ss);const{revoke:p,proxy:m}=Proxy.revocable(u,d);return o.draft_=m,o.revoke_=p,m}var Rl={get(n,s){if(s===kt)return n;const i=qn(n);if(!bl(i,s))return s1(n,i,s);const o=i[s];return n.finalized_||!rn(o)?o:o===gl(n.base_,s)?(vl(n),n.copy_[s]=Sl(o,n)):o},has(n,s){return s in qn(n)},ownKeys(n){return Reflect.ownKeys(qn(n))},set(n,s,i){const o=zf(qn(n),s);if(o?.set)return o.set.call(n.draft_,i),!0;if(!n.modified_){const u=gl(qn(n),s),d=u?.[kt];if(d&&d.base_===i)return n.copy_[s]=i,n.assigned_[s]=!1,!0;if(Zb(i,u)&&(i!==void 0||bl(n.base_,s)))return!0;vl(n),Nl(n)}return n.copy_[s]===i&&(i!==void 0||s in n.copy_)||Number.isNaN(i)&&Number.isNaN(n.copy_[s])||(n.copy_[s]=i,n.assigned_[s]=!0),!0},deleteProperty(n,s){return gl(n.base_,s)!==void 0||s in n.base_?(n.assigned_[s]=!1,vl(n),Nl(n)):delete n.assigned_[s],n.copy_&&delete n.copy_[s],!0},getOwnPropertyDescriptor(n,s){const i=qn(n),o=Reflect.getOwnPropertyDescriptor(i,s);return o&&{writable:!0,configurable:n.type_!==1||s!=="length",enumerable:o.enumerable,value:i[s]}},defineProperty(){Ut(11)},getPrototypeOf(n){return Nr(n.base_)},setPrototypeOf(){Ut(12)}},Ss={};Zi(Rl,(n,s)=>{Ss[n]=function(){return arguments[0]=arguments[0][0],s.apply(this,arguments)}});Ss.deleteProperty=function(n,s){return Ss.set.call(this,n,s,void 0)};Ss.set=function(n,s,i){return Rl.set.call(this,n[0],s,i,n[0])};function gl(n,s){const i=n[kt];return(i?qn(i):n)[s]}function s1(n,s,i){const o=zf(s,i);return o?"value"in o?o.value:o.get?.call(n.draft_):void 0}function zf(n,s){if(!(s in n))return;let i=Nr(n);for(;i;){const o=Object.getOwnPropertyDescriptor(i,s);if(o)return o;i=Nr(i)}}function Nl(n){n.modified_||(n.modified_=!0,n.parent_&&Nl(n.parent_))}function vl(n){n.copy_||(n.copy_=kl(n.base_,n.scope_.immer_.useStrictShallowCopy_))}var i1=class{constructor(n){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(s,i,o)=>{if(typeof s=="function"&&typeof i!="function"){const d=i;i=s;const p=this;return function(h=d,...y){return p.produce(h,v=>i.call(this,v,...y))}}typeof i!="function"&&Ut(6),o!==void 0&&typeof o!="function"&&Ut(7);let u;if(rn(s)){const d=af(this),p=Sl(s,void 0);let m=!0;try{u=i(p),m=!1}finally{m?_l(d):jl(d)}return sf(d,o),of(u,d)}else if(!s||typeof s!="object"){if(u=i(s),u===void 0&&(u=s),u===Of&&(u=void 0),this.autoFreeze_&&Ll(u,!0),o){const d=[],p=[];Kn("Patches").generateReplacementPatches_(s,u,d,p),o(d,p)}return u}else Ut(1,s)},this.produceWithPatches=(s,i)=>{if(typeof s=="function")return(p,...m)=>this.produceWithPatches(p,h=>s(h,...m));let o,u;return[this.produce(s,i,(p,m)=>{o=p,u=m}),o,u]},typeof n?.autoFreeze=="boolean"&&this.setAutoFreeze(n.autoFreeze),typeof n?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(n.useStrictShallowCopy)}createDraft(n){rn(n)||Ut(8),Vn(n)&&(n=a1(n));const s=af(this),i=Sl(n,void 0);return i[kt].isManual_=!0,jl(s),i}finishDraft(n,s){const i=n&&n[kt];(!i||!i.isManual_)&&Ut(9);const{scope_:o}=i;return sf(o,s),of(void 0,o)}setAutoFreeze(n){this.autoFreeze_=n}setUseStrictShallowCopy(n){this.useStrictShallowCopy_=n}applyPatches(n,s){let i;for(i=s.length-1;i>=0;i--){const u=s[i];if(u.path.length===0&&u.op==="replace"){n=u.value;break}}i>-1&&(s=s.slice(i+1));const o=Kn("Patches").applyPatches_;return Vn(n)?o(n,s):this.produce(n,u=>o(u,s))}};function Sl(n,s){const i=aa(n)?Kn("MapSet").proxyMap_(n,s):oa(n)?Kn("MapSet").proxySet_(n,s):r1(n,s);return(s?s.scope_:Ff()).drafts_.push(i),i}function a1(n){return Vn(n)||Ut(10,n),qf(n)}function qf(n){if(!rn(n)||la(n))return n;const s=n[kt];let i;if(s){if(!s.modified_)return s.base_;s.finalized_=!0,i=kl(n,s.scope_.immer_.useStrictShallowCopy_)}else i=kl(n,!0);return Zi(i,(o,u)=>{Df(i,o,qf(u))}),s&&(s.finalized_=!1),i}var _t=new i1,Bf=_t.produce;_t.produceWithPatches.bind(_t);_t.setAutoFreeze.bind(_t);_t.setUseStrictShallowCopy.bind(_t);_t.applyPatches.bind(_t);_t.createDraft.bind(_t);_t.finishDraft.bind(_t);function o1(n,s=`expected a function, instead received ${typeof n}`){if(typeof n!="function")throw new TypeError(s)}function l1(n,s=`expected an object, instead received ${typeof n}`){if(typeof n!="object")throw new TypeError(s)}function c1(n,s="expected all items to be functions, instead received the following types: "){if(!n.every(i=>typeof i=="function")){const i=n.map(o=>typeof o=="function"?`function ${o.name||"unnamed"}()`:typeof o).join(", ");throw new TypeError(`${s}[${i}]`)}}var cf=n=>Array.isArray(n)?n:[n];function u1(n){const s=Array.isArray(n[0])?n[0]:n;return c1(s,"createSelector expects all input-selectors to be functions, but received the following types: "),s}function d1(n,s){const i=[],{length:o}=n;for(let u=0;u<o;u++)i.push(n[u].apply(null,s));return i}var f1=class{constructor(n){this.value=n}deref(){return this.value}},p1=typeof WeakRef<"u"?WeakRef:f1,m1=0,uf=1;function Fi(){return{s:m1,v:void 0,o:null,p:null}}function Wf(n,s={}){let i=Fi();const{resultEqualityCheck:o}=s;let u,d=0;function p(){let m=i;const{length:h}=arguments;for(let _=0,$=h;_<$;_++){const S=arguments[_];if(typeof S=="function"||typeof S=="object"&&S!==null){let M=m.o;M===null&&(m.o=M=new WeakMap);const L=M.get(S);L===void 0?(m=Fi(),M.set(S,m)):m=L}else{let M=m.p;M===null&&(m.p=M=new Map);const L=M.get(S);L===void 0?(m=Fi(),M.set(S,m)):m=L}}const y=m;let v;if(m.s===uf)v=m.v;else if(v=n.apply(null,arguments),d++,o){const _=u?.deref?.()??u;_!=null&&o(_,v)&&(v=_,d!==0&&d--),u=typeof v=="object"&&v!==null||typeof v=="function"?new p1(v):v}return y.s=uf,y.v=v,v}return p.clearCache=()=>{i=Fi(),p.resetResultsCount()},p.resultsCount=()=>d,p.resetResultsCount=()=>{d=0},p}function h1(n,...s){const i=typeof n=="function"?{memoize:n,memoizeOptions:s}:n,o=(...u)=>{let d=0,p=0,m,h={},y=u.pop();typeof y=="object"&&(h=y,y=u.pop()),o1(y,`createSelector expects an output function after the inputs, but received: [${typeof y}]`);const v={...i,...h},{memoize:_,memoizeOptions:$=[],argsMemoize:S=Wf,argsMemoizeOptions:M=[]}=v,L=cf($),U=cf(M),E=u1(u),R=_(function(){return d++,y.apply(null,arguments)},...L),w=S(function(){p++;const I=d1(E,arguments);return m=R.apply(null,I),m},...U);return Object.assign(w,{resultFunc:y,memoizedResultFunc:R,dependencies:E,dependencyRecomputations:()=>p,resetDependencyRecomputations:()=>{p=0},lastResult:()=>m,recomputations:()=>d,resetRecomputations:()=>{d=0},memoize:_,argsMemoize:S})};return Object.assign(o,{withTypes:()=>o}),o}var Wt=h1(Wf),g1=Object.assign((n,s=Wt)=>{l1(n,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof n}`);const i=Object.keys(n),o=i.map(d=>n[d]);return s(o,(...d)=>d.reduce((p,m,h)=>(p[i[h]]=m,p),{}))},{withTypes:()=>g1});function Hf(n){return({dispatch:i,getState:o})=>u=>d=>typeof d=="function"?d(i,o,n):u(d)}var v1=Hf(),y1=Hf,x1=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Xi:Xi.apply(null,arguments)};function Sr(n,s){function i(...o){if(s){let u=s(...o);if(!u)throw new Error(bt(0));return{type:n,payload:u.payload,..."meta"in u&&{meta:u.meta},..."error"in u&&{error:u.error}}}return{type:n,payload:o[0]}}return i.toString=()=>`${n}`,i.type=n,i.match=o=>Rf(o)&&o.type===n,i}var Gf=class _s extends Array{constructor(...s){super(...s),Object.setPrototypeOf(this,_s.prototype)}static get[Symbol.species](){return _s}concat(...s){return super.concat.apply(this,s)}prepend(...s){return s.length===1&&Array.isArray(s[0])?new _s(...s[0].concat(this)):new _s(...s.concat(this))}};function df(n){return rn(n)?Bf(n,()=>{}):n}function zi(n,s,i){return n.has(s)?n.get(s):n.set(s,i(s)).get(s)}function w1(n){return typeof n=="boolean"}var b1=()=>function(s){const{thunk:i=!0,immutableCheck:o=!0,serializableCheck:u=!0,actionCreatorCheck:d=!0}=s??{};let p=new Gf;return i&&(w1(i)?p.push(v1):p.push(y1(i.extraArgument))),p},k1="RTK_autoBatch",ff=n=>s=>{setTimeout(s,n)},_1=(n={type:"raf"})=>s=>(...i)=>{const o=s(...i);let u=!0,d=!1,p=!1;const m=new Set,h=n.type==="tick"?queueMicrotask:n.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:ff(10):n.type==="callback"?n.queueNotification:ff(n.timeout),y=()=>{p=!1,d&&(d=!1,m.forEach(v=>v()))};return Object.assign({},o,{subscribe(v){const _=()=>u&&v(),$=o.subscribe(_);return m.add(v),()=>{$(),m.delete(v)}},dispatch(v){try{return u=!v?.meta?.[k1],d=!u,d&&(p||(p=!0,h(y))),o.dispatch(v)}finally{u=!0}}})},j1=n=>function(i){const{autoBatch:o=!0}=i??{};let u=new Gf(n);return o&&u.push(_1(typeof o=="object"?o:void 0)),u};function N1(n){const s=b1(),{reducer:i=void 0,middleware:o,devTools:u=!0,preloadedState:d=void 0,enhancers:p=void 0}=n||{};let m;if(typeof i=="function")m=i;else if(Al(i))m=Lf(i);else throw new Error(bt(1));let h;typeof o=="function"?h=o(s):h=s();let y=Xi;u&&(y=x1({trace:!1,...typeof u=="object"&&u}));const v=Yb(...h),_=j1(v);let $=typeof p=="function"?p(_):_();const S=y(...$);return Ml(m,d,S)}function Vf(n){const s={},i=[];let o;const u={addCase(d,p){const m=typeof d=="string"?d:d.type;if(!m)throw new Error(bt(28));if(m in s)throw new Error(bt(29));return s[m]=p,u},addMatcher(d,p){return i.push({matcher:d,reducer:p}),u},addDefaultCase(d){return o=d,u}};return n(u),[s,i,o]}function S1(n){return typeof n=="function"}function E1(n,s){let[i,o,u]=Vf(s),d;if(S1(n))d=()=>df(n());else{const m=df(n);d=()=>m}function p(m=d(),h){let y=[i[h.type],...o.filter(({matcher:v})=>v(h)).map(({reducer:v})=>v)];return y.filter(v=>!!v).length===0&&(y=[u]),y.reduce((v,_)=>{if(_)if(Vn(v)){const S=_(v,h);return S===void 0?v:S}else{if(rn(v))return Bf(v,$=>_($,h));{const $=_(v,h);if($===void 0){if(v===null)return v;throw Error("A case reducer on a non-draftable value must not return undefined")}return $}}return v},m)}return p.getInitialState=d,p}var C1="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",T1=(n=21)=>{let s="",i=n;for(;i--;)s+=C1[Math.random()*64|0];return s},$1=Symbol.for("rtk-slice-createasyncthunk");function P1(n,s){return`${n}/${s}`}function I1({creators:n}={}){const s=n?.asyncThunk?.[$1];return function(o){const{name:u,reducerPath:d=u}=o;if(!u)throw new Error(bt(11));const p=(typeof o.reducers=="function"?o.reducers(M1()):o.reducers)||{},m=Object.keys(p),h={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},y={addCase(w,T){const I=typeof w=="string"?w:w.type;if(!I)throw new Error(bt(12));if(I in h.sliceCaseReducersByType)throw new Error(bt(13));return h.sliceCaseReducersByType[I]=T,y},addMatcher(w,T){return h.sliceMatchers.push({matcher:w,reducer:T}),y},exposeAction(w,T){return h.actionCreators[w]=T,y},exposeCaseReducer(w,T){return h.sliceCaseReducersByName[w]=T,y}};m.forEach(w=>{const T=p[w],I={reducerName:w,type:P1(u,w),createNotation:typeof o.reducers=="function"};R1(T)?U1(I,T,y,s):L1(I,T,y)});function v(){const[w={},T=[],I=void 0]=typeof o.extraReducers=="function"?Vf(o.extraReducers):[o.extraReducers],z={...w,...h.sliceCaseReducersByType};return E1(o.initialState,Q=>{for(let K in z)Q.addCase(K,z[K]);for(let K of h.sliceMatchers)Q.addMatcher(K.matcher,K.reducer);for(let K of T)Q.addMatcher(K.matcher,K.reducer);I&&Q.addDefaultCase(I)})}const _=w=>w,$=new Map,S=new WeakMap;let M;function L(w,T){return M||(M=v()),M(w,T)}function U(){return M||(M=v()),M.getInitialState()}function E(w,T=!1){function I(Q){let K=Q[w];return typeof K>"u"&&T&&(K=zi(S,I,U)),K}function z(Q=_){const K=zi($,T,()=>new WeakMap);return zi(K,Q,()=>{const ee={};for(const[je,ve]of Object.entries(o.selectors??{}))ee[je]=A1(ve,Q,()=>zi(S,Q,U),T);return ee})}return{reducerPath:w,getSelectors:z,get selectors(){return z(I)},selectSlice:I}}const R={name:u,reducer:L,actions:h.actionCreators,caseReducers:h.sliceCaseReducersByName,getInitialState:U,...E(d),injectInto(w,{reducerPath:T,...I}={}){const z=T??d;return w.inject({reducerPath:z,reducer:L},I),{...R,...E(z,!0)}}};return R}}function A1(n,s,i,o){function u(d,...p){let m=s(d);return typeof m>"u"&&o&&(m=i()),n(m,...p)}return u.unwrapped=n,u}var ca=I1();function M1(){function n(s,i){return{_reducerDefinitionType:"asyncThunk",payloadCreator:s,...i}}return n.withTypes=()=>n,{reducer(s){return Object.assign({[s.name](...i){return s(...i)}}[s.name],{_reducerDefinitionType:"reducer"})},preparedReducer(s,i){return{_reducerDefinitionType:"reducerWithPrepare",prepare:s,reducer:i}},asyncThunk:n}}function L1({type:n,reducerName:s,createNotation:i},o,u){let d,p;if("reducer"in o){if(i&&!O1(o))throw new Error(bt(17));d=o.reducer,p=o.prepare}else d=o;u.addCase(n,d).exposeCaseReducer(s,d).exposeAction(s,p?Sr(n,p):Sr(n))}function R1(n){return n._reducerDefinitionType==="asyncThunk"}function O1(n){return n._reducerDefinitionType==="reducerWithPrepare"}function U1({type:n,reducerName:s},i,o,u){if(!u)throw new Error(bt(18));const{payloadCreator:d,fulfilled:p,pending:m,rejected:h,settled:y,options:v}=i,_=u(n,d,v);o.exposeAction(s,_),p&&o.addCase(_.fulfilled,p),m&&o.addCase(_.pending,m),h&&o.addCase(_.rejected,h),y&&o.addMatcher(_.settled,y),o.exposeCaseReducer(s,{fulfilled:p||qi,pending:m||qi,rejected:h||qi,settled:y||qi})}function qi(){}var D1="task",Kf="listener",Qf="completed",Ol="cancelled",F1=`task-${Ol}`,z1=`task-${Qf}`,El=`${Kf}-${Ol}`,q1=`${Kf}-${Qf}`,ua=class{constructor(n){this.code=n,this.message=`${D1} ${Ol} (reason: ${n})`}name="TaskAbortError";message},Ul=(n,s)=>{if(typeof n!="function")throw new TypeError(bt(32))},ta=()=>{},Yf=(n,s=ta)=>(n.catch(s),n),Xf=(n,s)=>(n.addEventListener("abort",s,{once:!0}),()=>n.removeEventListener("abort",s)),Bn=(n,s)=>{const i=n.signal;i.aborted||("reason"in i||Object.defineProperty(i,"reason",{enumerable:!0,value:s,configurable:!0,writable:!0}),n.abort(s))},Wn=n=>{if(n.aborted){const{reason:s}=n;throw new ua(s)}};function Zf(n,s){let i=ta;return new Promise((o,u)=>{const d=()=>u(new ua(n.reason));if(n.aborted){d();return}i=Xf(n,d),s.finally(()=>i()).then(o,u)}).finally(()=>{i=ta})}var B1=async(n,s)=>{try{return await Promise.resolve(),{status:"ok",value:await n()}}catch(i){return{status:i instanceof ua?"cancelled":"rejected",error:i}}finally{s?.()}},na=n=>s=>Yf(Zf(n,s).then(i=>(Wn(n),i))),Jf=n=>{const s=na(n);return i=>s(new Promise(o=>setTimeout(o,i)))},{assign:jr}=Object,pf={},da="listenerMiddleware",W1=(n,s)=>{const i=o=>Xf(n,()=>Bn(o,n.reason));return(o,u)=>{Ul(o);const d=new AbortController;i(d);const p=B1(async()=>{Wn(n),Wn(d.signal);const m=await o({pause:na(d.signal),delay:Jf(d.signal),signal:d.signal});return Wn(d.signal),m},()=>Bn(d,z1));return u?.autoJoin&&s.push(p.catch(ta)),{result:na(n)(p),cancel(){Bn(d,F1)}}}},H1=(n,s)=>{const i=async(o,u)=>{Wn(s);let d=()=>{};const m=[new Promise((h,y)=>{let v=n({predicate:o,effect:(_,$)=>{$.unsubscribe(),h([_,$.getState(),$.getOriginalState()])}});d=()=>{v(),y()}})];u!=null&&m.push(new Promise(h=>setTimeout(h,u,null)));try{const h=await Zf(s,Promise.race(m));return Wn(s),h}finally{d()}};return(o,u)=>Yf(i(o,u))},ep=n=>{let{type:s,actionCreator:i,matcher:o,predicate:u,effect:d}=n;if(s)u=Sr(s).match;else if(i)s=i.type,u=i.match;else if(o)u=o;else if(!u)throw new Error(bt(21));return Ul(d),{predicate:u,type:s,effect:d}},tp=jr(n=>{const{type:s,predicate:i,effect:o}=ep(n);return{id:T1(),effect:o,type:s,predicate:i,pending:new Set,unsubscribe:()=>{throw new Error(bt(22))}}},{withTypes:()=>tp}),mf=(n,s)=>{const{type:i,effect:o,predicate:u}=ep(s);return Array.from(n.values()).find(d=>(typeof i=="string"?d.type===i:d.predicate===u)&&d.effect===o)},Cl=n=>{n.pending.forEach(s=>{Bn(s,El)})},G1=n=>()=>{n.forEach(Cl),n.clear()},hf=(n,s,i)=>{try{n(s,i)}catch(o){setTimeout(()=>{throw o},0)}},Dl=jr(Sr(`${da}/add`),{withTypes:()=>Dl}),V1=Sr(`${da}/removeAll`),np=jr(Sr(`${da}/remove`),{withTypes:()=>np}),K1=(...n)=>{console.error(`${da}/error`,...n)},Q1=(n={})=>{const s=new Map,{extra:i,onError:o=K1}=n;Ul(o);const u=v=>(v.unsubscribe=()=>s.delete(v.id),s.set(v.id,v),_=>{v.unsubscribe(),_?.cancelActive&&Cl(v)}),d=v=>{const _=mf(s,v)??tp(v);return u(_)};jr(d,{withTypes:()=>d});const p=v=>{const _=mf(s,v);return _&&(_.unsubscribe(),v.cancelActive&&Cl(_)),!!_};jr(p,{withTypes:()=>p});const m=async(v,_,$,S)=>{const M=new AbortController,L=H1(d,M.signal),U=[];try{v.pending.add(M),await Promise.resolve(v.effect(_,jr({},$,{getOriginalState:S,condition:(E,R)=>L(E,R).then(Boolean),take:L,delay:Jf(M.signal),pause:na(M.signal),extra:i,signal:M.signal,fork:W1(M.signal,U),unsubscribe:v.unsubscribe,subscribe:()=>{s.set(v.id,v)},cancelActiveListeners:()=>{v.pending.forEach((E,R,w)=>{E!==M&&(Bn(E,El),w.delete(E))})},cancel:()=>{Bn(M,El),v.pending.delete(M)},throwIfCancelled:()=>{Wn(M.signal)}})))}catch(E){E instanceof ua||hf(o,E,{raisedBy:"effect"})}finally{await Promise.all(U),Bn(M,q1),v.pending.delete(M)}},h=G1(s);return{middleware:v=>_=>$=>{if(!Rf($))return _($);if(Dl.match($))return d($.payload);if(V1.match($)){h();return}if(np.match($))return p($.payload);let S=v.getState();const M=()=>{if(S===pf)throw new Error(bt(23));return S};let L;try{if(L=_($),s.size>0){const U=v.getState(),E=Array.from(s.values());for(const R of E){let w=!1;try{w=R.predicate($,U,S)}catch(T){w=!1,hf(o,T,{raisedBy:"predicate"})}w&&m(R,$,v,M)}}}finally{S=pf}return L},startListening:d,stopListening:p,clearListeners:h}};function bt(n){return`Minified Redux Toolkit error #${n}; visit https://redux-toolkit.js.org/Errors?code=${n} for the full message or use the non-minified dev environment for full errors. `}var Fl="persist:",rp="persist/FLUSH",zl="persist/REHYDRATE",sp="persist/PAUSE",ip="persist/PERSIST",ap="persist/PURGE",op="persist/REGISTER",Y1=-1;function Ki(n){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Ki=function(i){return typeof i}:Ki=function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},Ki(n)}function gf(n,s){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);s&&(o=o.filter(function(u){return Object.getOwnPropertyDescriptor(n,u).enumerable})),i.push.apply(i,o)}return i}function X1(n){for(var s=1;s<arguments.length;s++){var i=arguments[s]!=null?arguments[s]:{};s%2?gf(i,!0).forEach(function(o){Z1(n,o,i[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):gf(i).forEach(function(o){Object.defineProperty(n,o,Object.getOwnPropertyDescriptor(i,o))})}return n}function Z1(n,s,i){return s in n?Object.defineProperty(n,s,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[s]=i,n}function J1(n,s,i,o){o.debug;var u=X1({},i);return n&&Ki(n)==="object"&&Object.keys(n).forEach(function(d){d!=="_persist"&&s[d]===i[d]&&(u[d]=n[d])}),u}function ek(n){var s=n.blacklist||null,i=n.whitelist||null,o=n.transforms||[],u=n.throttle||0,d="".concat(n.keyPrefix!==void 0?n.keyPrefix:Fl).concat(n.key),p=n.storage,m;n.serialize===!1?m=function(I){return I}:typeof n.serialize=="function"?m=n.serialize:m=tk;var h=n.writeFailHandler||null,y={},v={},_=[],$=null,S=null,M=function(I){Object.keys(I).forEach(function(z){E(z)&&y[z]!==I[z]&&_.indexOf(z)===-1&&_.push(z)}),Object.keys(y).forEach(function(z){I[z]===void 0&&E(z)&&_.indexOf(z)===-1&&y[z]!==void 0&&_.push(z)}),$===null&&($=setInterval(L,u)),y=I};function L(){if(_.length===0){$&&clearInterval($),$=null;return}var T=_.shift(),I=o.reduce(function(z,Q){return Q.in(z,T,y)},y[T]);if(I!==void 0)try{v[T]=m(I)}catch(z){console.error("redux-persist/createPersistoid: error serializing state",z)}else delete v[T];_.length===0&&U()}function U(){Object.keys(v).forEach(function(T){y[T]===void 0&&delete v[T]}),S=p.setItem(d,m(v)).catch(R)}function E(T){return!(i&&i.indexOf(T)===-1&&T!=="_persist"||s&&s.indexOf(T)!==-1)}function R(T){h&&h(T)}var w=function(){for(;_.length!==0;)L();return S||Promise.resolve()};return{update:M,flush:w}}function tk(n){return JSON.stringify(n)}function nk(n){var s=n.transforms||[],i="".concat(n.keyPrefix!==void 0?n.keyPrefix:Fl).concat(n.key),o=n.storage;n.debug;var u;return n.deserialize===!1?u=function(p){return p}:typeof n.deserialize=="function"?u=n.deserialize:u=rk,o.getItem(i).then(function(d){if(d)try{var p={},m=u(d);return Object.keys(m).forEach(function(h){p[h]=s.reduceRight(function(y,v){return v.out(y,h,m)},u(m[h]))}),p}catch(h){throw h}else return})}function rk(n){return JSON.parse(n)}function sk(n){var s=n.storage,i="".concat(n.keyPrefix!==void 0?n.keyPrefix:Fl).concat(n.key);return s.removeItem(i,ik)}function ik(n){}function vf(n,s){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);s&&(o=o.filter(function(u){return Object.getOwnPropertyDescriptor(n,u).enumerable})),i.push.apply(i,o)}return i}function en(n){for(var s=1;s<arguments.length;s++){var i=arguments[s]!=null?arguments[s]:{};s%2?vf(i,!0).forEach(function(o){ak(n,o,i[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):vf(i).forEach(function(o){Object.defineProperty(n,o,Object.getOwnPropertyDescriptor(i,o))})}return n}function ak(n,s,i){return s in n?Object.defineProperty(n,s,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[s]=i,n}function ok(n,s){if(n==null)return{};var i=lk(n,s),o,u;if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(n);for(u=0;u<d.length;u++)o=d[u],!(s.indexOf(o)>=0)&&Object.prototype.propertyIsEnumerable.call(n,o)&&(i[o]=n[o])}return i}function lk(n,s){if(n==null)return{};var i={},o=Object.keys(n),u,d;for(d=0;d<o.length;d++)u=o[d],!(s.indexOf(u)>=0)&&(i[u]=n[u]);return i}var ck=5e3;function uk(n,s){var i=n.version!==void 0?n.version:Y1;n.debug;var o=n.stateReconciler===void 0?J1:n.stateReconciler,u=n.getStoredState||nk,d=n.timeout!==void 0?n.timeout:ck,p=null,m=!1,h=!0,y=function(_){return _._persist.rehydrated&&p&&!h&&p.update(_),_};return function(v,_){var $=v||{},S=$._persist,M=ok($,["_persist"]),L=M;if(_.type===ip){var U=!1,E=function(K,ee){U||(_.rehydrate(n.key,K,ee),U=!0)};if(d&&setTimeout(function(){!U&&E(void 0,new Error('redux-persist: persist timed out for persist key "'.concat(n.key,'"')))},d),h=!1,p||(p=ek(n)),S)return en({},s(L,_),{_persist:S});if(typeof _.rehydrate!="function"||typeof _.register!="function")throw new Error("redux-persist: either rehydrate or register is not a function on the PERSIST action. This can happen if the action is being replayed. This is an unexplored use case, please open an issue and we will figure out a resolution.");return _.register(n.key),u(n).then(function(Q){var K=n.migrate||function(ee,je){return Promise.resolve(ee)};K(Q,i).then(function(ee){E(ee)},function(ee){E(void 0,ee)})},function(Q){E(void 0,Q)}),en({},s(L,_),{_persist:{version:i,rehydrated:!1}})}else{if(_.type===ap)return m=!0,_.result(sk(n)),en({},s(L,_),{_persist:S});if(_.type===rp)return _.result(p&&p.flush()),en({},s(L,_),{_persist:S});if(_.type===sp)h=!0;else if(_.type===zl){if(m)return en({},L,{_persist:en({},S,{rehydrated:!0})});if(_.key===n.key){var R=s(L,_),w=_.payload,T=o!==!1&&w!==void 0?o(w,v,R,n):R,I=en({},T,{_persist:en({},S,{rehydrated:!0})});return y(I)}}}if(!S)return s(v,_);var z=s(L,_);return z===L?v:y(en({},z,{_persist:S}))}}function yf(n){return pk(n)||fk(n)||dk()}function dk(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function fk(n){if(Symbol.iterator in Object(n)||Object.prototype.toString.call(n)==="[object Arguments]")return Array.from(n)}function pk(n){if(Array.isArray(n)){for(var s=0,i=new Array(n.length);s<n.length;s++)i[s]=n[s];return i}}function xf(n,s){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);s&&(o=o.filter(function(u){return Object.getOwnPropertyDescriptor(n,u).enumerable})),i.push.apply(i,o)}return i}function Tl(n){for(var s=1;s<arguments.length;s++){var i=arguments[s]!=null?arguments[s]:{};s%2?xf(i,!0).forEach(function(o){mk(n,o,i[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):xf(i).forEach(function(o){Object.defineProperty(n,o,Object.getOwnPropertyDescriptor(i,o))})}return n}function mk(n,s,i){return s in n?Object.defineProperty(n,s,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[s]=i,n}var lp={registry:[],bootstrapped:!1},hk=function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:lp,i=arguments.length>1?arguments[1]:void 0;switch(i.type){case op:return Tl({},s,{registry:[].concat(yf(s.registry),[i.key])});case zl:var o=s.registry.indexOf(i.key),u=yf(s.registry);return u.splice(o,1),Tl({},s,{registry:u,bootstrapped:u.length===0});default:return s}};function gk(n,s,i){var o=Ml(hk,lp,void 0),u=function(h){o.dispatch({type:op,key:h})},d=function(h,y,v){var _={type:zl,payload:y,err:v,key:h};n.dispatch(_),o.dispatch(_)},p=Tl({},o,{purge:function(){var h=[];return n.dispatch({type:ap,result:function(v){h.push(v)}}),Promise.all(h)},flush:function(){var h=[];return n.dispatch({type:rp,result:function(v){h.push(v)}}),Promise.all(h)},pause:function(){n.dispatch({type:sp})},persist:function(){n.dispatch({type:ip,register:u,rehydrate:d})}});return p.persist(),p}var bs={},Bi={},Wi={},wf;function vk(){if(wf)return Wi;wf=1,Wi.__esModule=!0,Wi.default=u;function n(d){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?n=function(m){return typeof m}:n=function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m},n(d)}function s(){}var i={getItem:s,setItem:s,removeItem:s};function o(d){if((typeof self>"u"?"undefined":n(self))!=="object"||!(d in self))return!1;try{var p=self[d],m="redux-persist ".concat(d," test");p.setItem(m,"test"),p.getItem(m),p.removeItem(m)}catch{return!1}return!0}function u(d){var p="".concat(d,"Storage");return o(p)?self[p]:i}return Wi}var bf;function yk(){if(bf)return Bi;bf=1,Bi.__esModule=!0,Bi.default=i;var n=s(vk());function s(o){return o&&o.__esModule?o:{default:o}}function i(o){var u=(0,n.default)(o);return{getItem:function(p){return new Promise(function(m,h){m(u.getItem(p))})},setItem:function(p,m){return new Promise(function(h,y){h(u.setItem(p,m))})},removeItem:function(p){return new Promise(function(m,h){m(u.removeItem(p))})}}}return Bi}var kf;function xk(){if(kf)return bs;kf=1,bs.__esModule=!0,bs.default=void 0;var n=s(yk());function s(o){return o&&o.__esModule?o:{default:o}}var i=(0,n.default)("local");return bs.default=i,bs}var wk=xk();const bk=Pf(wk),kk=""+new URL("embermew-Qjapivz5.png",import.meta.url).href,_k=""+new URL("general-BICIs6z-.png",import.meta.url).href,jk=""+new URL("mireglow-guardian-_LMVWJbg.png",import.meta.url).href,Nk=""+new URL("mossfeather-BQG4YRVc.png",import.meta.url).href,Sk=""+new URL("mycelin-lvjcMXe6.png",import.meta.url).href,Ek=""+new URL("ripplemask-CSy_J6od.png",import.meta.url).href,Ck=""+new URL("shadow-of-the-forest-DA0Dsqh_.png",import.meta.url).href,Tk=""+new URL("stone-monkey-BK07GLRa.png",import.meta.url).href,$k=""+new URL("suntusk-C9vmhudc.png",import.meta.url).href,Pk=""+new URL("syltharion-the-verdant-warden-ClfCNHTN.png",import.meta.url).href,Ik=""+new URL("umbralis-CnAhv7kM.png",import.meta.url).href,Ak=""+new URL("verdant-fangfin-CLmZwQZ5.png",import.meta.url).href,Mk=""+new URL("whisperhart-4HCMeFeO.png",import.meta.url).href,cp="embermew",up="Embermew",dp="fire",fp="beast",pp={range:2,canSwim:!1,canClimb:!1,canFly:!1,canWalk:!0},mp={maxLevel:30,experienceCurve:2,statGrowth:{health:5,attack:3,defense:2},allocationPoints:3,learnableAttacks:[{attackId:"fireball",requiredLevel:1},{attackId:"inner-fire",requiredLevel:3}]},Lk={unitType:cp,name:up,affinity:dp,family:fp,movement:pp,levelingConfig:mp},Rk=Object.freeze(Object.defineProperty({__proto__:null,affinity:dp,default:Lk,family:fp,levelingConfig:mp,movement:pp,name:up,unitType:cp},Symbol.toStringTag,{value:"Module"})),hp="general",gp="Character",vp="water",yp="dragon",xp={range:1,canSwim:!1,canClimb:!1,canFly:!1,canWalk:!0},wp={maxLevel:30,experienceCurve:2,statGrowth:{health:10,attack:0,defense:3},allocationPoints:3,learnableAttacks:[]},Ok={unitType:hp,name:gp,affinity:vp,family:yp,movement:xp,levelingConfig:wp},Uk=Object.freeze(Object.defineProperty({__proto__:null,affinity:vp,default:Ok,family:yp,levelingConfig:wp,movement:xp,name:gp,unitType:hp},Symbol.toStringTag,{value:"Module"})),bp="mireglow-guardian",kp="Mireglow Guardian",_p="water",jp="beast",Np={range:2,canSwim:!0,canClimb:!1,canFly:!1,canWalk:!0},Sp={maxLevel:30,experienceCurve:2,statGrowth:{health:4,attack:1,defense:4},allocationPoints:3,learnableAttacks:[{attackId:"tongue-lash",requiredLevel:3},{attackId:"mire-splash",requiredLevel:6},{attackId:"leap-crush",requiredLevel:9},{attackId:"toxic-croak",requiredLevel:12}]},Dk={unitType:bp,name:kp,affinity:_p,family:jp,movement:Np,levelingConfig:Sp},Fk=Object.freeze(Object.defineProperty({__proto__:null,affinity:_p,default:Dk,family:jp,levelingConfig:Sp,movement:Np,name:kp,unitType:bp},Symbol.toStringTag,{value:"Module"})),Ep="mossfeather",Cp="Mossfeather",Tp="air",$p="bird",Pp={range:2,canSwim:!1,canClimb:!1,canFly:!0,canWalk:!0},Ip={maxLevel:10,experienceCurve:2,statGrowth:{health:3,attack:3,defense:3},allocationPoints:3,learnableAttacks:[{attackId:"peck",requiredLevel:1}]},zk={unitType:Ep,name:Cp,affinity:Tp,family:$p,movement:Pp,levelingConfig:Ip},qk=Object.freeze(Object.defineProperty({__proto__:null,affinity:Tp,default:zk,family:$p,levelingConfig:Ip,movement:Pp,name:Cp,unitType:Ep},Symbol.toStringTag,{value:"Module"})),Ap="mycelin",Mp="Mycelin",Lp="earth",Rp="plant",Op={range:0,canSwim:!1,canClimb:!1,canFly:!1,canWalk:!0},Up={maxLevel:10,experienceCurve:2,statGrowth:{health:5,attack:2,defense:2},allocationPoints:3,learnableAttacks:[{attackId:"spore-bomb",requiredLevel:1}]},Bk={unitType:Ap,name:Mp,affinity:Lp,family:Rp,movement:Op,levelingConfig:Up},Wk=Object.freeze(Object.defineProperty({__proto__:null,affinity:Lp,default:Bk,family:Rp,levelingConfig:Up,movement:Op,name:Mp,unitType:Ap},Symbol.toStringTag,{value:"Module"})),Dp="ripplemask",Fp="Ripplemask",zp="water",qp="beast",Bp={range:2,canSwim:!1,canClimb:!1,canFly:!1,canWalk:!0},Wp={maxLevel:30,experienceCurve:2,statGrowth:{health:10,attack:3,defense:2},allocationPoints:3,learnableAttacks:[{attackId:"water-swipe",requiredLevel:1},{attackId:"lily-pad-bounce",requiredLevel:4},{attackId:"ripple-wave",requiredLevel:7},{attackId:"water-bomb",requiredLevel:10},{attackId:"stealth-dive",requiredLevel:13}]},Hk={unitType:Dp,name:Fp,affinity:zp,family:qp,movement:Bp,levelingConfig:Wp},Gk=Object.freeze(Object.defineProperty({__proto__:null,affinity:zp,default:Hk,family:qp,levelingConfig:Wp,movement:Bp,name:Fp,unitType:Dp},Symbol.toStringTag,{value:"Module"})),Hp="shadow-of-the-forest",Gp="Shadow of the Forest",Vp="night",Kp="bird",Qp={range:2,canSwim:!1,canClimb:!1,canFly:!1,canWalk:!0},Yp={maxLevel:20,experienceCurve:2,statGrowth:{health:3,attack:3,defense:4},allocationPoints:3,learnableAttacks:[{attackId:"slash",requiredLevel:1},{attackId:"moonbeam",requiredLevel:1}]},Vk={unitType:Hp,name:Gp,affinity:Vp,family:Kp,movement:Qp,levelingConfig:Yp},Kk=Object.freeze(Object.defineProperty({__proto__:null,affinity:Vp,default:Vk,family:Kp,levelingConfig:Yp,movement:Qp,name:Gp,unitType:Hp},Symbol.toStringTag,{value:"Module"})),Xp="stone-monkey",Zp="Stone Monkey",Jp="earth",em="beast",tm={range:2,canSwim:!1,canClimb:!1,canFly:!1,canWalk:!0},nm={maxLevel:30,experienceCurve:2,statGrowth:{health:3,attack:3,defense:3},allocationPoints:3,learnableAttacks:[{attackId:"scratch",requiredLevel:1}]},Qk={unitType:Xp,name:Zp,affinity:Jp,family:em,movement:tm,levelingConfig:nm},Yk=Object.freeze(Object.defineProperty({__proto__:null,affinity:Jp,default:Qk,family:em,levelingConfig:nm,movement:tm,name:Zp,unitType:Xp},Symbol.toStringTag,{value:"Module"})),rm="suntusk",sm="Suntusk",im="earth",am="beast",om={range:2,canSwim:!1,canClimb:!1,canFly:!1,canWalk:!0},lm={maxLevel:30,experienceCurve:2,statGrowth:{health:3,attack:4,defense:4},allocationPoints:3,learnableAttacks:[{attackId:"headbutt",requiredLevel:1}]},Xk={unitType:rm,name:sm,affinity:im,family:am,movement:om,levelingConfig:lm},Zk=Object.freeze(Object.defineProperty({__proto__:null,affinity:im,default:Xk,family:am,levelingConfig:lm,movement:om,name:sm,unitType:rm},Symbol.toStringTag,{value:"Module"})),cm="syltharion-the-verdant-warden",um="Syltharion, the Verdant Warden",dm="night",fm="beast",pm={range:2,canSwim:!1,canClimb:!1,canFly:!1,canWalk:!0},mm={maxLevel:30,experienceCurve:2,statGrowth:{health:10,attack:3,defense:2},allocationPoints:3,learnableAttacks:[{attackId:"thorn-barrage",requiredLevel:5},{attackId:"warden-embrace",requiredLevel:10},{attackId:"verdant-storm",requiredLevel:15},{attackId:"forest-awakening",requiredLevel:25},{attackId:"armor-shatter",requiredLevel:1},{attackId:"assassinate",requiredLevel:1},{attackId:"barrier",requiredLevel:1},{attackId:"blink",requiredLevel:1},{attackId:"entangle",requiredLevel:1},{attackId:"fire-breath",requiredLevel:1},{attackId:"life-drain",requiredLevel:1},{attackId:"lightning-strike",requiredLevel:1},{attackId:"lullaby",requiredLevel:1},{attackId:"mirror-aura",requiredLevel:1},{attackId:"razor-claws",requiredLevel:1},{attackId:"stone-wall",requiredLevel:1},{attackId:"wind-rush",requiredLevel:1}]},Jk={unitType:cm,name:um,affinity:dm,family:fm,movement:pm,levelingConfig:mm},e_=Object.freeze(Object.defineProperty({__proto__:null,affinity:dm,default:Jk,family:fm,levelingConfig:mm,movement:pm,name:um,unitType:cm},Symbol.toStringTag,{value:"Module"})),hm="umbralis",gm="Umbralis",vm="night",ym="bird",xm={range:3,canSwim:!1,canClimb:!1,canFly:!0,canWalk:!0},wm={maxLevel:10,experienceCurve:2,statGrowth:{health:3,attack:5,defense:2},allocationPoints:3,learnableAttacks:[{attackId:"peck",requiredLevel:1}]},t_={unitType:hm,name:gm,affinity:vm,family:ym,movement:xm,levelingConfig:wm},n_=Object.freeze(Object.defineProperty({__proto__:null,affinity:vm,default:t_,family:ym,levelingConfig:wm,movement:xm,name:gm,unitType:hm},Symbol.toStringTag,{value:"Module"})),bm="verdant-fangfin",km="Verdant Fangfin",_m="water",jm="fish",Nm={range:2,canSwim:!0,canClimb:!1,canFly:!1,canWalk:!1},Sm={maxLevel:30,experienceCurve:2,statGrowth:{health:10,attack:3,defense:2},allocationPoints:3,learnableAttacks:[{attackId:"fang-strike",requiredLevel:1},{attackId:"aqua-jet",requiredLevel:4},{attackId:"tail-slap",requiredLevel:7},{attackId:"fin-slash",requiredLevel:10},{attackId:"bubble-burst",requiredLevel:13},{attackId:"whirlpool",requiredLevel:16}]},r_={unitType:bm,name:km,affinity:_m,family:jm,movement:Nm,levelingConfig:Sm},s_=Object.freeze(Object.defineProperty({__proto__:null,affinity:_m,default:r_,family:jm,levelingConfig:Sm,movement:Nm,name:km,unitType:bm},Symbol.toStringTag,{value:"Module"})),Em="whisperhart",Cm="Whisperhart",Tm="earth",$m="beast",Pm={range:2,canSwim:!1,canClimb:!1,canFly:!1,canWalk:!0},Im={maxLevel:30,experienceCurve:2,statGrowth:{health:3,attack:3,defense:3},allocationPoints:3,learnableAttacks:[{attackId:"kick",requiredLevel:1}]},i_={unitType:Em,name:Cm,affinity:Tm,family:$m,movement:Pm,levelingConfig:Im},a_=Object.freeze(Object.defineProperty({__proto__:null,affinity:Tm,default:i_,family:$m,levelingConfig:Im,movement:Pm,name:Cm,unitType:Em},Symbol.toStringTag,{value:"Module"}));var Ee=(n=>(n.FIRE="fire",n.WATER="water",n.EARTH="earth",n.AIR="air",n.LIGHTNING="lightning",n.NIGHT="night",n))(Ee||{}),kr=(n=>(n.BEAST="beast",n.DRAGON="dragon",n.FISH="fish",n.BIRD="bird",n.PLANT="plant",n))(kr||{}),D=(n=>(n.APPLY_MODIFIER="apply_modifier",n.HEAL="heal",n.PUSH="push",n.POISON="poison",n.STUN="stun",n.SLEEP="sleep",n.BURN="burn",n.BLEED="bleed",n.SHIELD="shield",n.REFLECT="reflect",n.TELEPORT="teleport",n.ROOT="root",n.HASTE="haste",n.DRAIN="drain",n.CREATE_TERRAIN="create_terrain",n.CRITICAL_STRIKE="critical_strike",n.ARMOR_PIERCE="armor_pierce",n))(D||{}),de=(n=>(n.ATTACK_MULTIPLIER="attack_multiplier",n.DEFENSE_MULTIPLIER="defense_multiplier",n.POISON="poison",n.STUN="stun",n.SLEEP="sleep",n.BURN="burn",n.BLEED="bleed",n.SHIELD="shield",n.REFLECT="reflect",n.ROOT="root",n.HASTE="haste",n.DRAIN="drain",n))(de||{});const ql=n=>Object.entries(n),o_=n=>Object.keys(n),l_=n=>{switch(n.toLowerCase()){case"fire":return Ee.FIRE;case"water":return Ee.WATER;case"earth":return Ee.EARTH;case"air":return Ee.AIR;case"lightning":return Ee.LIGHTNING;case"night":return Ee.NIGHT;default:throw new Error(`Invalid affinity: ${n}`)}},c_=n=>{switch(n.toLowerCase()){case"beast":return kr.BEAST;case"dragon":return kr.DRAGON;case"fish":return kr.FISH;case"bird":return kr.BIRD;case"plant":return kr.PLANT;default:throw new Error(`Invalid family: ${n}`)}},u_=n=>{if(typeof n!="object"||n===null)throw new Error("Movement is not an object");if(!("range"in n))throw new Error("Movement is missing range");return{range:n.range,canSwim:"canSwim"in n&&!!n.canSwim,canClimb:"canClimb"in n&&!!n.canClimb,canFly:"canFly"in n&&!!n.canFly,canWalk:"canWalk"in n&&!!n.canWalk}},d_=n=>{if(typeof n!="object"||n===null)throw new Error("Leveling config is not an object");return n},f_=n=>{const s=new URL(Object.assign({"../assets/units/embermew.png":kk,"../assets/units/general.png":_k,"../assets/units/mireglow-guardian.png":jk,"../assets/units/mossfeather.png":Nk,"../assets/units/mycelin.png":Sk,"../assets/units/ripplemask.png":Ek,"../assets/units/shadow-of-the-forest.png":Ck,"../assets/units/stone-monkey.png":Tk,"../assets/units/suntusk.png":$k,"../assets/units/syltharion-the-verdant-warden.png":Pk,"../assets/units/umbralis.png":Ik,"../assets/units/verdant-fangfin.png":Ak,"../assets/units/whisperhart.png":Mk})[`../assets/units/${n.unitType}.png`],import.meta.url).href;return{unitType:n.unitType,name:n.name,affinity:l_(n.affinity),family:c_(n.family),levelingConfig:d_(n.levelingConfig),movement:u_(n.movement),image:s}},Bl={};let Wl=!1;const Hl=()=>{Object.entries(Object.assign({"./unitConfigs/embermew.json":Rk,"./unitConfigs/general.json":Uk,"./unitConfigs/mireglow-guardian.json":Fk,"./unitConfigs/mossfeather.json":qk,"./unitConfigs/mycelin.json":Wk,"./unitConfigs/ripplemask.json":Gk,"./unitConfigs/shadow-of-the-forest.json":Kk,"./unitConfigs/stone-monkey.json":Yk,"./unitConfigs/suntusk.json":Zk,"./unitConfigs/syltharion-the-verdant-warden.json":e_,"./unitConfigs/umbralis.json":n_,"./unitConfigs/verdant-fangfin.json":s_,"./unitConfigs/whisperhart.json":a_})).forEach(([s,i])=>{try{const o=i;if(!o.unitType){console.warn(`Unit config ${s} is missing unitType field, skipping`);return}Bl[o.unitType]=f_(o)}catch(o){console.error(`Failed to process unit config from ${s}:`,o)}}),Wl=!0},He=n=>{Wl||Hl();const s=Bl[n];if(!s)throw new Error(`Unit type not found: ${n}`);return s},p_=(n,s)=>{const i=He(n);return i.levelingConfig?i.levelingConfig.learnableAttacks.filter(o=>o.requiredLevel<=s).map(o=>o.attackId):[]},m_=()=>(Wl||Hl(),o_(Bl));window.hydrateUnitConfigs=Hl;const ra=(n,s)=>s*100*(n*(n-1))/4,Gl=n=>{const s=He(n.unitType).levelingConfig,i=n.experience,o=ra(n.level,s.experienceCurve),u=ra(n.level+1,s.experienceCurve);return{experience:i-o,experienceToNextLevel:u-o}},h_=(n,s)=>{const i=n.experience+s,o=[],u=He(n.unitType).levelingConfig;let d=n.level;for(;i>=ra(d+1,u.experienceCurve);){const p=d+1,m=p_(n.unitType,p).filter(h=>!n.attacks.includes(h));o.push({unitId:n.id,playerId:n.playerId,newLevel:p,availablePoints:u.allocationPoints,statAllocation:u.statGrowth,availableAttacks:m}),d++}return o},g_=(n,s)=>n.levelingConfig.statGrowth.health*s,v_=(n,s)=>n.levelingConfig.statGrowth.attack*s,y_=(n,s)=>n.levelingConfig.statGrowth.defense*s,x_=(n,s)=>n.levelingConfig.learnableAttacks.filter(o=>o.requiredLevel<=s).map(o=>o.attackId),w_=(n,s)=>{const i=n.levelingConfig;return ra(s,i.experienceCurve)},Am=(n,s,i,o)=>({id:`unit-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,unitType:n.unitType,name:o||n.name,playerId:s,level:i,maxHealth:g_(n,i),attack:v_(n,i),defense:y_(n,i),experience:w_(n,i),attacks:x_(n,i),availablePoints:0}),$l=(n,s,i)=>{const o=Am(n,s,i);return{...o,health:o.maxHealth,hasMoved:!1,hasAttacked:!1,modifiers:[]}},_f=()=>({units:[],squads:[],selectedSquadId:"all"}),b_=(n,s,i,o)=>{const u=Am(He(s),1,i,o);return{...n,units:[...n.units,u]}},k_=(n,s)=>{const i=n.units.filter(u=>u.id!==s),o=n.squads.map(u=>({...u,unitIds:u.unitIds.filter(d=>d!==s)}));return{...n,units:i,squads:o}},__=(n,s)=>{const i={id:`squad-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,name:s,unitIds:[]};return{...n,squads:[...n.squads,i]}},j_=(n,s)=>{const i=n.squads.filter(o=>o.id!==s);return{...n,squads:i}},N_=(n,s,i)=>{const o=n.units.find(d=>d.id===s);if(!o)throw new Error(`Unit with id ${s} not found`);if(o.unitType==="general")throw new Error("General units cannot be added to squads");const u=n.squads.map(d=>d.id===i?{...d,unitIds:[...d.unitIds,s]}:d);return{...n,squads:u}},S_=(n,s,i)=>{const o=n.squads.map(u=>u.id===i?{...u,unitIds:u.unitIds.filter(d=>d!==s)}:u);return{...n,squads:o}},E_=(n,s,i)=>{const o=n.squads.map(u=>u.id===s?{...u,name:i}:u);return{...n,squads:o}},C_=(n,s)=>({...n,selectedSquadId:s}),T_=4,jf={armies:{1:_f(),2:_f()},levelUpUnits:[]},$_=ca({name:"army",initialState:jf,reducers:{reset:()=>jf,addUnitToArmy:(n,s)=>{const{playerId:i,unitType:o,level:u,customName:d}=s.payload;n.armies[i]=b_(n.armies[i],o,u,d)},addCapturedUnitToArmy:(n,s)=>{const{playerId:i,unit:o}=s.payload;n.armies[i].units.push({...o,playerId:i})},removeUnitFromArmy:(n,s)=>{const{playerId:i,unitId:o}=s.payload;n.armies[i]=k_(n.armies[i],o)},addExperienceToUnit:(n,s)=>{const{playerId:i,unitId:o,experience:u}=s.payload,d=n.armies[i].units.find(m=>m.id===o);if(!d)throw new Error(`Unit not found: ${o}`);const p=h_(d,u);d.experience+=u,n.levelUpUnits.push(...p)},applyLevelUp:(n,s)=>{const{playerId:i,unitId:o,newLevel:u,availablePoints:d,statAllocation:p}=s.payload,m=n.armies[i].units.find(h=>h.id===o);if(!m)throw new Error(`Unit not found: ${o}`);m.level=u,m.availablePoints=m.availablePoints+d,m.maxHealth=m.maxHealth+p.health,m.attack=m.attack+p.attack,m.defense=m.defense+p.defense,n.levelUpUnits=n.levelUpUnits.filter(h=>!(h.unitId===o&&h.newLevel===u))},learnAttack:(n,s)=>{const{playerId:i,unitId:o,attackId:u}=s.payload,d=n.armies[i].units.find(p=>p.id===o);if(!d)throw new Error(`Unit not found: ${o}`);if(d.attacks.length>=T_)throw new Error(`Unit ${o} has no available attack slots`);if(d.attacks.includes(u))throw new Error(`Unit ${o} already knows attack ${u}`);d.attacks.push(u)},forgetAttack:(n,s)=>{const{playerId:i,unitId:o,attackId:u}=s.payload,d=n.armies[i].units.find(m=>m.id===o);if(!d)throw new Error(`Unit not found: ${o}`);const p=d.attacks.indexOf(u);if(p===-1)throw new Error(`Unit ${o} does not know attack ${u}`);d.attacks.splice(p,1)},createSquad:(n,s)=>{const{playerId:i,name:o}=s.payload;n.armies[i]=__(n.armies[i],o)},deleteSquad:(n,s)=>{const{playerId:i,squadId:o}=s.payload;n.armies[i]=j_(n.armies[i],o)},addUnitToSquad:(n,s)=>{const{playerId:i,unitId:o,squadId:u}=s.payload;n.armies[i]=N_(n.armies[i],o,u)},removeUnitFromSquad:(n,s)=>{const{playerId:i,unitId:o,squadId:u}=s.payload;n.armies[i]=S_(n.armies[i],o,u)},renameSquad:(n,s)=>{const{playerId:i,squadId:o,newName:u}=s.payload;n.armies[i]=E_(n.armies[i],o,u)},selectSquad:(n,s)=>{const{playerId:i,squadId:o}=s.payload;n.armies[i]=C_(n.armies[i],o)}}}),{actions:tt,reducer:P_}=$_,at=(n,s)=>(Math.abs(n.q-s.q)+Math.abs(n.q+n.r-s.q-s.r)+Math.abs(n.r-s.r))/2,I_=n=>[{q:1,r:0},{q:1,r:-1},{q:0,r:-1},{q:-1,r:0},{q:-1,r:1},{q:0,r:1}].map(i=>({q:n.q+i.q,r:n.r+i.r})),Vl=(n,s)=>{const i=[];for(let o=-s;o<=s;o++){const u=Math.max(-s,-o-s),d=Math.min(s,-o+s);for(let p=u;p<=d;p++)i.push({q:n.q+o,r:n.r+p})}return i},En=(n,s)=>Math.abs(n.q)<=s&&Math.abs(n.r)<=s&&Math.abs(n.q+n.r)<=s,A_=(n,s)=>{const i=s.q-n.q,o=s.r-n.r,u=Math.sqrt(i*i+o*o);return u===0?{q:0,r:0}:{q:Math.round(i/u),r:Math.round(o/u)}};var yt=(n=>(n.GRASS="grass",n.WATER="water",n.MOUNTAIN="mountain",n.FOREST="forest",n))(yt||{}),$t=(n=>(n.SELECTION="selection",n.UNIT_PLACEMENT="unit_placement",n))($t||{}),pt=(n=>(n.GENERAL_DEFEATED="general_defeated",n.ALL_UNITS_DEFEATED="all_units_defeated",n.SURRENDER="surrender",n.DRAW="draw",n))(pt||{}),le=(n=>(n.WAITING="waiting",n.MOVEMENT="movement",n.ATTACK="attack",n))(le||{}),wt=(n=>(n.GENERAL="general",n.UNITS="units",n))(wt||{});const Er=n=>n.health<=0,rt=n=>n.unitType==="general",tn=n=>!n.hasMoved&&He(n.unitType).movement.range>0,Hn=n=>!n.hasAttacked&&n.attacks.length>0,M_=n=>({...n,hasMoved:!1,hasAttacked:!1}),L_=(n,s)=>n.map(i=>i.id===s.playerId?{...i,units:[...i.units,s.id]}:i),Nf=(n,s)=>n.map(i=>({...i,units:i.units.filter(o=>o!==s)})),R_=(n,s)=>{const i=[];for(let o=0;o<n.count;o++){const u=O_(n.ratios),d=$l(He(u),s,1);i.push(d)}return i},O_=n=>{const s=[];for(const[o,u]of ql(n))if(u)for(let d=0;d<u;d++)s.push(o);if(s.length===0)throw new Error("No unit types specified");const i=Math.floor(Math.random()*s.length);return s[i]},Sf=n=>{const s=n.find(i=>rt(i));return s&&Er(s)?!0:n.every(i=>Er(i))},U_=(n,s)=>{const i=n[0]?.units.map(p=>s[p]).filter(Boolean)||[],o=n[1]?.units.map(p=>s[p]).filter(Boolean)||[],u=Sf(i),d=Sf(o);if(u&&d)return{condition:pt.DRAW};if(d){const p=o.find(h=>rt(h));return{playerId:1,condition:p&&Er(p)?pt.GENERAL_DEFEATED:pt.ALL_UNITS_DEFEATED}}if(u){const p=i.find(h=>rt(h));return{playerId:2,condition:p&&Er(p)?pt.GENERAL_DEFEATED:pt.ALL_UNITS_DEFEATED}}return null},D_=(n,s)=>{const i=F_(n),o=z_(n,i),u=q_(o,s);return{map:i,units:o,players:u}},F_=n=>{const s=n.radius,i=[];if("tiles"in n.terrain)return n.terrain.tiles.map((u,d)=>u.map((p,m)=>p?{position:{q:m-s,r:d-s},terrain:p,unitId:null}:null));const o=V_(n.terrain.ratios);for(let u=-s;u<=s;u++)for(let d=-s;d<=s;d++)if(Math.abs(d)<=s&&Math.abs(u)<=s&&Math.abs(d+u)<=s){const p=u+s,m=d+s;i[p]||(i[p]=[]);const h=K_(o);i[p][m]={position:{q:d,r:u},terrain:h,unitId:null}}return i},Ef=(n,s,i)=>{let o,u=0;const d=50;do{const p=Math.floor(Math.random()*(s-1))+1,m=Math.floor(Math.random()*(s*2+1))-s;Math.abs(p)<=s&&Math.abs(m)<=s&&Math.abs(p+m)<=s?o={q:p,r:m}:o={q:1,r:0},u++}while(u<d&&(!sn(o,n,i)||$r(n,o)));return u<d?o:{q:1,r:0}},z_=(n,s)=>{const i={};if("tiles"in n.enemyUnits){const u=ql(n.enemyUnits.tiles);for(const[d,p]of u)for(const m of p){const h=$l(He(d),2,1);Gn(s,h,m),i[h.id]=h}}else if("squads"in n.enemyUnits){const u=Math.floor(Math.random()*n.enemyUnits.squads.length),d=n.enemyUnits.squads[u];for(const{unitType:p,level:m,position:h}of d){const y=$l(He(p),2,m);Gn(s,y,h||Ef(s,n.radius,y)),i[y.id]=y}}else if("ratios"in n.enemyUnits){const u=R_(n.enemyUnits,2);u.forEach(d=>{i[d.id]=d}),u.forEach((d,p)=>{const m=Ef(s,n.radius,d);Gn(s,d,m)})}else throw new Error("Invalid enemy units configuration");return i},q_=(n,s)=>s.map(o=>({...o,units:Object.values(n).filter(u=>u.playerId===o.id).map(u=>u.id)})),_r=(n,s)=>{for(let i=0;i<n.length;i++)for(let o=0;o<n[i].length;o++){const u=n[i][o];u&&u.unitId===s&&(u.unitId=null)}},Gn=(n,s,i)=>{const o=Ql(n),u=i.r+o,d=i.q+o;n[u]&&n[u][d]&&(sn(i,n,s)?n[u][d].unitId=s.id:console.warn("Cannot place unit on non-walkable tile"))},Kl=(n,s)=>{const i=Ql(s),o=n.r+i,u=n.q+i;return s[o][u]||null},B_=(n,s,i)=>{const o=Kl(n,s);return o&&o.unitId?i[o.unitId]:null},sn=(n,s,i)=>{const o=Kl(n,s);if(!o)return!1;const u=He(i.unitType);switch(o.terrain){case yt.WATER:return u.movement.canSwim||u.movement.canFly;case yt.MOUNTAIN:return u.movement.canClimb||u.movement.canFly;case yt.GRASS:case yt.FOREST:return u.movement.canWalk;default:{const d=o.terrain;throw new Error(`Unknown terrain type: ${d}`)}}},Me=(n,s)=>{for(let i=0;i<n.length;i++)for(let o=0;o<n[i].length;o++){const u=n[i][o];if(u&&u.unitId===s)return u.position}return null},W_=(n,s)=>{const i=[];for(let o=0;o<n.length;o++)for(let u=0;u<n[o].length;u++){const d=n[o][u];d&&d.unitId&&s(d.unitId)&&i.push(d.position)}return i},H_=(n,s,i)=>{const o=W_(n,u=>s[u]&&s[u].playerId===i&&s[u].unitType==="general");return o.length>0?o[0]:null},$r=(n,s)=>{const i=Ql(n),o=n[s.r+i]?.[s.q+i]?.unitId;return o||null},G_=(n,s)=>{const i=[];return s.forEach(o=>{const u=$r(n,o);u&&i.push(u)}),i},Ql=n=>Math.floor((n.length-1)/2),V_=n=>{const s=[];for(const[i,o]of ql(n))for(let u=0;u<o;u++)s.push(i);return s},K_=n=>{const s=Math.floor(Math.random()*n.length);return n[s]},Q_=(n,s)=>{const i={id:`effect-${s.modifierType}-${Date.now()}`,type:s.modifierType,value:s.value,duration:s.duration};return{...n,modifiers:[...n.modifiers,i]}},Y_=(n,s)=>({...n,health:Math.min(n.maxHealth,n.health+n.maxHealth*s.value)}),X_=(n,s)=>{const i={id:`poison-${Date.now()}`,type:de.POISON,duration:s.duration};return{...n,modifiers:[...n.modifiers,i]}},Z_=(n,s)=>{const i={id:`stun-${Date.now()}`,type:de.STUN,duration:s.duration};return{...n,modifiers:[...n.modifiers,i]}},J_=n=>n.modifiers.find(i=>i.type===de.POISON)?Math.floor(n.maxHealth/8):0,ej=(n,s)=>{const i={id:`sleep-${Date.now()}`,type:de.SLEEP,duration:s.duration};return{...n,modifiers:[...n.modifiers,i]}},tj=(n,s)=>{const i={id:`burn-${Date.now()}`,type:de.BURN,damage:s.damage,duration:s.duration};return{...n,modifiers:[...n.modifiers,i]}},nj=n=>n.modifiers.filter(i=>i.type===de.BURN).reduce((i,o)=>o.type===de.BURN&&"damage"in o?i+o.damage:i,0),rj=(n,s)=>{const i={id:`bleed-${Date.now()}`,type:de.BLEED,damage:s.damage,duration:s.duration};return{...n,modifiers:[...n.modifiers,i]}},sj=n=>n.modifiers.filter(i=>i.type===de.BLEED).reduce((i,o)=>o.type===de.BLEED&&"damage"in o?i+o.damage:i,0),ij=(n,s)=>{const i={id:`shield-${Date.now()}`,type:de.SHIELD,amount:s.amount,duration:s.duration};return{...n,modifiers:[...n.modifiers,i]}},aj=(n,s)=>{const i={id:`reflect-${Date.now()}`,type:de.REFLECT,percentage:s.percentage,duration:s.duration};return{...n,modifiers:[...n.modifiers,i]}},oj=(n,s,i)=>{const o=Math.floor(n.length/2);return En(i.position,o)?sn(i.position,n,s)?$r(n,i.position)?(console.warn("Teleport target position is occupied"),n):(_r(n,s.id),Gn(n,s,i.position),n):(console.warn("Teleport target position is not walkable"),n):(console.warn("Teleport target position is outside map boundaries"),n)},lj=(n,s)=>{const i={id:`root-${Date.now()}`,type:de.ROOT,duration:s.duration};return{...n,modifiers:[...n.modifiers,i]}},cj=(n,s)=>{const i={id:`haste-${Date.now()}`,type:de.HASTE,bonusRange:s.bonusRange,duration:s.duration};return{...n,modifiers:[...n.modifiers,i]}},uj=(n,s)=>{const i={id:`drain-${Date.now()}`,type:de.DRAIN,amount:s.amount,duration:s.duration};return{...n,modifiers:[...n.modifiers,i]}},dj=(n,s,i,o)=>{const u=Me(n,s.id),d=Me(n,i.id);if(!u||!d)throw new Error("Unit not found on map");const p=A_(d,u),m={q:u.q+p.q*o.distance,r:u.r+p.r*o.distance},h=Math.floor(n.length/2);return En(m,h)?sn(m,n,s)?$r(n,m)?(console.warn("Push would move unit to occupied tile"),n):(_r(n,s.id),Gn(n,s,m),n):(console.warn("Push would move unit to non-walkable terrain"),n):(console.warn("Push would move unit outside map boundaries"),n)},fj=n=>{const s=n.modifiers.map(i=>i.duration===null?i:i.duration<=1?null:{...i,duration:i.duration-1}).filter(i=>i!==null);return{...n,modifiers:s}},Mm="all-grass",Lm="All Grass",Rm="Test",Om=3,Um={ratios:{grass:1}},Dm={count:0,ratios:{}},Fm=100,pj={id:Mm,name:Lm,description:Rm,radius:Om,terrain:Um,enemyUnits:Dm,pointLimit:Fm},mj=Object.freeze(Object.defineProperty({__proto__:null,default:pj,description:Rm,enemyUnits:Dm,id:Mm,name:Lm,pointLimit:Fm,radius:Om,terrain:Um},Symbol.toStringTag,{value:"Module"})),zm="all-water",qm="All Water",Bm="Test",Wm=3,Hm={ratios:{water:1}},Gm={count:0,ratios:{}},Vm=100,hj={id:zm,name:qm,description:Bm,radius:Wm,terrain:Hm,enemyUnits:Gm,pointLimit:Vm},gj=Object.freeze(Object.defineProperty({__proto__:null,default:hj,description:Bm,enemyUnits:Gm,id:zm,name:qm,pointLimit:Vm,radius:Wm,terrain:Hm},Symbol.toStringTag,{value:"Module"})),Km="ancient-forest",Qm="Ancient Forest",Ym="A dense forest with advanced enemies.",Xm=3,Zm=300,Jm={ratios:{grass:1,mountain:1,forest:10}},eh={squads:[[{unitType:"shadow-of-the-forest",level:5}],[{unitType:"shadow-of-the-forest",level:3},{unitType:"umbralis",level:2}],[{unitType:"umbralis",level:3},{unitType:"umbralis",level:3},{unitType:"mycelin",level:3}]]},vj={id:Km,name:Qm,description:Ym,radius:Xm,pointLimit:Zm,terrain:Jm,enemyUnits:eh},yj=Object.freeze(Object.defineProperty({__proto__:null,default:vj,description:Ym,enemyUnits:eh,id:Km,name:Qm,pointLimit:Zm,radius:Xm,terrain:Jm},Symbol.toStringTag,{value:"Module"})),th="forest-clearing",nh="Forest Clearing",rh="A mystical clearing in the forest.",sh=4,ih=500,ah={tiles:[[null,null,null,null,"forest","forest","forest","forest","forest"],[null,null,null,"forest","grass","grass","grass","grass","forest"],[null,null,"forest","grass","grass","grass","grass","grass","forest"],[null,"forest","grass","grass","water","water","water","grass","forest"],["forest","grass","grass","water","water","grass","grass","grass","forest"],["forest","grass","grass","water","water","water","grass","forest",null],["forest","grass","grass","grass","grass","grass","forest",null,null],["forest","grass","grass","grass","grass","forest",null,null,null],["forest","forest","forest","forest","forest",null,null,null,null]]},oh={tiles:{"syltharion-the-verdant-warden":[{q:1,r:0}],whisperhart:[{q:3,r:-1},{q:2,r:0},{q:2,r:1}]}},xj={id:th,name:nh,description:rh,radius:sh,pointLimit:ih,terrain:ah,enemyUnits:oh},wj=Object.freeze(Object.defineProperty({__proto__:null,default:xj,description:rh,enemyUnits:oh,id:th,name:nh,pointLimit:ih,radius:sh,terrain:ah},Symbol.toStringTag,{value:"Module"})),lh="training-field",ch="Training Field",uh="A small training field for basic tactics.",dh=3,fh=1e3,ph={ratios:{grass:10,water:1,forest:1}},mh={squads:[[{unitType:"mossfeather",level:3}]]},bj={id:lh,name:ch,description:uh,radius:dh,pointLimit:fh,terrain:ph,enemyUnits:mh},kj=Object.freeze(Object.defineProperty({__proto__:null,default:bj,description:uh,enemyUnits:mh,id:lh,name:ch,pointLimit:fh,radius:dh,terrain:ph},Symbol.toStringTag,{value:"Module"})),hh="western-field",gh="Western Field",vh="A small field to the west of town.",yh=3,xh=300,wh={ratios:{grass:10,water:1,forest:4}},bh={squads:[[{unitType:"mossfeather",level:5},{unitType:"embermew",level:5}],[{unitType:"suntusk",level:3},{unitType:"suntusk",level:3},{unitType:"suntusk",level:3}]]},_j={id:hh,name:gh,description:vh,radius:yh,pointLimit:xh,terrain:wh,enemyUnits:bh},jj=Object.freeze(Object.defineProperty({__proto__:null,default:_j,description:vh,enemyUnits:bh,id:hh,name:gh,pointLimit:xh,radius:yh,terrain:wh},Symbol.toStringTag,{value:"Module"})),kh="western-forest",_h="Western Forest",jh="A dense forest to the west of town.",Nh=3,Sh=300,Eh={ratios:{grass:4,water:1,forest:10}},Ch={squads:[[{unitType:"whisperhart",level:5},{unitType:"mycelin",level:5},{unitType:"mycelin",level:5},{unitType:"mycelin",level:5}],[{unitType:"shadow-of-the-forest",level:5},{unitType:"mossfeather",level:5},{unitType:"mossfeather",level:5}]]},Nj={id:kh,name:_h,description:jh,radius:Nh,pointLimit:Sh,terrain:Eh,enemyUnits:Ch},Sj=Object.freeze(Object.defineProperty({__proto__:null,default:Nj,description:jh,enemyUnits:Ch,id:kh,name:_h,pointLimit:Sh,radius:Nh,terrain:Eh},Symbol.toStringTag,{value:"Module"})),Th="woodland-lakes",$h="Woodland Lakes",Ph="A lake in the woods.",Ih=5,Ah=300,Mh={ratios:{water:1,forest:1}},Lh={squads:[[{unitType:"mireglow-guardian",level:5}],[{unitType:"ripplemask",level:5}],[{unitType:"verdant-fangfin",level:5}]]},Ej={id:Th,name:$h,description:Ph,radius:Ih,pointLimit:Ah,terrain:Mh,enemyUnits:Lh},Cj=Object.freeze(Object.defineProperty({__proto__:null,default:Ej,description:Ph,enemyUnits:Lh,id:Th,name:$h,pointLimit:Ah,radius:Ih,terrain:Mh},Symbol.toStringTag,{value:"Module"})),Rh={};let Oh=!1;const Uh=()=>{Object.entries(Object.assign({"./battleConfigs/all-grass.json":mj,"./battleConfigs/all-water.json":gj,"./battleConfigs/ancient-forest.json":yj,"./battleConfigs/forest-clearing.json":wj,"./battleConfigs/training-field.json":kj,"./battleConfigs/western-field.json":jj,"./battleConfigs/western-forest.json":Sj,"./battleConfigs/woodland-lakes.json":Cj})).forEach(([s,i])=>{try{const o=s.replace("./battleConfigs/","").replace(".json",""),u=i;if(!u.id){console.warn(`Battle config ${o} is missing id field, skipping`);return}Rh[u.id]=u}catch(o){console.error(`Failed to process battle config from ${s}:`,o)}}),Oh=!0},Dh=n=>{Oh||Uh();const s=Rh[n];if(!s)throw new Error(`Location not found: ${n}`);return s};window.hydrateBattleConfigs=Uh;const Cf={players:[{id:1,name:"Player 1",units:[],isActive:!0},{id:2,name:"Player 2",units:[],isActive:!1}],map:[],units:{},currentPlayerId:1,selectedUnit:null,selectionMode:le.MOVEMENT,gamePhase:$t.UNIT_PLACEMENT,placementMode:wt.GENERAL,turnNumber:1,radius:3,selectedAttack:null,aiPlayers:[{playerId:1,strategy:"Improved Strategic",isEnabled:!1},{playerId:2,strategy:"Improved Strategic",isEnabled:!1}],winner:null,kills:[],captures:[],experienceGains:[],chatMessages:[]},Tj=ca({name:"battle",initialState:Cf,reducers:{reset:()=>Cf,placeUnit:(n,s)=>{const{armyUnit:i,position:o}=s.payload,{map:u}=n,d={...i,health:i.maxHealth,hasMoved:!1,hasAttacked:!1,modifiers:[]};if(!sn(o,u,d)){console.warn("Cannot place unit on non-walkable tile");return}Gn(u,d,o);const p=L_(n.players,d),m={...n.units,[d.id]:d};n.map=u,n.players=p,n.units=m,n.selectionMode=le.MOVEMENT,n.gamePhase=$t.UNIT_PLACEMENT},removePlacedUnit:(n,s)=>{const i=s.payload,{map:o}=n;_r(o,i);const u=Nf(n.players,i),d={...n.units};delete d[i],n.map=o,n.players=u,n.units=d,n.selectedUnit=null,n.selectionMode=le.MOVEMENT,n.gamePhase=$t.UNIT_PLACEMENT},finishUnitPlacement:n=>{const s=Object.values(n.units).filter(u=>u.playerId===n.currentPlayerId),i=s.some(u=>u.unitType==="general"),o=s.some(u=>u.unitType!=="general");if(!i)throw new Error("Cannot finish placement without a general");if(!o)throw new Error("Cannot finish placement without at least one other unit");n.currentPlayerId,n.gamePhase=$t.SELECTION,n.selectedUnit=null,n.selectionMode=le.MOVEMENT,n.turnNumber=1,n.currentPlayerId=1},setPlacementMode:(n,s)=>{n.placementMode=s.payload},startBattle:(n,s)=>{const i=s.payload,o=Dh(i),{map:u,units:d,players:p}=D_(o,n.players);n.gamePhase=$t.UNIT_PLACEMENT,n.turnNumber=1,n.currentPlayerId=1,n.map=u,n.selectionMode=le.MOVEMENT,n.placementMode=wt.GENERAL,n.radius=o.radius,n.selectedAttack=null,n.players=p,n.units=d,n.aiPlayers=n.aiPlayers.map(m=>({...m,isEnabled:m.playerId===2})),n.winner=null,n.kills=[],n.experienceGains=[],n.chatMessages=[],n.captures=[]},deselectUnit:n=>{n.selectionMode=le.WAITING,n.selectedUnit=null},startMovement:(n,s)=>{const i=n.units[s.payload.unitId];if(!tn(i)){console.warn("Unit cannot move");return}n.selectionMode=le.MOVEMENT,n.selectedUnit=s.payload.unitId},startAttacking:(n,s)=>{const i=n.units[s.payload.unitId];if(!Hn(i)){console.warn("Unit cannot attack");return}n.selectedUnit=i.id,n.selectionMode=le.ATTACK,n.selectedAttack=s.payload.attackId},finishAttacking:(n,s)=>{const i=n.units[s.payload.unitId];tn(i)?n.selectionMode=le.MOVEMENT:n.selectionMode=le.WAITING,n.selectedAttack=null,n.units={...n.units,[i.id]:{...i,hasAttacked:!0}}},startCapture:(n,s)=>{const i=n.units[s.payload.unitId];if(!rt(i)){console.warn("Only generals can capture units");return}n.selectedUnit=i.id,n.selectionMode=le.ATTACK,n.selectedAttack=null},finishCapturing:(n,s)=>{const i=n.units[s.payload.generalId];tn(i)?n.selectionMode=le.MOVEMENT:n.selectionMode=le.WAITING,n.units={...n.units,[i.id]:{...i,hasAttacked:!0}}},inspectUnit:(n,s)=>{const i=n.units[s.payload.unitId];n.selectionMode=le.WAITING,n.selectedUnit=i.id},moveUnit:(n,s)=>{const{unitId:i,newPosition:o}=s.payload,{map:u}=n,d=n.units[i];if(!sn(o,n.map,d)){console.warn("Cannot move unit to non-walkable tile");return}if($r(n.map,o)){console.warn("Cannot move unit to occupied tile");return}if(!tn(d)){console.warn("Unit has already moved this turn");return}_r(u,d.id),Gn(u,d,o);const m={...d,hasMoved:!0},h={...n.units,[m.id]:m};n.map=u,n.units=h;const y=m.attacks[0];m.hasAttacked||!y?n.selectionMode=le.WAITING:rt(m)?n.selectionMode=le.ATTACK:(n.selectionMode=le.ATTACK,n.selectedAttack=y)},endActionCleanup:n=>{Object.values(n.units).filter(Er).forEach(i=>{_r(n.map,i.id)}),n.captures.forEach(i=>{_r(n.map,i),n.players=Nf(n.players,i),delete n.units[i]})},endTurnInternal:(n,s)=>{const{newPlayerId:i,newTurnNumber:o}=s.payload,u=Object.values(n.units).filter(d=>d.playerId===i).map(fj).map(M_).reduce((d,p)=>(d[p.id]=p,d),{...n.units});n.currentPlayerId=i,n.turnNumber=o,n.selectedUnit=null,n.selectionMode=le.WAITING,n.units=u},setAIPlayer:(n,s)=>{const{playerId:i,isEnabled:o,strategy:u}=s.payload,d=n.aiPlayers.find(p=>p.playerId===i);d&&(d.isEnabled=o,u&&(d.strategy=u))},setWinner:(n,s)=>{n.winner=s.payload},surrender:n=>{const i=n.currentPlayerId===1?2:1;n.winner={playerId:i,condition:pt.SURRENDER}},recordExperienceGain:(n,s)=>{n.experienceGains.push(s.payload)},applyDamage:(n,s)=>{const{targetId:i,damage:o,attackerId:u}=s.payload,d=n.units[i],p=u?n.units[u]:void 0,m={...d,health:Math.max(0,d.health-o)};n.units={...n.units,[m.id]:m},Er(m)&&p&&n.kills.push([p.id,m.id])},captureUnit:(n,s)=>{n.captures.push(s.payload.unitId)},applyEffect:(n,s)=>{const{targetId:i,attackerId:o,effect:u}=s.payload,d=n.units[i],p=n.units[o];switch(u.type){case D.APPLY_MODIFIER:{const m=Q_(d,u);n.units={...n.units,[i]:m};break}case D.HEAL:{const m=Y_(d,u);n.units={...n.units,[i]:m};break}case D.PUSH:{const m=dj(n.map,d,p,u);n.map=m;break}case D.POISON:{const m=X_(d,u);n.units={...n.units,[d.id]:m};break}case D.STUN:{const m=Z_(d,u);n.units={...n.units,[d.id]:m};break}case D.SLEEP:{const m=ej(d,u);n.units={...n.units,[d.id]:m};break}case D.BURN:{const m=tj(d,u);n.units={...n.units,[d.id]:m};break}case D.BLEED:{const m=rj(d,u);n.units={...n.units,[d.id]:m};break}case D.SHIELD:{const m=ij(d,u);n.units={...n.units,[d.id]:m};break}case D.REFLECT:{const m=aj(d,u);n.units={...n.units,[d.id]:m};break}case D.TELEPORT:{const m=oj(n.map,d,u);n.map=m;break}case D.ROOT:{const m=lj(d,u);n.units={...n.units,[d.id]:m};break}case D.HASTE:{const m=cj(d,u);n.units={...n.units,[d.id]:m};break}case D.DRAIN:{const m=uj(d,u);n.units={...n.units,[d.id]:m};break}case D.CREATE_TERRAIN:{console.warn("Create terrain effect not yet implemented");break}case D.CRITICAL_STRIKE:{console.warn("Critical strike effect not yet implemented");break}case D.ARMOR_PIERCE:{console.warn("Armor pierce effect not yet implemented");break}default:{const m=u;throw new Error(`Unknown effect type: ${m}`)}}},addChatMessage:(n,s)=>{const{sender:i,content:o}=s.payload,u={id:`msg-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,sender:i,content:o,timestamp:Date.now()};n.chatMessages.push(u)}}}),{actions:be,reducer:$j}=Tj;var nt=(n=>(n.MENU="menu",n.NARRATIVE="narrative",n.OVERWORLD="overworld",n.ARMY_MANAGEMENT="army_management",n.PLAYING="playing",n.BATTLE_END="battle_end",n))(nt||{}),Yl=(n=>(n.WELCOME="welcome",n))(Yl||{}),Qi=(n=>(n.WON="won",n.LOST="lost",n.DRAW="draw",n))(Qi||{});const Pj={status:nt.MENU,hasStarted:!1,playerName:null,currentNarrative:null,battleHistory:[]},Ij=ca({name:"game",initialState:Pj,reducers:{startGame:n=>{n.hasStarted=!0,n.playerName=null,n.battleHistory=[],n.status=nt.NARRATIVE,n.currentNarrative=Yl.WELCOME},startOverworld:n=>{n.status=nt.OVERWORLD},startArmyManagement:n=>{n.status=nt.ARMY_MANAGEMENT},startBattle:n=>{n.status=nt.PLAYING},returnToMenu:n=>{n.status=nt.MENU},endBattle:(n,s)=>{n.battleHistory.push(s.payload),n.status=nt.BATTLE_END},resetGame:n=>{n.status=nt.OVERWORLD},setPlayerName:(n,s)=>{n.playerName=s.payload},endNarrative:n=>{n.currentNarrative=null,n.status=nt.OVERWORLD}}}),{actions:xt,reducer:Aj}=Ij,Mj=[{id:"town",name:"Town",type:"town",description:"A peaceful town where your journey begins",visualPosition:{x:1712,y:1e3}},{id:"field-1",name:"Training Field",type:"field",description:"A small training ground for basic tactics",visualPosition:{x:590*2+512,y:690*2},battleConfigId:"training-field"},{id:"forest-1",name:"Ancient Forest",type:"forest",description:"A challenging forest with advanced enemies",visualPosition:{x:650*2+512,y:350*2},battleConfigId:"ancient-forest"},{id:"field-2",name:"Western Field",type:"field",description:"A field to the west of town",visualPosition:{x:350*2+512,y:740*2},battleConfigId:"western-field"},{id:"forest-2",name:"Western Forest",type:"forest",description:"A forest to the west of town",visualPosition:{x:952,y:540*2},battleConfigId:"western-forest"},{id:"lake-1",name:"Woodland Lakes",type:"forest",description:"A lake in the woods",visualPosition:{x:852,y:360},battleConfigId:"woodland-lakes"},{id:"forest-clearing",name:"Forest Clearing",type:"dungeon",description:"A mystical clearing in the forest",visualPosition:{x:420*2+512,y:180},battleConfigId:"forest-clearing"}],Lj=[{from:"town",to:"field-1",unlockingLocationId:"town"},{from:"town",to:"forest-1",unlockingLocationId:"field-1"},{from:"field-1",to:"field-2",unlockingLocationId:"forest-1"},{from:"field-2",to:"forest-2",unlockingLocationId:"field-2"},{from:"forest-2",to:"lake-1",unlockingLocationId:"forest-2"},{from:"lake-1",to:"forest-clearing",unlockingLocationId:"lake-1"},{from:"forest-1",to:"lake-1",unlockingLocationId:"lake-1"}],yl={locations:Mj,connections:Lj},Rj=()=>{const n=yl.connections.filter(s=>s.unlockingLocationId==="town").map(s=>`${s.from}:${s.to}`);return{locations:yl.locations,connections:yl.connections,playerLocationId:"town",unlockedConnections:n}},Tf=Rj(),Oj=ca({name:"overworld",initialState:Tf,reducers:{reset:()=>Tf,moveToLocation:(n,s)=>{const i=s.payload;n.locations.find(u=>u.id===i)&&n.connections.some(d=>n.unlockedConnections.includes(`${d.from}:${d.to}`)||n.unlockedConnections.includes(`${d.to}:${d.from}`))&&(n.playerLocationId=i)},unlockConnections:(n,s)=>{const i=n.connections.filter(o=>o.unlockingLocationId===s.payload).map(o=>`${o.from}:${o.to}`);n.unlockedConnections.push(...i)}}}),{actions:Cr,reducer:Uj}=Oj,Dj=Lf({battle:$j,army:P_,overworld:Uj,game:Aj}),Fj={key:"root",storage:bk},zj=Q1(),qj=uk(Fj,Dj),Es=N1({reducer:qj,middleware:n=>n({serializableCheck:{ignoredActions:["persist/PERSIST","persist/REHYDRATE","listenerMiddleware/add"]}}).prepend(zj.middleware)}),Bj=gk(Es),Wj=n=>{const s=Fh(n,de.ATTACK_MULTIPLIER);return Math.floor(n.attack*s)},Hj=n=>{const s=Fh(n,de.DEFENSE_MULTIPLIER);return Math.floor(n.defense*s)},Fh=(n,s)=>{const i=n.modifiers.filter(m=>m.type===s);if(i.length===0)return 1;let o=0,u=0;i.forEach(m=>{m.value>0?o+=m.value:m.value<0&&(u+=Math.abs(m.value))});const d=1+o,p=Math.pow(.5,u);if(o>0&&u>0){const m=o-u;return m>0?1+m:m<0?Math.pow(.5,Math.abs(m)):1}return o>0?d:p},Gj=([n,s])=>{let i=0;for(let o=0;o<n;o++)i+=Math.floor(Math.random()*s)+1;return i},Vj=(n,s,i)=>{if(i.power[0]===0)return{damage:0,meta:{isCritical:!1,affinityMultiplier:1,damageType:"attack",attackId:i.id}};const o=1,u=o>1,d=He(n.unitType).affinity,p=He(s.unitType).affinity,m=Kj(d,p),h=Wj(n),y=Hj(s),v=h/y,_=Gj(i.power);return{damage:Math.ceil(o*m*v*_/2),meta:{isCritical:u,affinityMultiplier:m,damageType:"attack",attackId:i.id}}},Kj=(n,s)=>n===Ee.WATER&&s===Ee.FIRE||n===Ee.LIGHTNING&&s===Ee.WATER||n===Ee.EARTH&&s===Ee.LIGHTNING||n===Ee.FIRE&&s===Ee.EARTH?1.5:n===Ee.FIRE&&s===Ee.WATER||n===Ee.WATER&&s===Ee.LIGHTNING||n===Ee.LIGHTNING&&s===Ee.EARTH||n===Ee.EARTH&&s===Ee.FIRE?.75:(n===Ee.AIR||s===Ee.AIR||n===s,1),Tr=n=>{if(rt(n))return 0;const s=He(n.unitType),i=n.maxHealth+n.attack+n.defense+s.movement.range*10,o=(s.movement.canSwim?10:0)+(s.movement.canClimb?10:0)+(s.movement.canFly?10:0),u=n.attacks.length*10,d=i+o+u;return Math.max(1,Math.round(d))},zh=n=>n.reduce((s,i)=>s+Tr(i),0),Qj=50,Yj=(n,s,i)=>{let o=0,u=0;for(const d of s){const p=Tr(d),m=d.level/n.level,h=Math.ceil(p*m);o+=h,u++}return i&&(o+=Qj),{unitId:n.id,experience:o,kills:u,survived:i}},Xj=(n,s,i)=>n.units.map(o=>{const u=s[o],d=He(u.unitType).levelingConfig;if(d&&u.level===d.maxLevel)return null;const p=u.health>0,m=i.filter(([h,y])=>h===o).map(([h,y])=>s[y]);return Yj(u,m,p)}).filter(Boolean),qh="aqua-jet",Bh="Aqua Jet",Wh="Shoots a high-pressure stream of water at a distant target",Hh=["ranged",2,4],Gh="3d3",Zj={id:qh,name:Bh,description:Wh,pattern:Hh,power:Gh},Jj=Object.freeze(Object.defineProperty({__proto__:null,default:Zj,description:Wh,id:qh,name:Bh,pattern:Hh,power:Gh},Symbol.toStringTag,{value:"Module"})),Vh="armor-shatter",Kh="Armor Shatter",Qh="A devastating blow that ignores most of the target's defense",Yh=["direct"],Xh="3d3",Zh=[{type:"armor_pierce",percentage:75}],eN={id:Vh,name:Kh,description:Qh,pattern:Yh,power:Xh,effects:Zh},tN=Object.freeze(Object.defineProperty({__proto__:null,default:eN,description:Qh,effects:Zh,id:Vh,name:Kh,pattern:Yh,power:Xh},Symbol.toStringTag,{value:"Module"})),Jh="assassinate",eg="Assassinate",tg="A precise strike that guarantees a critical hit",ng=["direct"],rg="2d4",sg=[{type:"critical_strike",multiplier:2}],nN={id:Jh,name:eg,description:tg,pattern:ng,power:rg,effects:sg},rN=Object.freeze(Object.defineProperty({__proto__:null,default:nN,description:tg,effects:sg,id:Jh,name:eg,pattern:ng,power:rg},Symbol.toStringTag,{value:"Module"})),ig="barrier",ag="Barrier",og="Creates a protective barrier that absorbs incoming damage",lg=["self"],cg="0d0",ug=[{type:"shield",amount:15,duration:5}],sN={id:ig,name:ag,description:og,pattern:lg,power:cg,effects:ug},iN=Object.freeze(Object.defineProperty({__proto__:null,default:sN,description:og,effects:ug,id:ig,name:ag,pattern:lg,power:cg},Symbol.toStringTag,{value:"Module"})),dg="blink",fg="Blink",pg="Instantly teleports the caster to a nearby position",mg=["self"],hg="0d0",gg=[{type:"teleport",position:{q:0,r:0}}],aN={id:dg,name:fg,description:pg,pattern:mg,power:hg,effects:gg},oN=Object.freeze(Object.defineProperty({__proto__:null,default:aN,description:pg,effects:gg,id:dg,name:fg,pattern:mg,power:hg},Symbol.toStringTag,{value:"Module"})),vg="bubble-burst",yg="Bubble Burst",xg="Creates a cluster of explosive bubbles that detonate on impact",wg=["aoe",2,3,1],bg="5d2",lN={id:vg,name:yg,description:xg,pattern:wg,power:bg},cN=Object.freeze(Object.defineProperty({__proto__:null,default:lN,description:xg,id:vg,name:yg,pattern:wg,power:bg},Symbol.toStringTag,{value:"Module"})),kg="entangle",_g="Entangle",jg="Roots the target in place with vines and thorns",Ng=["direct"],Sg="1d4",Eg=[{type:"root",duration:3}],uN={id:kg,name:_g,description:jg,pattern:Ng,power:Sg,effects:Eg},dN=Object.freeze(Object.defineProperty({__proto__:null,default:uN,description:jg,effects:Eg,id:kg,name:_g,pattern:Ng,power:Sg},Symbol.toStringTag,{value:"Module"})),Cg="fang-strike",Tg="Fang Strike",$g="A sharp bite attack using the fish's prominent fangs",Pg=["direct"],Ig="2d4",fN={id:Cg,name:Tg,description:$g,pattern:Pg,power:Ig},pN=Object.freeze(Object.defineProperty({__proto__:null,default:fN,description:$g,id:Cg,name:Tg,pattern:Pg,power:Ig},Symbol.toStringTag,{value:"Module"})),Ag="fin-slash",Mg="Fin Slash",Lg="A sweeping attack with razor-sharp fins that cuts through multiple enemies",Rg=["line",1,1,3],Og="3d3",mN={id:Ag,name:Mg,description:Lg,pattern:Rg,power:Og},hN=Object.freeze(Object.defineProperty({__proto__:null,default:mN,description:Lg,id:Ag,name:Mg,pattern:Rg,power:Og},Symbol.toStringTag,{value:"Module"})),Ug="fire-breath",Dg="Fire Breath",Fg="A devastating blast of flames that burns enemies over time",zg=["ranged",1,3],qg="2d4",Bg=[{type:"burn",damage:3,duration:4}],gN={id:Ug,name:Dg,description:Fg,pattern:zg,power:qg,effects:Bg},vN=Object.freeze(Object.defineProperty({__proto__:null,default:gN,description:Fg,effects:Bg,id:Ug,name:Dg,pattern:zg,power:qg},Symbol.toStringTag,{value:"Module"})),Wg="fireball",Hg="Fireball",Gg="Area of effect attack",Vg=["aoe",2,2,1],Kg="1d6",yN={id:Wg,name:Hg,description:Gg,pattern:Vg,power:Kg},xN=Object.freeze(Object.defineProperty({__proto__:null,default:yN,description:Gg,id:Wg,name:Hg,pattern:Vg,power:Kg},Symbol.toStringTag,{value:"Module"})),Qg="forest-awakening",Yg="Forest Awakening",Xg="Awakens the ancient power of the forest, creating a devastating torus of natural energy that damages and weakens enemies",Zg=["torus",1,3],Jg="4d6",ev=[{type:"apply_modifier",modifierType:"attack_multiplier",value:1,duration:2},{type:"apply_modifier",modifierType:"defense_multiplier",value:1,duration:2}],wN={id:Qg,name:Yg,description:Xg,pattern:Zg,power:Jg,effects:ev},bN=Object.freeze(Object.defineProperty({__proto__:null,default:wN,description:Xg,effects:ev,id:Qg,name:Yg,pattern:Zg,power:Jg},Symbol.toStringTag,{value:"Module"})),tv="headbutt",nv="Headbutt",rv="A powerful headbutt attack",sv=["direct"],iv="2d3",kN={id:tv,name:nv,description:rv,pattern:sv,power:iv},_N=Object.freeze(Object.defineProperty({__proto__:null,default:kN,description:rv,id:tv,name:nv,pattern:sv,power:iv},Symbol.toStringTag,{value:"Module"})),av="inner-fire",ov="Inner Fire",lv="Ignites inner strength, doubling attack power",cv=["self"],uv="0d0",dv=[{type:"apply_modifier",modifierType:"attack_multiplier",value:1}],jN={id:av,name:ov,description:lv,pattern:cv,power:uv,effects:dv},NN=Object.freeze(Object.defineProperty({__proto__:null,default:jN,description:lv,effects:dv,id:av,name:ov,pattern:cv,power:uv},Symbol.toStringTag,{value:"Module"})),fv="kick",pv="Kick",mv="A powerful kick that can knock back the target",hv=["direct"],gv="1d6",vv=[{type:"push",distance:1}],SN={id:fv,name:pv,description:mv,pattern:hv,power:gv,effects:vv},EN=Object.freeze(Object.defineProperty({__proto__:null,default:SN,description:mv,effects:vv,id:fv,name:pv,pattern:hv,power:gv},Symbol.toStringTag,{value:"Module"})),yv="leap-crush",xv="Leap Crush",wv="Leaps onto enemies with crushing force",bv=["ranged",2,2],kv="2d4",CN={id:yv,name:xv,description:wv,pattern:bv,power:kv},TN=Object.freeze(Object.defineProperty({__proto__:null,default:CN,description:wv,id:yv,name:xv,pattern:bv,power:kv},Symbol.toStringTag,{value:"Module"})),_v="life-drain",jv="Life Drain",Nv="Drains life force from the target, healing the caster",Sv=["direct"],Ev="1d6",Cv=[{type:"drain",amount:5,duration:2}],$N={id:_v,name:jv,description:Nv,pattern:Sv,power:Ev,effects:Cv},PN=Object.freeze(Object.defineProperty({__proto__:null,default:$N,description:Nv,effects:Cv,id:_v,name:jv,pattern:Sv,power:Ev},Symbol.toStringTag,{value:"Module"})),Tv="lightning-strike",$v="Lightning Strike",Pv="A powerful electrical attack that stuns the target with crackling energy",Iv=["direct"],Av="2d6",Mv=[{type:"stun",duration:2}],IN={id:Tv,name:$v,description:Pv,pattern:Iv,power:Av,effects:Mv},AN=Object.freeze(Object.defineProperty({__proto__:null,default:IN,description:Pv,effects:Mv,id:Tv,name:$v,pattern:Iv,power:Av},Symbol.toStringTag,{value:"Module"})),Lv="lily-pad-bounce",Rv="Lily Pad Bounce",Ov="Leaps onto enemies using water lily pads for momentum",Uv=["ranged",2,3],Dv="2d4",MN={id:Lv,name:Rv,description:Ov,pattern:Uv,power:Dv},LN=Object.freeze(Object.defineProperty({__proto__:null,default:MN,description:Ov,id:Lv,name:Rv,pattern:Uv,power:Dv},Symbol.toStringTag,{value:"Module"})),Fv="lullaby",zv="Lullaby",qv="A soothing melody that puts enemies to sleep",Bv=["torus",0,2],Wv="0d0",Hv=[{type:"sleep",duration:3}],RN={id:Fv,name:zv,description:qv,pattern:Bv,power:Wv,effects:Hv},ON=Object.freeze(Object.defineProperty({__proto__:null,default:RN,description:qv,effects:Hv,id:Fv,name:zv,pattern:Bv,power:Wv},Symbol.toStringTag,{value:"Module"})),Gv="mire-splash",Vv="Mire Splash",Kv="Splashes muddy water in a wide area, drenching enemies",Qv=["torus",1,1],Yv="6d1",UN={id:Gv,name:Vv,description:Kv,pattern:Qv,power:Yv},DN=Object.freeze(Object.defineProperty({__proto__:null,default:UN,description:Kv,id:Gv,name:Vv,pattern:Qv,power:Yv},Symbol.toStringTag,{value:"Module"})),Xv="mirror-aura",Zv="Mirror Aura",Jv="Creates a reflective aura that returns a portion of incoming damage to attackers",ey=["self"],ty="0d0",ny=[{type:"reflect",percentage:50,duration:4}],FN={id:Xv,name:Zv,description:Jv,pattern:ey,power:ty,effects:ny},zN=Object.freeze(Object.defineProperty({__proto__:null,default:FN,description:Jv,effects:ny,id:Xv,name:Zv,pattern:ey,power:ty},Symbol.toStringTag,{value:"Module"})),ry="moonbeam",sy="Moonbeam",iy="A beam of moonlight that deals damage to all enemies",ay=["line",1,1,2],oy="1d4",qN={id:ry,name:sy,description:iy,pattern:ay,power:oy},BN=Object.freeze(Object.defineProperty({__proto__:null,default:qN,description:iy,id:ry,name:sy,pattern:ay,power:oy},Symbol.toStringTag,{value:"Module"})),ly="peck",cy="Peck",uy="A quick peck with deadly intent",dy=["direct"],fy="1d4",WN={id:ly,name:cy,description:uy,pattern:dy,power:fy},HN=Object.freeze(Object.defineProperty({__proto__:null,default:WN,description:uy,id:ly,name:cy,pattern:dy,power:fy},Symbol.toStringTag,{value:"Module"})),py="razor-claws",my="Razor Claws",hy="Sharp claws that cause deep wounds that continue to bleed",gy=["direct"],vy="1d6",yy=[{type:"bleed",damage:2,duration:3}],GN={id:py,name:my,description:hy,pattern:gy,power:vy,effects:yy},VN=Object.freeze(Object.defineProperty({__proto__:null,default:GN,description:hy,effects:yy,id:py,name:my,pattern:gy,power:vy},Symbol.toStringTag,{value:"Module"})),xy="ripple-wave",wy="Ripple Wave",by="Creates expanding water ripples that affect nearby enemies",ky=["torus",1,2],_y="3d2",KN={id:xy,name:wy,description:by,pattern:ky,power:_y},QN=Object.freeze(Object.defineProperty({__proto__:null,default:KN,description:by,id:xy,name:wy,pattern:ky,power:_y},Symbol.toStringTag,{value:"Module"})),jy="scratch",Ny="Scratch",Sy="A quick swipe with deadly intent",Ey=["direct"],Cy="1d6",YN={id:jy,name:Ny,description:Sy,pattern:Ey,power:Cy},XN=Object.freeze(Object.defineProperty({__proto__:null,default:YN,description:Sy,id:jy,name:Ny,pattern:Ey,power:Cy},Symbol.toStringTag,{value:"Module"})),Ty="slash",$y="slash",Py="Direct melee attack",Iy=["direct"],Ay="1d6",ZN={id:Ty,name:$y,description:Py,pattern:Iy,power:Ay},JN=Object.freeze(Object.defineProperty({__proto__:null,default:ZN,description:Py,id:Ty,name:$y,pattern:Iy,power:Ay},Symbol.toStringTag,{value:"Module"})),My="spore-bomb",Ly="Spore Bomb",Ry="A spore bomb that explodes on contact",Oy=["aoe",2,2,1],Uy="1d4",eS={id:My,name:Ly,description:Ry,pattern:Oy,power:Uy},tS=Object.freeze(Object.defineProperty({__proto__:null,default:eS,description:Ry,id:My,name:Ly,pattern:Oy,power:Uy},Symbol.toStringTag,{value:"Module"})),Dy="stealth-dive",Fy="Stealth Dive",zy="Dives underwater and emerges behind enemies for a surprise attack",qy=["ranged",1,3],By="2d6",nS={id:Dy,name:Fy,description:zy,pattern:qy,power:By},rS=Object.freeze(Object.defineProperty({__proto__:null,default:nS,description:zy,id:Dy,name:Fy,pattern:qy,power:By},Symbol.toStringTag,{value:"Module"})),Wy="stone-wall",Hy="Stone Wall",Gy="Creates a barrier of stone to block enemy movement",Vy=["aoe",1,2,1],Ky="0d0",Qy=[{type:"create_terrain",terrainType:"mountain",positions:[],duration:5}],sS={id:Wy,name:Hy,description:Gy,pattern:Vy,power:Ky,effects:Qy},iS=Object.freeze(Object.defineProperty({__proto__:null,default:sS,description:Gy,effects:Qy,id:Wy,name:Hy,pattern:Vy,power:Ky},Symbol.toStringTag,{value:"Module"})),Yy="tail-slap",Xy="Tail Slap",Zy="A powerful tail strike that affects nearby enemies",Jy=["torus",1,1],ex="4d2",aS={id:Yy,name:Xy,description:Zy,pattern:Jy,power:ex},oS=Object.freeze(Object.defineProperty({__proto__:null,default:aS,description:Zy,id:Yy,name:Xy,pattern:Jy,power:ex},Symbol.toStringTag,{value:"Module"})),tx="thorn-barrage",nx="Thorn Barrage",rx="Launches a volley of poisonous thorns that pierce through armor and poison enemies",sx=["ranged",2,5],ix="2d4",ax=[{type:"poison",duration:3}],lS={id:tx,name:nx,description:rx,pattern:sx,power:ix,effects:ax},cS=Object.freeze(Object.defineProperty({__proto__:null,default:lS,description:rx,effects:ax,id:tx,name:nx,pattern:sx,power:ix},Symbol.toStringTag,{value:"Module"})),ox="tongue-lash",lx="Tongue Lash",cx="Extends a long, sticky tongue to strike enemies at range",ux=["ranged",2,4],dx="1d4",fx=[{type:"apply_modifier",modifierType:"defense_multiplier",value:-1}],uS={id:ox,name:lx,description:cx,pattern:ux,power:dx,effects:fx},dS=Object.freeze(Object.defineProperty({__proto__:null,default:uS,description:cx,effects:fx,id:ox,name:lx,pattern:ux,power:dx},Symbol.toStringTag,{value:"Module"})),px="toxic-croak",mx="Toxic Croak",hx="Emits a poisonous croak that affects nearby enemies",gx=["torus",0,1],vx="0d0",yx=[{type:"poison",duration:3}],fS={id:px,name:mx,description:hx,pattern:gx,power:vx,effects:yx},pS=Object.freeze(Object.defineProperty({__proto__:null,default:fS,description:hx,effects:yx,id:px,name:mx,pattern:gx,power:vx},Symbol.toStringTag,{value:"Module"})),xx="verdant-storm",wx="Verdant Storm",bx="Summons a devastating storm of wind and thorns that ravages all enemies in a wide area",kx=["aoe",2,4,2],_x="3d6",jx=[{type:"push",distance:1}],mS={id:xx,name:wx,description:bx,pattern:kx,power:_x,effects:jx},hS=Object.freeze(Object.defineProperty({__proto__:null,default:mS,description:bx,effects:jx,id:xx,name:wx,pattern:kx,power:_x},Symbol.toStringTag,{value:"Module"})),Nx="warden-embrace",Sx="Warden Embrace",Ex="Channels the power of the forest to heal wounds and strengthen defenses",Cx=["self"],Tx="0d0",$x=[{type:"heal",value:.25},{type:"apply_modifier",modifierType:"defense_multiplier",value:1,duration:3}],gS={id:Nx,name:Sx,description:Ex,pattern:Cx,power:Tx,effects:$x},vS=Object.freeze(Object.defineProperty({__proto__:null,default:gS,description:Ex,effects:$x,id:Nx,name:Sx,pattern:Cx,power:Tx},Symbol.toStringTag,{value:"Module"})),Px="water-bomb",Ix="Water Bomb",Ax="Throws a concentrated water bomb that explodes on impact",Mx=["aoe",2,4,1],Lx="4d2",yS={id:Px,name:Ix,description:Ax,pattern:Mx,power:Lx},xS=Object.freeze(Object.defineProperty({__proto__:null,default:yS,description:Ax,id:Px,name:Ix,pattern:Mx,power:Lx},Symbol.toStringTag,{value:"Module"})),Rx="water-swipe",Ox="Water Swipe",Ux="A quick swipe with water-soaked claws",Dx=["direct"],Fx="1d6",wS={id:Rx,name:Ox,description:Ux,pattern:Dx,power:Fx},bS=Object.freeze(Object.defineProperty({__proto__:null,default:wS,description:Ux,id:Rx,name:Ox,pattern:Dx,power:Fx},Symbol.toStringTag,{value:"Module"})),zx="whirlpool",qx="Whirlpool",Bx="Creates a spinning vortex of water that pulls in surrounding enemies",Wx=["torus",2,3],Hx="6d2",kS={id:zx,name:qx,description:Bx,pattern:Wx,power:Hx},_S=Object.freeze(Object.defineProperty({__proto__:null,default:kS,description:Bx,id:zx,name:qx,pattern:Wx,power:Hx},Symbol.toStringTag,{value:"Module"})),Gx="wind-rush",Vx="Wind Rush",Kx="Grants incredible speed and agility, increasing movement range",Qx=["self"],Yx="0d0",Xx=[{type:"haste",bonusRange:2,duration:3}],jS={id:Gx,name:Vx,description:Kx,pattern:Qx,power:Yx,effects:Xx},NS=Object.freeze(Object.defineProperty({__proto__:null,default:jS,description:Kx,effects:Xx,id:Gx,name:Vx,pattern:Qx,power:Yx},Symbol.toStringTag,{value:"Module"})),SS=()=>({id:"direct",needsTarget:!0,meta:{Range:1},getTargets:(n,s,i)=>[s],validateAttack:(n,s)=>at(n,s)===1}),ES=()=>({id:"self",needsTarget:!0,meta:{Self:!0},getTargets:(n,s,i)=>[n],validateAttack:(n,s)=>at(n,s)===0}),CS=(n,s)=>({id:"ranged",needsTarget:!0,meta:{Range:n===s?n:`${n}-${s}`},getTargets:(i,o,u)=>[o],validateAttack:(i,o)=>{const u=at(i,o);return u>=n&&u<=s}}),TS=(n,s,i)=>({id:"aoe",needsTarget:!1,meta:{Range:n===s?n:`${n}-${s}`,Area:i},getTargets:(o,u,d)=>Vl(u,i).filter(m=>En(m,d)),validateAttack:(o,u)=>{const d=at(o,u);return d>=n&&d<=s}}),$S=(n,s,i)=>({id:"line",needsTarget:!1,meta:{Range:n===s?n:`${n}-${s}`,Distance:i},getTargets:(o,u,d)=>{const p=[],m=u.q-o.q,h=u.r-o.r,y={q:Math.sign(m),r:Math.sign(h)};if(at(o,u)!==1)return p;for(let v=1;v<=i;v++){const _={q:o.q+y.q*v,r:o.r+y.r*v};En(_,d)&&p.push(_)}return p},validateAttack:(o,u)=>{const d=at(o,u);return d>=n&&d<=s}}),PS=(n,s)=>({id:"torus",needsTarget:!1,meta:{Torus:n===s?n:`${n}-${s}`},getTargets:(i,o,u)=>Vl(i,s).filter(p=>En(p,u)).filter(p=>{const m=at(i,p);return m>=n&&m<=s}),validateAttack:(i,o)=>at(i,o)===0}),IS=n=>{const[s,...i]=n;switch(s){case"direct":if(i.length!==0)throw new Error("Direct pattern requires exactly zero arguments");return SS();case"self":if(i.length!==0)throw new Error("Self pattern requires exactly zero arguments");return ES();case"ranged":if(i.length!==2||typeof i[0]!="number"||typeof i[1]!="number")throw new Error("Ranged pattern requires exactly two number arguments (minRange, maxRange)");return CS(i[0],i[1]);case"aoe":if(i.length!==3||typeof i[0]!="number"||typeof i[1]!="number"||typeof i[2]!="number")throw new Error("AOE pattern requires exactly three number arguments (minRange, maxRang, areaEffect)");return TS(i[0],i[1],i[2]);case"line":if(i.length!==3||typeof i[0]!="number"||typeof i[1]!="number"||typeof i[2]!="number")throw new Error("Line pattern requires exactly three number arguments (minRange, maxRange, lineLength)");return $S(i[0],i[1],i[2]);case"torus":if(i.length!==2||typeof i[0]!="number"||typeof i[1]!="number")throw new Error("Torus pattern requires exactly two number arguments (innerRadius, outerRadius)");return PS(i[0],i[1]);default:throw new Error(`Unknown attack pattern type: ${s}`)}},AS=n=>n?n.map(s=>{switch(s.type){case"apply_modifier":if(!s.modifierType||s.value===void 0)throw new Error("apply_modifier effect requires modifierType and value");return{type:D.APPLY_MODIFIER,value:s.value,duration:s.duration??null,modifierType:s.modifierType};case"heal":if(s.value===void 0)throw new Error("heal effect requires value");return{type:D.HEAL,value:s.value};case"push":if(s.distance===void 0)throw new Error("push effect requires distance");return{type:D.PUSH,distance:s.distance};case"poison":if(s.duration===void 0)throw new Error("poison effect requires duration");return{type:D.POISON,duration:s.duration};case"stun":if(s.duration===void 0)throw new Error("stun effect requires duration");return{type:D.STUN,duration:s.duration};case"sleep":if(s.duration===void 0)throw new Error("sleep effect requires duration");return{type:D.SLEEP,duration:s.duration};case"burn":if(s.damage===void 0||s.duration===void 0)throw new Error("burn effect requires damage and duration");return{type:D.BURN,damage:s.damage,duration:s.duration};case"bleed":if(s.damage===void 0||s.duration===void 0)throw new Error("bleed effect requires damage and duration");return{type:D.BLEED,damage:s.damage,duration:s.duration};case"shield":if(s.amount===void 0||s.duration===void 0)throw new Error("shield effect requires amount and duration");return{type:D.SHIELD,amount:s.amount,duration:s.duration};case"reflect":if(s.percentage===void 0||s.duration===void 0)throw new Error("reflect effect requires percentage and duration");return{type:D.REFLECT,percentage:s.percentage,duration:s.duration};case"teleport":if(!s.position)throw new Error("teleport effect requires position");return{type:D.TELEPORT,position:s.position};case"root":if(s.duration===void 0)throw new Error("root effect requires duration");return{type:D.ROOT,duration:s.duration};case"haste":if(s.bonusRange===void 0||s.duration===void 0)throw new Error("haste effect requires bonusRange and duration");return{type:D.HASTE,bonusRange:s.bonusRange,duration:s.duration};case"drain":if(s.amount===void 0||s.duration===void 0)throw new Error("drain effect requires amount and duration");return{type:D.DRAIN,amount:s.amount,duration:s.duration};case"create_terrain":if(!s.terrainType||!s.positions||s.duration===void 0)throw new Error("create_terrain effect requires terrainType, positions, and duration");return{type:D.CREATE_TERRAIN,terrainType:s.terrainType,positions:s.positions,duration:s.duration};case"critical_strike":if(s.multiplier===void 0)throw new Error("critical_strike effect requires multiplier");return{type:D.CRITICAL_STRIKE,multiplier:s.multiplier};case"armor_pierce":if(s.percentage===void 0)throw new Error("armor_pierce effect requires percentage");return{type:D.ARMOR_PIERCE,percentage:s.percentage};default:throw new Error(`Unknown effect type: ${s.type}`)}}):[],MS=n=>{const s=IS(n.pattern),[i,o]=n.power.split("d").map(Number),u=AS(n.effects);return{id:n.id,name:n.name,description:n.description,pattern:s,power:[i,o],effects:u.length>0?u:[]}},Zx={};let Jx=!1;const ew=()=>{Object.entries(Object.assign({"./attackConfigs/aqua-jet.json":Jj,"./attackConfigs/armor-shatter.json":tN,"./attackConfigs/assassinate.json":rN,"./attackConfigs/barrier.json":iN,"./attackConfigs/blink.json":oN,"./attackConfigs/bubble-burst.json":cN,"./attackConfigs/entangle.json":dN,"./attackConfigs/fang-strike.json":pN,"./attackConfigs/fin-slash.json":hN,"./attackConfigs/fire-breath.json":vN,"./attackConfigs/fireball.json":xN,"./attackConfigs/forest-awakening.json":bN,"./attackConfigs/headbutt.json":_N,"./attackConfigs/inner-fire.json":NN,"./attackConfigs/kick.json":EN,"./attackConfigs/leap-crush.json":TN,"./attackConfigs/life-drain.json":PN,"./attackConfigs/lightning-strike.json":AN,"./attackConfigs/lily-pad-bounce.json":LN,"./attackConfigs/lullaby.json":ON,"./attackConfigs/mire-splash.json":DN,"./attackConfigs/mirror-aura.json":zN,"./attackConfigs/moonbeam.json":BN,"./attackConfigs/peck.json":HN,"./attackConfigs/razor-claws.json":VN,"./attackConfigs/ripple-wave.json":QN,"./attackConfigs/scratch.json":XN,"./attackConfigs/slash.json":JN,"./attackConfigs/spore-bomb.json":tS,"./attackConfigs/stealth-dive.json":rS,"./attackConfigs/stone-wall.json":iS,"./attackConfigs/tail-slap.json":oS,"./attackConfigs/thorn-barrage.json":cS,"./attackConfigs/tongue-lash.json":dS,"./attackConfigs/toxic-croak.json":pS,"./attackConfigs/verdant-storm.json":hS,"./attackConfigs/warden-embrace.json":vS,"./attackConfigs/water-bomb.json":xS,"./attackConfigs/water-swipe.json":bS,"./attackConfigs/whirlpool.json":_S,"./attackConfigs/wind-rush.json":NS})).forEach(([s,i])=>{try{const o=s.replace("./attackConfigs/","").replace(".json",""),u=i;if(!u.id){console.warn(`Attack config ${o} is missing id field, skipping`);return}if(u.id!==o){console.warn(`Attack config ${o} has id field ${u.id}, skipping`);return}Zx[u.id]=MS(u)}catch(o){console.error(`Failed to process attack config from ${s}:`,o)}}),Jx=!0},Sn=n=>{Jx||ew();const s=Zx[n];if(!s)throw new Error(`Attack type not found: ${n}`);return s},nn=n=>n.map(s=>Sn(s));window.hydrateAttackConfigs=ew;const LS=()=>(n,s)=>{localStorage.removeItem("persist:root"),n(tt.reset()),n(be.reset()),n(Cr.reset()),n(xt.startGame())},RS=n=>(s,i)=>{switch(n.step){case 1:s(xt.setPlayerName(n.playerName)),s(tt.addUnitToArmy({playerId:1,unitType:"general",level:1,customName:n.playerName}));break;case 2:s(tt.addUnitToArmy({playerId:1,unitType:"stone-monkey",level:5,customName:n.stoneMonkeyName}));break;case 3:s(xt.endNarrative());break}},OS=()=>(n,s)=>{const i=s(),o=new Date().toISOString().slice(0,19).replace(/:/g,"-"),d=JSON.stringify({version:"1.0.0",timestamp:o,state:i}),p=new Blob([d],{type:"application/json"}),m=URL.createObjectURL(p),h=document.createElement("a");h.href=m,h.download=`wildlight-tactics-${o}.json`,document.body.appendChild(h),h.click(),document.body.removeChild(h),URL.revokeObjectURL(m)},US=n=>async(s,i)=>{try{const o=await n.text(),u=JSON.parse(o);if(!u.version||!u.state)throw new Error("Invalid save file format");localStorage.setItem("persist:root",JSON.stringify(u.state)),s(xt.startOverworld())}catch(o){throw console.error("Failed to load save file:",o),new Error("Failed to load save file. Please check the file format.")}},DS=n=>(s,i)=>{if(!n.battleConfigId)throw new Error("Location does not have a battle config");s(be.startBattle(n.battleConfigId)),s(xt.startBattle())},FS=(n,s)=>(i,o)=>{const u=o(),d=u.battle.units[n],p=Me(u.battle.map,d.id);if(!p){console.error("Attacker not found on map");return}if(!u.battle.selectedAttack){console.error("No attack name provided");return}const m=Sn(u.battle.selectedAttack),h=m.pattern.getTargets(p,s,u.battle.radius);G_(u.battle.map,h).map(v=>u.battle.units[v]).forEach(v=>{const{damage:_,meta:$}=Vj(d,v,m);i(be.applyDamage({targetId:v.id,damage:_,attackerId:d.id,meta:$})),m.effects.forEach(S=>{i(be.applyEffect({targetId:v.id,attackerId:d.id,effect:S}))})}),i(be.finishAttacking({unitId:d.id})),setTimeout(()=>{i(be.endActionCleanup()),i(Xl())},1e3)},zS=(n,s)=>(i,o)=>{const u=o(),d=u.battle.units[n],p=u.battle.units[s];if(Object.values(u.battle.units).some(h=>h.playerId===p.playerId&&h.unitType==="general")){console.warn("Cannot capture units when opposing team has a general");return}i(be.captureUnit({unitId:p.id})),i(tt.addCapturedUnitToArmy({playerId:d.playerId,unit:p})),i(be.finishCapturing({generalId:d.id})),setTimeout(()=>{i(be.endActionCleanup()),i(Xl())},1e3)},qS=()=>(n,s)=>{const i=s(),o=i.battle.currentPlayerId===1?2:1,u=i.battle.currentPlayerId===2?i.battle.turnNumber+1:i.battle.turnNumber;Object.values(i.battle.units).filter(p=>p.playerId===o).forEach(p=>{const m=J_(p);m>0&&n(be.applyDamage({targetId:p.id,damage:m,meta:{damageType:"poison"}}));const h=nj(p);h>0&&n(be.applyDamage({targetId:p.id,damage:h,meta:{damageType:"burn"}}));const y=sj(p);y>0&&n(be.applyDamage({targetId:p.id,damage:y,meta:{damageType:"bleed"}}))}),n(be.endTurnInternal({newPlayerId:o,newTurnNumber:u})),n(Xl())},Xl=()=>(n,s)=>{const i=s(),o=U_(i.battle.players,i.battle.units);o&&n(be.setWinner(o)),setTimeout(()=>{const u=s(),d=u.battle.winner;if(!d)return;n(BS()),d.condition!==pt.DRAW&&d.playerId===1&&n(Cr.unlockConnections(u.overworld.playerLocationId));const p={id:`battle_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,timestamp:new Date().toISOString(),locationId:u.overworld.playerLocationId,outcome:d.condition===pt.DRAW?Qi.DRAW:d.playerId===1?Qi.WON:Qi.LOST,turnNumber:u.battle.turnNumber,unitsKilled:u.battle.kills.length,unitsCaptured:u.battle.captures.length};n(xt.endBattle(p))},1e3)},BS=()=>(n,s)=>{const i=s(),{winner:o,kills:u,units:d,players:p}=i.battle;if(!o||o.condition===pt.DRAW||o.playerId!==1)return;const m=Xj(p.find(h=>h.id===o.playerId),d,u);for(const h of m)n(be.recordExperienceGain(h)),n(tt.addExperienceToUnit({playerId:o.playerId,unitId:h.unitId,experience:h.experience}))},Pr=Ub,Ge=zb,WS=Dl.withTypes(),Cs=()=>{const n=Pr();return{startGame:()=>n(LS()),submitWelcomeDialog:s=>n(RS(s)),saveGame:()=>n(OS()),loadGame:s=>n(US(s)),enterLocation:s=>n(DS(s)),executeAttack:(s,i)=>n(FS(s,i)),captureUnit:(s,i)=>n(zS(s,i)),endTurn:()=>n(qS())}},js=(n,s,i=[])=>{const o=Pr();A.useEffect(()=>o(WS({type:n,effect:s})),[o,n,s,i])};window.reloadOverworld=()=>{Es.dispatch(Cr.reset())};window.unlockAllConnection=()=>{Es.getState().overworld.locations.forEach(s=>{Es.dispatch(Cr.unlockConnections(s.id))})};const Ir=()=>Ge(n=>n.game),fa=()=>{const n=Pr();return{startOverworld:()=>n(xt.startOverworld()),startArmyManagement:()=>n(xt.startArmyManagement()),startBattle:()=>n(xt.startBattle()),returnToMenu:()=>n(xt.returnToMenu()),endBattle:()=>n(xt.endBattle()),setPlayerName:s=>n(xt.setPlayerName(s)),endNarrative:()=>n(xt.endNarrative())}},HS=Wt([(n,s)=>n.army.armies[s],(n,s)=>n.battle.units,(n,s)=>s,(n,s)=>n.army.armies[s].selectedSquadId],(n,s,i,o)=>{const u=Object.values(s).filter(h=>h.playerId===i),d=n.units.find(h=>h.unitType==="general")||null,p=n.units.filter(h=>{if(h.unitType==="general")return!1;if(o!="all")if(o=="unassigned"){if(n.squads.some(_=>_.unitIds.includes(h.id)))return!1}else{const v=n.squads.find(_=>_.id===o);if(v&&!v.unitIds.includes(h.id))return!1}return!u.some(v=>v.unitType===h.unitType&&v.name===h.name)}),m=zh(u);return{general:d,availableArmyUnits:p,placedUnits:u,selectedSquadId:o,totalPlacedCost:m}}),tw=n=>Ge(s=>s.army.armies[n].units),nw=n=>Ge(s=>s.army.armies[n].squads),rw=(n,s)=>Ge(i=>i.army.armies[n].units.find(o=>o.id===s)),sw=n=>Ge(s=>HS(s,n)),GS=()=>Ge(n=>n.army.levelUpUnits[0]),pa=()=>{const n=Pr();return{addUnitToArmy:(s,i,o)=>n(tt.addUnitToArmy({playerId:s,unitType:i,level:o})),removeUnitFromArmy:(s,i)=>n(tt.removeUnitFromArmy({playerId:s,unitId:i})),createSquad:(s,i)=>n(tt.createSquad({playerId:s,name:i})),deleteSquad:(s,i)=>n(tt.deleteSquad({playerId:s,squadId:i})),addUnitToSquad:(s,i,o)=>n(tt.addUnitToSquad({playerId:s,unitId:i,squadId:o})),removeUnitFromSquad:(s,i,o)=>n(tt.removeUnitFromSquad({playerId:s,unitId:i,squadId:o})),renameSquad:(s,i,o)=>n(tt.renameSquad({playerId:s,squadId:i,newName:o})),selectSquad:(s,i)=>n(tt.selectSquad({playerId:s,squadId:i})),applyLevelUp:s=>n(tt.applyLevelUp(s)),learnAttack:(s,i,o)=>n(tt.learnAttack({playerId:s,unitId:i,attackId:o})),forgetAttack:(s,i,o)=>n(tt.forgetAttack({playerId:s,unitId:i,attackId:o}))}},VS=({units:n,squads:s,selectedSquadId:i,setSelectedSquadId:o,newSquadName:u,setNewSquadName:d,handleCreateSquad:p,editingSquadId:m,editingSquadName:h,setEditingSquadName:y,handleSaveSquadName:v,handleRemoveUnitFromSquad:_,handleCancelEditSquad:$,handleStartEditSquad:S,handleDeleteSquad:M})=>{const L=i?s.find(U=>U.id===i):null;return l.jsx("div",{className:"card bg-base-100 shadow-xl",children:l.jsxs("div",{className:"card-body",children:[l.jsxs("div",{className:"mb-4",children:[l.jsx("label",{className:"label",children:l.jsx("span",{className:"label-text",children:"Select Squad to View"})}),l.jsxs("select",{className:"select select-bordered w-full",value:i||"",onChange:U=>o(U.target.value),children:[l.jsx("option",{value:"",children:"All Units"}),s.map(U=>l.jsx("option",{value:U.id,children:U.name},U.id))]})]}),!i&&l.jsxs("div",{className:"join mb-4",children:[l.jsx("input",{type:"text",placeholder:"Squad name",className:"input input-bordered join-item flex-1",value:u,onChange:U=>d(U.target.value),onKeyDown:U=>U.key==="Enter"&&p()}),l.jsx("button",{className:"btn btn-primary join-item",onClick:p,disabled:!u.trim(),children:"Create Squad"})]}),L&&l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"flex items-center justify-between mb-3",children:m===L.id?l.jsxs("div",{className:"join flex-1",children:[l.jsx("input",{type:"text",className:"input input-bordered join-item flex-1",value:h,onChange:U=>y(U.target.value),onKeyDown:U=>U.key==="Enter"&&v()}),l.jsx("button",{className:"btn btn-success btn-sm join-item",onClick:v,children:"Save"}),l.jsx("button",{className:"btn btn-outline btn-sm join-item",onClick:$,children:"Cancel"})]}):l.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[l.jsx("h4",{className:"flex-1 font-bold text-lg",children:L.name}),l.jsx("button",{className:"btn btn-ghost btn-xs",onClick:()=>S(L),children:""}),l.jsx("button",{className:"btn btn-ghost btn-xs text-error",onClick:()=>M(L.id),children:""})]})}),l.jsxs("div",{className:"stats stats-horizontal w-full",children:[l.jsxs("div",{className:"stat",children:[l.jsx("div",{className:"stat-title",children:"Units"}),l.jsx("div",{className:"stat-value text-primary",children:n.filter(U=>L.unitIds.includes(U.id)).length})]}),l.jsxs("div",{className:"stat",children:[l.jsx("div",{className:"stat-title",children:"Total Cost"}),l.jsx("div",{className:"stat-value text-secondary",children:zh(n.filter(U=>L.unitIds.includes(U.id)))})]})]})]})]})})};function KS({title:n,titleId:s,...i},o){return A.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:o,"aria-labelledby":s},i),n?A.createElement("title",{id:s},n):null,A.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"}))}const QS=A.forwardRef(KS);function YS({title:n,titleId:s,...i},o){return A.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:o,"aria-labelledby":s},i),n?A.createElement("title",{id:s},n):null,A.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.5 4.5 21 12m0 0-7.5 7.5M21 12H3"}))}const XS=A.forwardRef(YS);function ZS({title:n,titleId:s,...i},o){return A.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:o,"aria-labelledby":s},i),n?A.createElement("title",{id:s},n):null,A.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"}))}const JS=A.forwardRef(ZS);function eE({title:n,titleId:s,...i},o){return A.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:o,"aria-labelledby":s},i),n?A.createElement("title",{id:s},n):null,A.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 12 8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"}))}const tE=A.forwardRef(eE);function nE({title:n,titleId:s,...i},o){return A.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:o,"aria-labelledby":s},i),n?A.createElement("title",{id:s},n):null,A.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m11.25 11.25.041-.02a.75.75 0 0 1 1.063.852l-.708 2.836a.75.75 0 0 0 1.063.853l.041-.021M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9-3.75h.008v.008H12V8.25Z"}))}const rE=A.forwardRef(nE);function sE({title:n,titleId:s,...i},o){return A.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:o,"aria-labelledby":s},i),n?A.createElement("title",{id:s},n):null,A.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607ZM13.5 10.5h-6"}))}const iE=A.forwardRef(sE);function aE({title:n,titleId:s,...i},o){return A.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:o,"aria-labelledby":s},i),n?A.createElement("title",{id:s},n):null,A.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607ZM10.5 7.5v6m3-3h-6"}))}const oE=A.forwardRef(aE);function lE({title:n,titleId:s,...i},o){return A.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:o,"aria-labelledby":s},i),n?A.createElement("title",{id:s},n):null,A.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v6m3-3H9m12 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const cE=A.forwardRef(lE);function uE({title:n,titleId:s,...i},o){return A.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:o,"aria-labelledby":s},i),n?A.createElement("title",{id:s},n):null,A.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m9.75 9.75 4.5 4.5m0-4.5-4.5 4.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const dE=A.forwardRef(uE),fE={[de.ATTACK_MULTIPLIER]:"Attack",[de.DEFENSE_MULTIPLIER]:"Defense"},pE=({effect:n})=>{switch(n.type){case D.APPLY_MODIFIER:return l.jsxs("span",{className:"badge badge-outline badge-xs",children:[fE[n.modifierType],n.value>0?` +${n.value}`:` ${n.value}`]});case D.HEAL:return l.jsxs("span",{className:"badge badge-outline badge-xs",children:["Heal: ",n.value]});case D.PUSH:return l.jsxs("span",{className:"badge badge-outline badge-xs",children:["Push: ",n.distance]});case D.POISON:return l.jsx("span",{className:"badge badge-outline badge-xs",children:"Poison"});case D.STUN:return l.jsx("span",{className:"badge badge-outline badge-xs",children:"Stun"});case D.SLEEP:return l.jsx("span",{className:"badge badge-outline badge-xs",children:"Sleep"});case D.BURN:return l.jsx("span",{className:"badge badge-outline badge-xs",children:"Burn"});case D.BLEED:return l.jsx("span",{className:"badge badge-outline badge-xs",children:"Bleed"});case D.SHIELD:return l.jsx("span",{className:"badge badge-outline badge-xs",children:"Shield"});case D.REFLECT:return l.jsx("span",{className:"badge badge-outline badge-xs",children:"Reflect"});case D.TELEPORT:return l.jsx("span",{className:"badge badge-outline badge-xs",children:"Teleport"});case D.ARMOR_PIERCE:return l.jsx("span",{className:"badge badge-outline badge-xs",children:"Armor Pierce"});case D.HASTE:return l.jsx("span",{className:"badge badge-outline badge-xs",children:"Haste"});case D.DRAIN:return l.jsx("span",{className:"badge badge-outline badge-xs",children:"Drain"});case D.CREATE_TERRAIN:return l.jsx("span",{className:"badge badge-outline badge-xs",children:"Create Terrain"});case D.CRITICAL_STRIKE:return l.jsx("span",{className:"badge badge-outline badge-xs",children:"Critical Strike"});case D.ROOT:return l.jsx("span",{className:"badge badge-outline badge-xs",children:"Root"});default:{const s=n;throw new Error(`Unknown effect type: ${s}`)}}},mE=({unit:n,squads:s,handleRemoveUnit:i,handleRemoveUnitFromSquad:o,handleAddUnitToSquad:u,isAdminMode:d})=>{const p=Gl(n),m=He(n.unitType),h=nn(n.attacks);return l.jsx("div",{className:"card bg-base-100 shadow-sm border border-base-300",children:l.jsx("div",{className:"card-body p-4",children:l.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[l.jsx("div",{className:"flex-shrink-0",children:l.jsx("div",{className:"w-20 h-20 mx-auto lg:mx-0",children:l.jsx("img",{src:m.image,alt:n.name,className:"w-full h-full object-contain rounded-lg border border-base-300"})})}),l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 mb-4",children:[l.jsxs("div",{className:"flex-1",children:[l.jsx("h5",{className:"font-semibold text-lg text-primary mb-1",children:n.name}),l.jsx("p",{className:"text-sm text-base-content/70 capitalize",children:m.name})]}),l.jsxs("div",{className:"flex flex-col w-16",children:[l.jsx("span",{className:"text-base-content/70 text-xs uppercase tracking-wide mb-1",children:"Level"}),l.jsx("span",{className:"font-semibold text-lg",children:n.level})]}),l.jsxs("div",{className:"flex flex-col w-16",children:[l.jsx("span",{className:"text-base-content/70 text-xs uppercase tracking-wide mb-1",children:"Health"}),l.jsx("span",{className:"font-semibold text-lg text-success",children:n.maxHealth})]}),l.jsxs("div",{className:"flex flex-col w-16",children:[l.jsx("span",{className:"text-base-content/70 text-xs uppercase tracking-wide mb-1",children:"Attack"}),l.jsx("span",{className:"font-semibold text-lg text-error",children:n.attack})]}),l.jsxs("div",{className:"flex flex-col w-16",children:[l.jsx("span",{className:"text-base-content/70 text-xs uppercase tracking-wide mb-1",children:"Defense"}),l.jsx("span",{className:"font-semibold text-lg text-info",children:n.defense})]}),l.jsxs("div",{className:"flex flex-col w-16",children:[l.jsx("span",{className:"text-base-content/70 text-xs uppercase tracking-wide mb-1",children:"Cost"}),l.jsx("span",{className:"font-semibold text-lg text-accent",children:Tr(n)})]})]}),p&&l.jsx("div",{className:"mb-4 space-y-3",children:l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs("div",{className:"flex-1 space-y-2",children:[l.jsxs("div",{className:"flex justify-between text-sm",children:[l.jsx("span",{className:"text-base-content/70 text-xs uppercase",children:"Experience"}),l.jsxs("span",{className:"font-semibold",children:[p.experience,"/",p.experienceToNextLevel]})]}),l.jsx("progress",{className:"progress w-full progress-primary",value:p.experience,max:p.experienceToNextLevel})]}),l.jsxs("div",{className:"flex flex-col w-34",children:[l.jsx("span",{className:"text-base-content/70 text-xs uppercase tracking-wide mb-1",children:"Available Points"}),l.jsx("span",{className:"font-semibold text-lg text-warning",children:n.availablePoints})]})]})}),l.jsxs("div",{className:"mb-4",children:[l.jsx("h6",{className:"font-medium text-sm mb-2 text-base-content/90",children:"Attacks"}),l.jsx("div",{className:"space-y-2",children:h.map(y=>l.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between p-2 bg-base-200 rounded border border-base-300",children:[l.jsxs("div",{className:"flex-1",children:[l.jsx("div",{className:"font-medium text-xs text-primary mb-1",children:y.name}),l.jsx("p",{className:"text-xs text-base-content/70 mb-1",children:y.description})]}),l.jsxs("div",{className:"flex items-center gap-1 flex-wrap",children:[y.power[0]>0&&l.jsxs("div",{className:"badge badge-outline badge-xs",children:["Power: ",y.power[0],"d",y.power[1]]}),Object.entries(y.pattern.meta).map(([v,_])=>l.jsx("span",{className:"badge badge-outline badge-xs",children:typeof _=="boolean"?v:`${v}: ${_}`},v)),y.effects.map((v,_)=>l.jsx(pE,{effect:v},`effect-${_}`))]})]},y.id))})]}),s.length>0&&l.jsxs("div",{className:"flex flex-wrap gap-2",children:[s.map(y=>l.jsx(fb.Fragment,{children:y.unitIds.includes(n.id)?l.jsxs("button",{className:"btn btn-info btn-sm",onClick:()=>o(n.id,y.id),children:[l.jsx(dE,{className:"size-4"}),y.name]}):l.jsxs("button",{className:"btn btn-outline btn-info btn-sm",onClick:()=>u(n.id,y.id),children:[l.jsx(cE,{className:"size-4"}),y.name]})},y.id)),d&&l.jsx("button",{className:"btn btn-outline btn-error btn-sm",onClick:()=>i(n.id),children:"Remove from army"})]})]})]})})})},hE=({unit:n,isAdminMode:s})=>{const i=Gl(n),o=He(n.unitType);return l.jsx("div",{className:"card bg-base-100 shadow-sm border border-base-300",children:l.jsx("div",{className:"card-body",children:l.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[l.jsx("div",{className:"flex-shrink-0",children:l.jsx("div",{className:"w-20 h-20 mx-auto lg:mx-0",children:l.jsx("img",{src:o.image,alt:n.name,className:"w-full h-full object-contain rounded-lg border border-base-300"})})}),l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 mb-4",children:[l.jsxs("div",{className:"flex-1",children:[l.jsx("h5",{className:"font-semibold text-lg text-primary mb-1",children:n.name}),l.jsx("p",{className:"text-sm text-base-content/70 capitalize",children:o.name})]}),l.jsxs("div",{className:"flex flex-col w-16",children:[l.jsx("span",{className:"text-base-content/70 text-xs uppercase tracking-wide mb-1",children:"Level"}),l.jsx("span",{className:"font-semibold text-lg",children:n.level})]}),l.jsxs("div",{className:"flex flex-col w-16",children:[l.jsx("span",{className:"text-base-content/70 text-xs uppercase tracking-wide mb-1",children:"Health"}),l.jsx("span",{className:"font-semibold text-lg text-success",children:n.maxHealth})]}),l.jsxs("div",{className:"flex flex-col w-16",children:[l.jsx("span",{className:"text-base-content/70 text-xs uppercase tracking-wide mb-1",children:"Defense"}),l.jsx("span",{className:"font-semibold text-lg text-info",children:n.defense})]})]}),i&&l.jsx("div",{className:"mb-4 space-y-3",children:l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs("div",{className:"flex-1 space-y-2",children:[l.jsxs("div",{className:"flex justify-between text-sm",children:[l.jsx("span",{className:"text-base-content/70 text-xs uppercase",children:"Experience"}),l.jsxs("span",{className:"font-semibold",children:[i.experience,"/",i.experienceToNextLevel]})]}),l.jsx("progress",{className:"progress w-full progress-primary",value:i.experience,max:i.experienceToNextLevel})]}),l.jsxs("div",{className:"flex flex-col w-34",children:[l.jsx("span",{className:"text-base-content/70 text-xs uppercase tracking-wide mb-1",children:"Available Points"}),l.jsx("span",{className:"font-semibold text-lg text-warning",children:n.availablePoints})]})]})})]})]})})})},gE=""+new URL("army-management-Dp64uZk7.png",import.meta.url).href,vE=()=>{const{startOverworld:s}=fa(),i=nw(1),o=tw(1),u=()=>new URLSearchParams(window.location.search).has("admin"),{addUnitToArmy:d,removeUnitFromArmy:p,createSquad:m,deleteSquad:h,addUnitToSquad:y,removeUnitFromSquad:v,renameSquad:_}=pa(),[$,S]=A.useState(""),[M,L]=A.useState(null),[U,E]=A.useState(""),[R,w]=A.useState(""),[T,I]=A.useState(1),[z,Q]=A.useState(null),K=()=>{R&&(d(1,R,T),w(""))},ee=b=>{p(1,b)},je=()=>{$.trim()&&(m(1,$.trim()),S(""))},ve=b=>{h(1,b)},we=(b,O)=>{y(1,b,O)},he=(b,O)=>{v(1,b,O)},Te=b=>{L(b.id),E(b.name)},ze=()=>{M&&U.trim()&&(_(1,M,U.trim()),L(null),E(""))},Ie=()=>{L(null),E("")},ke=o.filter(b=>b.unitType!=="general"),H=o.find(b=>b.unitType==="general"),te=z?i.find(b=>b.id===z):null,G=te?o.filter(b=>te.unitIds.includes(b.id)):ke;return H?l.jsxs("div",{className:"flex h-full min-h-screen bg-cover bg-center bg-no-repeat bg-fixed",style:{backgroundImage:`url(${gE})`},children:[l.jsxs("div",{className:"w-96 p-4 space-y-6",children:[l.jsx("div",{className:"card shadow-xl bg-base-100",children:l.jsx("div",{className:"card-body",children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"text-center",children:[l.jsx("h4",{className:"font-bold text-lg",children:"Team Overview"}),l.jsx("p",{className:"text-sm text-base-content/70",children:"Manage your units and squads"})]}),l.jsxs("div",{className:"stats stats-horizontal w-full",children:[l.jsxs("div",{className:"stat",children:[l.jsx("div",{className:"stat-title",children:"Total Units"}),l.jsx("div",{className:"stat-value text-primary",children:o.length-1})]}),l.jsxs("div",{className:"stat",children:[l.jsx("div",{className:"stat-title",children:"Squads"}),l.jsx("div",{className:"stat-value text-secondary",children:i.length})]})]})]})})}),l.jsx("div",{className:"card shadow-xl bg-base-100",children:l.jsx("div",{className:"card-body",children:l.jsx("button",{className:"btn btn-block btn-accent",onClick:s,children:"Return to Overworld"})})}),u()&&l.jsx("div",{className:"card shadow-xl bg-base-100",children:l.jsxs("div",{className:"card-body",children:[l.jsx("h3",{className:"card-title text-lg mb-4",children:" Add New Unit"}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"join w-full",children:[l.jsxs("select",{className:"select select-bordered join-item flex-1",value:R,onChange:b=>w(b.target.value),children:[l.jsx("option",{value:"",children:"Select unit type"}),m_().map(b=>l.jsx("option",{value:b,children:b},b))]}),l.jsx("input",{type:"number",placeholder:"Level",min:"1",className:"input input-bordered join-item w-24",value:T,onChange:b=>I(Math.max(1,parseInt(b.target.value)||1)),onKeyDown:b=>b.key==="Enter"&&K()})]}),l.jsx("button",{className:"btn btn-primary w-full",onClick:K,disabled:!R.trim(),children:"Add Unit"})]})]})})]}),l.jsx("div",{className:"flex-1 p-4",children:l.jsxs("div",{className:"h-full space-y-6",children:[l.jsx(hE,{unit:H,isAdminMode:u()}),l.jsx(VS,{units:o,squads:i,selectedSquadId:z,setSelectedSquadId:Q,newSquadName:$,setNewSquadName:S,handleCreateSquad:je,editingSquadId:M,editingSquadName:U,setEditingSquadName:E,handleSaveSquadName:ze,handleCancelEditSquad:Ie,handleStartEditSquad:Te,handleDeleteSquad:ve,handleRemoveUnitFromSquad:he}),l.jsx("div",{className:"card bg-base-100 shadow-xl",children:l.jsx("div",{className:"card-body space-y-4",children:G.length===0?l.jsxs("div",{className:"text-center py-8",children:[l.jsx("div",{className:"text-4xl mb-2",children:""}),l.jsx("p",{className:"text-base-content/70",children:te?"No units in this squad":"No units to assign"})]}):l.jsx(l.Fragment,{children:G.map(b=>l.jsx(mE,{unit:b,squads:i,handleAddUnitToSquad:we,handleRemoveUnit:ee,handleRemoveUnitFromSquad:he,isAdminMode:u()},b.id))})})})]})})]}):null},yE=Wt([n=>n.battle.currentPlayerId,n=>n.battle.players],(n,s)=>{const i=s.find(o=>o.id===n);if(!i)throw new Error("Player not found");return i}),xE=Wt([n=>n.battle.currentPlayerId,n=>n.battle.players],(n,s)=>s.find(o=>o.id===n)?.units||[]),wE=Wt([n=>n.battle.units],n=>Object.values(n)),bE=Wt([n=>n.battle.units,(n,s)=>s],(n,s)=>Object.values(n).filter(i=>i.playerId===s)),kE=Wt([n=>n.battle.map,n=>n.battle.currentPlayerId,n=>n.battle.units],(n,s,i)=>H_(n,i,s)),Ye=()=>Ge(n=>n.battle),Ar=()=>Ge(n=>n.battle.selectedUnit?n.battle.units[n.battle.selectedUnit]:null),_E=n=>Ge(s=>s.battle.units[n]),iw=()=>Ge(wE),Pl=n=>Ge(s=>bE(s,n)),jE=()=>Ge(yE),NE=()=>Ge(xE),SE=()=>Ge(kE),Mr=()=>{const n=Pr();return{placeUnit:(s,i)=>n(be.placeUnit({armyUnit:s,position:i})),removePlacedUnit:s=>n(be.removePlacedUnit(s)),finishUnitPlacement:()=>n(be.finishUnitPlacement()),setPlacementMode:s=>n(be.setPlacementMode(s)),deselectUnit:()=>n(be.deselectUnit()),startMovement:s=>n(be.startMovement({unitId:s})),startAttacking:(s,i)=>n(be.startAttacking({unitId:s,attackId:i})),startCapture:s=>n(be.startCapture({unitId:s})),inspectUnit:s=>n(be.inspectUnit({unitId:s})),moveUnit:(s,i)=>n(be.moveUnit({unitId:s,newPosition:i})),setAIPlayer:s=>n(be.setAIPlayer(s)),addChatMessage:s=>n(be.addChatMessage(s)),surrender:()=>n(be.surrender())}},EE=[{id:"welcome",sender:"Wildlight Guide",content:"Welcome to your first battle! I'll guide you through the basics of tactical combat.",delay:500},{id:"unit-selection",sender:"Wildlight Guide",content:"Click on your units to select them. You can move, attack, or capture with different units.",delay:2e3},{id:"movement",sender:"Wildlight Guide",content:"When you select a unit, you can move it by clicking on a highlighted tile. Units can only move once per turn.",delay:3e3},{id:"attacking",sender:"Wildlight Guide",content:"To attack, click on a unit, then select an attack in the attack panel. Highlighting tiles will show you the range of the attack. Each unit has different attack patterns.",delay:4e3},{id:"generals",sender:"Wildlight Guide",content:"Your Character can capture enemy units by getting close to them. This is often the key to victory!",delay:5e3},{id:"turn-management",sender:"Wildlight Guide",content:"Use the 'End Turn' button when you're done with all your actions. The AI will then take their turn.",delay:6e3},{id:"victory",sender:"Wildlight Guide",content:"Win by defeating the enemy General or capturing all their units. Good luck, trainer!",delay:7e3}],CE=()=>{const{battleHistory:n}=Ir(),{gamePhase:s,chatMessages:i}=Ye(),{addChatMessage:o}=Mr(),u=A.useRef(!1),d=n.length===0,p=s===$t.SELECTION,m=A.useCallback(()=>{EE.forEach((h,y)=>{setTimeout(()=>{o({sender:h.sender,content:h.content})},h.delay||0)})},[o]);return A.useEffect(()=>{if(!d||!p||u.current)return;if(i.some(y=>y.sender==="Wildlight Guide"&&y.content.includes("Welcome to your first battle"))){u.current=!0;return}u.current=!0,m()},[d,p,i,o,m]),{replayTutorial:m}},TE=()=>{const[n,s]=A.useState(""),i=A.useRef(null),o=Ye(),{chatMessages:u,units:d,selectedUnit:p,currentPlayerId:m}=o,{addChatMessage:h}=Mr(),{playerName:y}=Ir(),v=m===2||!p,{replayTutorial:_}=CE(),$=(E,R,w,T)=>{let I="";switch(E.damageType){case"poison":I=`${w} takes ${T} poison damage!`;break;case"burn":I=`${w} takes ${T} burn damage!`;break;case"bleed":I=`${w} takes ${T} bleed damage!`;break;case"attack":{const{isCritical:z,affinityMultiplier:Q,attackId:K}=E,ee=Sn(K);I=`${R} attacks ${w} for ${T} damage with ${ee.name}`,z&&(I+=" - Critical hit!"),Q>=3?I+=" - Super effective!":Q>=2?I+=" - Effective!":Q===0?I+=" - Has no effect!":Q<=.25?I+=" - Barely effective!":Q<=.5&&(I+=" - Partially effective!"),I+="!";break}default:{const z=E;throw new Error(`Unknown damage type: ${z}`)}}return I},S=(E,R,w)=>{switch(E.type){case D.APPLY_MODIFIER:{const T=E.modifierType,I=E.value,z=E.duration;if(T===de.ATTACK_MULTIPLIER){const Q=z===null?"permanently":`for ${z} turns`;return`${w}'s attack power is ${I>1?"increased":"decreased"} by ${Math.abs(I-1)*100}% ${Q}!`}else if(T===de.DEFENSE_MULTIPLIER){const Q=z===null?"permanently":`for ${z} turns`;return`${w}'s defense is ${I>1?"increased":"decreased"} by ${Math.abs(I-1)*100}% ${Q}!`}return`${R} applies a modifier to ${w}!`}case D.HEAL:return`${w} is healed for ${E.value} health!`;case D.PUSH:return`${w} is pushed ${E.distance} spaces!`;case D.POISON:return`${w} is poisoned for ${E.duration} turns!`;case D.STUN:return`${w} is stunned for ${E.duration} turns!`;case D.SLEEP:return`${w} falls asleep for ${E.duration} turns!`;case D.BURN:return`${w} is burned and will take ${E.damage} damage per turn for ${E.duration} turns!`;case D.BLEED:return`${w} is bleeding and will take ${E.damage} damage per turn for ${E.duration} turns!`;case D.SHIELD:return`${w} gains a shield absorbing ${E.amount} damage for ${E.duration} turns!`;case D.REFLECT:return`${w} gains ${E.percentage}% damage reflection for ${E.duration} turns!`;case D.TELEPORT:return`${w} teleports to a new location!`;case D.ROOT:return`${w} is rooted in place for ${E.duration} turns!`;case D.HASTE:return`${w} gains +${E.bonusRange} movement range for ${E.duration} turns!`;case D.DRAIN:return`${w} is drained of ${E.amount} energy for ${E.duration} turns!`;case D.CREATE_TERRAIN:return`${R} creates ${E.terrainType} terrain!`;case D.CRITICAL_STRIKE:return`${R} gains ${E.multiplier}x critical strike chance!`;case D.ARMOR_PIERCE:return`${R} gains ${E.percentage}% armor piercing!`;default:{const T=E;throw new Error(`Unknown effect type: ${T}`)}}};js("battle/applyDamage",E=>{const{targetId:R,attackerId:w,meta:T,damage:I}=E.payload;if(!T)return;const z=d[R],Q=w?d[w]:null;if(!z)return;const K=z.name||z.unitType,ee=Q?Q.name||Q.unitType:"Unknown",je=$(T,ee,K,I);setTimeout(()=>{h({sender:"Wildlight Guide",content:je})},300)}),js("battle/applyEffect",E=>{const{targetId:R,attackerId:w,effect:T}=E.payload,I=d[R],z=d[w];if(!I)return;const Q=I.name||I.unitType,K=z?z.name||z.unitType:"Unknown",ee=S(T,K,Q);setTimeout(()=>{h({sender:"Wildlight Guide",content:ee})},400)}),js("battle/endTurnInternal",E=>{const{newPlayerId:R}=E.payload,w=o.players.find(I=>I.id===R);if(!w)return;const T=`${w.name} begins their turn.`;setTimeout(()=>{h({sender:"Wildlight Guide",content:T})},500)}),A.useEffect(()=>{i.current&&v&&i.current.scrollTo({top:i.current.scrollHeight,behavior:i.current.scrollTop>0?"smooth":"instant"})},[u,v]);const M=E=>{if(E.preventDefault(),n.trim()){const R=n.trim();h({sender:y||"Player",content:R}),s("");const w=R.toLowerCase();if(w==="help"){setTimeout(()=>{h({sender:"Wildlight Guide",content:`Here are the commands I understand:

 help - Show this list of commands
 tutorial - Replay the battle tutorial

Type any of these commands to get started!`})},500);return}if(w==="tutorial"){setTimeout(()=>{h({sender:"Wildlight Guide",content:"Of course! Let me walk you through the battle basics again."}),_()},500);return}setTimeout(()=>{h({sender:"Wildlight Guide",content:"I don't understand that command. Type 'help' to see a list of valid commands I can help you with!"})},500)}},L=E=>{s(E.target.value)},U=E=>{E.stopPropagation(),E.key==="Escape"&&document.getElementById("chat-input")?.blur()};return v?l.jsx("div",{className:"card bg-base-100/50 glass shadow-lg border border-base-300 m-4",children:l.jsxs("div",{className:"card-body p-4 h-[calc(100vh-200px))]",children:[l.jsx("div",{ref:i,className:"overflow-y-auto mb-4 h-full ",children:l.jsx("div",{className:"flex flex-col gap-4 justify-end min-h-full",children:u.map(E=>l.jsxs("div",{className:`chat ${E.sender===y||E.sender==="Player"?"chat-end":"chat-start"}`,children:[l.jsx("div",{className:"chat-header",children:E.sender}),l.jsx("div",{className:`chat-bubble ${E.sender===y||E.sender==="Player"?"chat-bubble-primary":""}`,children:E.content})]},E.id))})}),l.jsx("form",{onSubmit:M,className:"mt-auto",children:l.jsxs("div",{className:"flex w-full gap-2",children:[l.jsx("input",{type:"text",placeholder:"Type your message...",className:"input input-bordered w-full",value:n,onChange:L,onKeyDown:U,maxLength:200,id:"chat-input"}),l.jsx("button",{type:"submit",className:"btn btn-primary",disabled:!n.trim(),children:"Send"})]})})]})}):null},aw=({svgRef:n,handleWheel:s,disabled:i=!1})=>{A.useEffect(()=>{const o=n.current;if(o&&!i)return o.addEventListener("wheel",s,{passive:!1}),()=>{o.removeEventListener("wheel",s)}},[s,n,i])},ow=(n,{originalPan:s,originalZoom:i,minZoom:o=.1,maxZoom:u=5})=>{const[d,p]=A.useState(!1),[m,h]=A.useState({x:0,y:0}),y=A.useRef(null),v=A.useRef(null),_=A.useMemo(()=>({x:n.width/2,y:n.height/2}),[n.width,n.height]),$=1,S=s||_,M=i||$,[L,U]=A.useState(S),[E,R]=A.useState(M),[w,T]=A.useState(null),[I,z]=A.useState({width:0,height:0});A.useEffect(()=>{const b=()=>{if(v.current){const O=v.current.getBoundingClientRect();z({width:O.width,height:O.height})}else setTimeout(b,0)};if(b(),window.addEventListener("resize",b),v.current){const O=new ResizeObserver(b);return O.observe(v.current),()=>{O.disconnect(),window.removeEventListener("resize",b)}}return()=>window.removeEventListener("resize",b)},[]);const Q=A.useCallback(b=>{const O=y.current;if(!O)return;b.preventDefault();const ce=1+(b.deltaY>0?-1:1)*.03,ae=Math.max(o,Math.min(u,E*ce));if(ae!==E){const pe=O.getBoundingClientRect(),fe=pe.width/n.width,ye=pe.height/n.height,Oe=Math.min(fe,ye),Ht=(b.clientX-pe.left-n.width/2*(fe-Oe))/Oe,Qn=(b.clientY-pe.top-n.height/2*(ye-Oe))/Oe,Cn=(Ht-L.x)/E,Yn=(Qn-L.y)/E,Ts=L.x+Cn*(E-ae),$s=L.y+Yn*(E-ae);R(ae),U({x:Ts,y:$s}),T({x:Cn,y:Yn})}},[E,L,n.width,n.height,o,u]),K=A.useCallback(b=>{if(b.button===0){const O=y.current;if(!O)return;const ie=O.getBoundingClientRect(),oe=ie.width/n.width,ce=ie.height/n.height,ae=Math.min(oe,ce);p(!0),h({x:b.clientX/ae-L.x,y:b.clientY/ae-L.y})}},[L.x,L.y,n.width,n.height]),ee=A.useCallback(b=>{if(d){const O=y.current;if(!O)return;const ie=O.getBoundingClientRect(),oe=ie.width/n.width,ce=ie.height/n.height,ae=Math.min(oe,ce),pe=b.clientX/ae-m.x,fe=b.clientY/ae-m.y,ye=-1*Math.max(n.width*.5,I.width*.5),Oe=-1*ye+n.width,Ht=-1*Math.max(n.height*.5,I.height*.5),Qn=-1*Ht+n.height;U({x:Math.max(ye,Math.min(Oe,pe)),y:Math.max(Ht,Math.min(Qn,fe))})}},[d,m,n.width,n.height,I.width,I.height]),je=A.useCallback(()=>{p(!1)},[]),ve=A.useCallback(()=>{p(!1)},[]),we=A.useCallback(()=>{U(S),R(M)},[S,M]),he=A.useCallback(()=>{const b=Math.min(5,E*1.2);b!==E&&R(b)},[E]),Te=A.useCallback(()=>{const b=Math.max(.1,E/1.2);b!==E&&R(b)},[E]),ze=I.width||n.width,Ie=I.height||n.height,ke=n.width/E,H=n.height/E,te=-L.x/E,G=-L.y/E;return{pan:L,zoom:E,isDragging:d,svgRef:y,containerRef:v,containerDimensions:I,svgWidth:ze,svgHeight:Ie,viewBoxX:te,viewBoxY:G,viewBoxWidth:ke,viewBoxHeight:H,zoomCenter:w,handleWheel:Q,handleMouseDown:K,handleMouseMove:ee,handleMouseUp:je,handleMouseLeave:ve,resetView:we,zoomIn:he,zoomOut:Te}},lw=n=>{const{radius:s}=Ye(),i=A.useMemo(()=>{const d=(s*2+1)*n*1.5+n,p=(s*2+1)*n*Math.sqrt(3)+n;return{width:d,height:p}},[s,n]),o=A.useMemo(()=>({x:i.width/2,y:i.height/2}),[i.width,i.height]);return ow(i,{originalPan:o,originalZoom:1})},$E=({tile:n,unit:s,points:i,onTileClick:o,onTileHover:u,onTileLeave:d})=>l.jsx("polygon",{points:i,fill:"transparent",onClick:p=>{o(n,s,p)},onMouseEnter:()=>{u(n,s)},onMouseLeave:d,className:"cursor-pointer"}),PE=({tile:n,center:s})=>{const{position:i}=n;return l.jsxs("text",{x:s.x,y:s.y,fill:"#333",fontSize:"12",textAnchor:"middle",dominantBaseline:"middle",children:[i.q,", ",i.r]})},cw=({points:n,variant:s="default"})=>l.jsx("polygon",{points:n,stroke:`var(--border-${s})`,strokeWidth:"2",fill:"none"}),ks=({points:n,variant:s,isHovered:i=!1})=>{const o=`highlight-${s}`,u=i?"0.8":"0.6";return l.jsxs("g",{children:[l.jsx(cw,{variant:s,points:n}),l.jsx("polygon",{points:n,fill:`url(#${o})`,opacity:u})]})},IE=""+new URL("forest-6YRjAE2u.png",import.meta.url).href,AE=""+new URL("grass-CQSe_z-b.png",import.meta.url).href,ME=""+new URL("mountain-B8jQAaM6.png",import.meta.url).href,LE=""+new URL("water-BeJlSNpC.png",import.meta.url).href,RE=({tile:n,points:s,size:i,center:o})=>{const{position:u,terrain:d}=n,p={[yt.GRASS]:AE,[yt.WATER]:LE,[yt.MOUNTAIN]:ME,[yt.FOREST]:IE},m=()=>({[yt.GRASS]:"#90EE90",[yt.WATER]:"#87CEEB",[yt.MOUNTAIN]:"#8B7355",[yt.FOREST]:"#228B22"})[d];return l.jsxs("g",{children:[l.jsx("defs",{children:l.jsx("clipPath",{id:`hexClip-${u.q}-${u.r}`,children:l.jsx("polygon",{points:s})})}),l.jsx("polygon",{points:s,fill:m()}),l.jsx("image",{href:p[d],x:o.x-i,y:o.y-i,width:i*2,height:i*2,clipPath:`url(#hexClip-${u.q}-${u.r})`})]})},OE=({unitId:n,center:s,size:i,isFlashing:o=!1,isBeingCaptured:u=!1,damageNumber:d})=>{const p=_E(n),m=A.useRef(null);if(!p)return null;const h=()=>p.playerId===1?"#4ECDC4":"#FF6B6B";return l.jsxs("g",{ref:m,className:"unit-renderer-group",children:[l.jsx("circle",{cx:s.x,cy:s.y,r:i*.4,fill:h(),stroke:"#333",strokeWidth:"2",className:`${u?"animate-capture":""} ${o?"animate-flash":""}`}),l.jsx("rect",{x:s.x-i*.3,y:s.y+i*.5,width:i*.6,height:i*.1,fill:"#333",rx:2}),l.jsx("rect",{x:s.x-i*.3,y:s.y+i*.5,width:i*.6*(p.health/p.maxHealth),height:i*.1,fill:"#FF0000",rx:2}),l.jsx("text",{x:s.x,y:s.y-i*.6,textAnchor:"middle",fontSize:i*.3,fill:"#333",fontWeight:"bold",filter:"url(#unitNameGlow)",children:p.name}),d&&l.jsxs("text",{x:s.x,y:s.y-i*.9,textAnchor:"middle",fontSize:i*.4,fill:"#FFFFFF",fontWeight:"bold",className:"animate-damage-float",children:["-",d]})]})},UE=(n,s)=>{const{position:i}=n,o=i.q+(i.r-(i.r&1))/2,u=i.r,d=s*(Math.sqrt(3)*o+Math.sqrt(3)/2*(u&1)),p=s*(3/2*u);return[`${d+s*.866},${p+s*.5}`,`${d+s*.866},${p-s*.5}`,`${d},${p-s}`,`${d-s*.866},${p-s*.5}`,`${d-s*.866},${p+s*.5}`,`${d},${p+s}`].join(" ")},DE=(n,s)=>{const{position:i}=n,o=i.q+(i.r-(i.r&1))/2,u=i.r,d=s*(Math.sqrt(3)*o+Math.sqrt(3)/2*(u&1)),p=s*(3/2*u);return{x:d,y:p}},uw=({hexSize:n,onTileClick:s,onTileHover:i,onTileLeave:o,isMovementTarget:u,isInDamagePreview:d,isAttackTarget:p,isCaptureTarget:m,isHovered:h,disableCameraControls:y=!1,getUnitEffects:v,debug:_=!1})=>{const{map:$}=Ye(),S=iw(),M=Ar(),L=lw(n),E=$.flat().filter(w=>w).map(w=>({tile:w,points:UE(w,n),center:DE(w,n),unit:S.find(T=>T.id===w.unitId),...v(w.unitId)})),R=y?void 0:{cursor:L.isDragging?"grabbing":"grab"};return aw({svgRef:L.svgRef,handleWheel:L.handleWheel,disabled:y}),l.jsxs("svg",{ref:L.svgRef,width:L.svgWidth,height:L.svgHeight,viewBox:`${L.viewBoxX} ${L.viewBoxY} ${L.viewBoxWidth} ${L.viewBoxHeight}`,onMouseDown:y?void 0:L.handleMouseDown,onMouseMove:y?void 0:L.handleMouseMove,onMouseUp:y?void 0:L.handleMouseUp,onMouseLeave:y?void 0:L.handleMouseLeave,onDoubleClick:y?void 0:L.resetView,style:R,className:"w-full h-full",children:[l.jsxs("defs",{children:[l.jsxs("radialGradient",{id:"highlight-selected",cx:"50%",cy:"50%",r:"50%",children:[l.jsx("stop",{offset:"0%",stopColor:"#E0E0FF",stopOpacity:"0.2"}),l.jsx("stop",{offset:"100%",stopColor:"#E0E0FF",stopOpacity:"1.0"})]}),l.jsxs("radialGradient",{id:"highlight-movement",cx:"50%",cy:"50%",r:"50%",children:[l.jsx("stop",{offset:"0%",stopColor:"#FFFFE0",stopOpacity:"0.2"}),l.jsx("stop",{offset:"100%",stopColor:"#FFFFE0",stopOpacity:"1.0"})]}),l.jsxs("radialGradient",{id:"highlight-attack",cx:"50%",cy:"50%",r:"50%",children:[l.jsx("stop",{offset:"0%",stopColor:"#FF8C00",stopOpacity:"0.2"}),l.jsx("stop",{offset:"100%",stopColor:"#FF8C00",stopOpacity:"1.0"})]}),l.jsxs("radialGradient",{id:"highlight-capture",cx:"50%",cy:"50%",r:"50%",children:[l.jsx("stop",{offset:"0%",stopColor:"#9370DB",stopOpacity:"0.2"}),l.jsx("stop",{offset:"100%",stopColor:"#9370DB",stopOpacity:"1.0"})]}),l.jsxs("radialGradient",{id:"highlight-damage",cx:"50%",cy:"50%",r:"50%",children:[l.jsx("stop",{offset:"0%",stopColor:"#FF6B6B",stopOpacity:"0.2"}),l.jsx("stop",{offset:"100%",stopColor:"#FF6B6B",stopOpacity:"1.0"})]}),l.jsx("filter",{id:"unitNameGlow",children:l.jsx("feDropShadow",{dx:"0",dy:"0",floodColor:"#FFF",stdDeviation:"2"})})]}),E.map(({tile:w,points:T,center:I})=>l.jsx(RE,{tile:w,points:T,size:n,center:I},`terrain-${w.position.q}-${w.position.r}`)),E.map(({tile:w,points:T})=>l.jsx(cw,{points:T},`border-${w.position.q}-${w.position.r}`)),E.filter(({tile:w})=>M&&M.id===w.unitId).map(({tile:w,points:T})=>l.jsx(ks,{points:T,variant:"selected",isHovered:h(w.position.q,w.position.r)},`selected-${w.position.q}-${w.position.r}`)),E.filter(({tile:w})=>u(w.position.q,w.position.r)).map(({tile:w,points:T})=>l.jsx(ks,{points:T,variant:"movement",isHovered:h(w.position.q,w.position.r)},`movement-${w.position.q}-${w.position.r}`)),E.filter(({tile:w})=>p(w.position.q,w.position.r)).map(({tile:w,points:T})=>l.jsx(ks,{points:T,variant:"attack",isHovered:h(w.position.q,w.position.r)},`attack-${w.position.q}-${w.position.r}`)),E.filter(({tile:w})=>m(w.position.q,w.position.r)).map(({tile:w,points:T})=>l.jsx(ks,{points:T,variant:"capture",isHovered:h(w.position.q,w.position.r)},`capture-${w.position.q}-${w.position.r}`)),E.filter(({tile:w})=>d(w.position.q,w.position.r)).map(({tile:w,points:T})=>l.jsx(ks,{points:T,variant:"damage",isHovered:h(w.position.q,w.position.r)},`damage-${w.position.q}-${w.position.r}`)),_&&E.map(({tile:w,center:T})=>l.jsx(PE,{tile:w,center:T},`coords-${w.position.q}-${w.position.r}`)),E.filter(({unit:w})=>w).map(({unit:w,center:T,isFlashing:I,isBeingCaptured:z,damageNumber:Q})=>l.jsx(OE,{unitId:w.id,center:T,size:n,isFlashing:I,isBeingCaptured:z,damageNumber:Q},`unit-${w.id}`)),E.map(({tile:w,points:T,unit:I})=>l.jsx($E,{tile:w,unit:I,points:T,onTileClick:s,onTileHover:i,onTileLeave:o},`terrain-${w.position.q}-${w.position.r}`))]})},FE=()=>{const[n,s]=A.useState(new Map),i=A.useCallback((p,m)=>{const h=`${p}-damage-${Date.now()}`;s(y=>new Map(y).set(h,{id:h,type:"damage",unitId:p,damage:m,duration:1500,startTime:Date.now()}))},[]),o=A.useCallback(p=>{const m=`${p}-flash-${Date.now()}`;s(h=>new Map(h).set(m,{id:m,type:"flash",unitId:p,duration:300,startTime:Date.now()}))},[]),u=A.useCallback(p=>{const m=`${p}-capture-${Date.now()}`;s(h=>new Map(h).set(m,{id:m,type:"capture",unitId:p,duration:2e3,startTime:Date.now()}))},[]);A.useEffect(()=>{const p=setInterval(()=>{const m=Date.now();s(h=>{const y=new Map(h);for(const[v,_]of y)m-_.startTime>_.duration&&y.delete(v);return y})},100);return()=>clearInterval(p)},[]);const d=A.useCallback(p=>{const m={isFlashing:!1,isBeingCaptured:!1,damageNumber:void 0};if(!p)return m;for(const h of n.values())h.unitId===p&&(h.type==="flash"?m.isFlashing=!0:h.type==="damage"&&h.damage!==void 0?m.damageNumber=h.damage:h.type==="capture"&&(m.isBeingCaptured=!0));return m},[n]);return{effects:n,triggerDamageEffect:i,triggerFlashEffect:o,triggerCaptureEffect:u,getUnitEffects:d}},Zl=(n,s,i,o)=>{const u=He(i.unitType).movement.range;let p=Vl(o,u).filter(m=>En(m,s));return p=p.filter(m=>{const h=m.r+s,y=m.q+s;return!(!n[h]||!n[h][y]||m.q===o.q&&m.r===o.r||!sn(m,n,i)||n[h][y].unitId||at(o,m)>1&&!zE(o,m,u,s,n,i))}),p},zE=(n,s,i,o,u,d)=>{if(n.q===s.q&&n.r===s.r)return!0;if(at(n,s)>i)return!1;const m=[{pos:n,distance:0}],h=new Set,y=v=>`${v.q},${v.r}`;for(h.add(y(n));m.length>0;){const{pos:v,distance:_}=m.shift();if(v.q===s.q&&v.r===s.r)return!0;if(_>=i)continue;const $=I_(v);for(const S of $){const M=y(S);if(h.has(M)||!En(S,o)||!sn(S,u,d))continue;const L=S.r+o,U=S.q+o;u[L]?.[U]?.unitId||(h.add(M),m.push({pos:S,distance:_+1}))}}return!1},qE=n=>({handleUnitSelection:(s,i,o,u,d)=>{const p=s.playerId===o,m=s.id===u,h=nn(s.attacks)[0];p&&(!m||d!==le.MOVEMENT)&&!i&&tn(s)?n.startMovement(s.id):p&&(!m||d!==le.ATTACK)&&i&&Hn(s)?rt(s)?n.startCapture(s.id):n.startAttacking(s.id,h.id):m?n.deselectUnit():n.inspectUnit(s.id)},handleAttackMode:(s,i,o,u)=>{if(rt(s)){console.warn("Generals cannot attack");return}if(!Sn(u).pattern.validateAttack(i,o)){console.warn("Cannot attack");return}n.executeAttack(s.id,o)},handleMovementMode:(s,i,o,u,d)=>{Zl(s,i,o,u).some(h=>h.q===d.q&&h.r===d.r)&&n.moveUnit(o.id,d)},handleCaptureMode:(s,i,o,u)=>{if(!rt(s))return console.warn("Only generals can capture units"),!1;if(at(i,u)>2){console.warn("Cannot capture units more than 2 tiles away");return}n.captureUnit(s.id,o.id)},handleModeSwitch:(s,i,o,u,d,p,m)=>{const h=p&&Sn(p).pattern.validateAttack(u,d),y=nn(s.attacks)[0],v=s.playerId===m;v&&i&&rt(s)&&o!==le.ATTACK?n.startCapture(s.id):v&&i&&o!==le.ATTACK&&y?n.startAttacking(s.id,y.id):v&&!i&&o===le.ATTACK&&h?n.executeAttack(s.id,d):n.deselectUnit()}}),ma=()=>{const{currentPlayerId:n,selectionMode:s,selectedAttack:i,map:o,radius:u}=Ye(),d=Ar(),p=Mr(),{executeAttack:m,captureUnit:h,endTurn:y}=Cs(),v=qE({...p,executeAttack:m,captureUnit:h}),_=A.useCallback((R,w,T)=>{const I=T.metaKey||T.ctrlKey;if(!d&&w){v.handleUnitSelection(w,I,n,null,s);return}else if(!d)return;const z=Me(o,d.id);if(!z)throw new Error("Selected unit not found on map");if(w&&w.id===d.id){v.handleModeSwitch(w,I,s,z,R.position,i,n);return}switch(s){case le.MOVEMENT:w?v.handleUnitSelection(w,I,n,d.id,s):v.handleMovementMode(o,u,d,z,R.position);break;case le.ATTACK:if(rt(d))w&&v.handleCaptureMode(d,z,w,R.position);else if(i)v.handleAttackMode(d,z,R.position,i);else throw new Error("No attack selected");break;case le.WAITING:w&&v.handleUnitSelection(w,I,n,d.id,s);break}},[d,n,s,i,o,u,v]),$=A.useCallback(()=>{p.deselectUnit()},[p]),S=A.useCallback(()=>{y()},[y]),M=A.useCallback(R=>{d&&p.startAttacking(d.id,R)},[p,d]),L=A.useCallback(()=>{d&&p.startCapture(d.id)},[p,d]),U=A.useCallback(()=>{p.surrender(),y()},[p,y]),E=A.useCallback((R,w)=>{v.handleUnitSelection(R,w.metaKey||w.ctrlKey,n,d?.id??null,s)},[v,n,d,s]);return{handleTileClick:_,handleUnitClick:E,handleUnitDeselection:$,handleEndTurn:S,handleAttackSelection:M,handleCaptureSelection:L,handleSurrender:U}},dw=()=>{const{selectionMode:n,map:s,radius:i,selectedAttack:o,winner:u}=Ye(),d=Ar(),p=iw(),[m,h]=A.useState(null),y=A.useCallback(()=>{if(!d)return new Set;const K=new Set,ee=Me(s,d.id);return ee?(n===le.MOVEMENT&&!d.hasMoved&&Zl(s,i,d,ee).forEach(ve=>{K.add(`${ve.q},${ve.r}`)}),K):new Set},[d,n,i,s]),v=A.useCallback(()=>{if(!d||n!==le.ATTACK||d.hasAttacked||d.unitType!=="general")return new Set;const K=new Set,ee=Me(s,d.id);return s.flatMap(ve=>ve).filter(Boolean).map(ve=>ve.position).forEach(ve=>{if(Math.abs(ve.q-ee.q)+Math.abs(ve.q+ve.r-ee.q-ee.r)+Math.abs(ve.r-ee.r)<=2){const he=ve.r+i,Te=ve.q+i;if(s[he]&&s[he][Te]&&s[he][Te].unitId){const ze=p.find(Ie=>Ie.id===s[he][Te]?.unitId);ze&&ze.playerId!==d.playerId&&K.add(`${ve.q},${ve.r}`)}}}),K},[d,n,s,i,p]),_=A.useCallback(()=>{if(!d||n!==le.ATTACK||d.hasAttacked||d.unitType==="general"||!o)return new Set;const K=Sn(o),ee=new Set,je=Me(s,d.id);return s.flatMap(we=>we).filter(Boolean).map(we=>we.position).forEach(we=>{if(K&&K.pattern.validateAttack(je,we))if(K.pattern.needsTarget){const he=we.r+i,Te=we.q+i;s[he]&&s[he][Te]&&s[he][Te].unitId&&p.find(Ie=>Ie.id===s[he][Te]?.unitId)&&ee.add(`${we.q},${we.r}`)}else ee.add(`${we.q},${we.r}`)}),ee},[d,n,s,i,p,o]),$=A.useCallback(()=>{if(!d||!m||!o||n!==le.ATTACK||d.hasAttacked||d.unitType==="general")return new Set;const K=Sn(o),ee=new Set,je=Me(s,d.id);return K.pattern.validateAttack(je,m)&&K.pattern.getTargets(je,m,i).forEach(he=>{En(he,i)&&ee.add(`${he.q},${he.r}`)}),ee},[d,m,n,i,s,o]),S=y(),M=$(),L=_(),U=v(),E=A.useCallback((K,ee)=>u?!1:M.has(`${K},${ee}`),[M,u]),R=A.useCallback((K,ee)=>u?!1:S.has(`${K},${ee}`),[S,u]),w=A.useCallback((K,ee)=>u?!1:L.has(`${K},${ee}`),[L,u]),T=A.useCallback((K,ee)=>u?!1:U.has(`${K},${ee}`),[U,u]),I=A.useCallback((K,ee)=>u?!1:!!(m&&m.q===K&&m.r===ee),[m,u]),z=A.useCallback(K=>{h(K.position)},[]),Q=A.useCallback(()=>{h(null)},[]);return{handleTileHover:z,handleTileLeave:Q,isInDamagePreview:E,isMovementTarget:R,isAttackTarget:w,isCaptureTarget:T,isHovered:I}},BE=()=>{const{selectionMode:n}=Ye(),s=Ar();return l.jsxs("div",{className:"dropdown  dropdown-end dropdown-hover",children:[l.jsx("button",{className:"btn btn-sm btn-outline btn-secondary bg-base-100",tabIndex:0,role:"button",children:l.jsx(rE,{className:"w-4 h-4"})}),l.jsx("div",{className:"dropdown-content card bg-base-100 shadow-lg border border-base-300 w-max z-50",children:l.jsxs("div",{className:"card-body p-4",children:[l.jsx("h3",{className:"card-title text-sm mb-3",children:"Game Controls"}),l.jsxs("div",{className:"space-y-2 text-xs",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"badge badge-sm badge-outline",children:""}),l.jsx("span",{children:"Drag to pan"})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"badge badge-sm badge-outline",children:""}),l.jsx("span",{children:"Click Reset to center view"})]}),s&&l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"divider my-2"}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"badge badge-sm badge-outline",children:""}),l.jsxs("span",{children:["Mode:"," ",l.jsx("span",{className:"badge badge-sm badge-primary",children:n===le.MOVEMENT?"Movement":"Attack"})]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"badge badge-sm badge-outline",children:""}),l.jsxs("span",{children:["Click tile to ",n===le.MOVEMENT?"move":"attack"]})]}),n===le.ATTACK&&l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"badge badge-sm badge-outline",children:""}),l.jsx("span",{children:"Hover over attack targets to see damage preview"})]}),n===le.ATTACK&&s&&l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"badge badge-sm badge-outline",children:""}),l.jsx("span",{children:"Damage Preview"})]}),n===le.ATTACK&&l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"badge badge-sm badge-outline",children:""}),l.jsx("span",{children:"Orange tiles = valid attack targets"})]}),n===le.ATTACK&&l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"badge badge-sm badge-outline",children:""}),l.jsx("span",{children:"Red tiles = damage preview"})]}),n===le.MOVEMENT&&l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"badge badge-sm badge-outline",children:""}),l.jsx("span",{children:"Yellow tiles = movement range"})]})]})]})]})})]})},WE=({onResetView:n,onZoomIn:s,onZoomOut:i})=>l.jsxs("div",{className:"flex flex-col gap-2",children:[l.jsx("button",{onClick:n,className:"btn btn-sm btn-outline btn-secondary bg-base-100",title:"Reset View (Position & Zoom)",children:l.jsx(QS,{className:"w-4 h-4"})}),l.jsx("button",{onClick:s,className:"btn btn-sm btn-outline btn-secondary bg-base-100",title:"Zoom In",children:l.jsx(oE,{className:"w-4 h-4"})}),l.jsx("button",{onClick:i,className:"btn btn-sm btn-outline btn-secondary bg-base-100",title:"Zoom Out",children:l.jsx(iE,{className:"w-4 h-4"})})]}),HE=()=>{const{triggerDamageEffect:n,triggerFlashEffect:s,triggerCaptureEffect:i,getUnitEffects:o}=FE();js("battle/applyDamage",h=>{const{targetId:y,damage:v}=h.payload;s(y),n(y,v)}),js("battle/captureUnit",h=>{const{unitId:y}=h.payload;i(y)});const u=40,d=lw(u),p=ma(),m=dw();return l.jsxs("div",{className:"relative w-full h-full bg-base-100",ref:d.containerRef,children:[l.jsx("div",{className:"absolute top-4 left-96 z-10",children:l.jsx(WE,{onResetView:d.resetView,onZoomIn:d.zoomIn,onZoomOut:d.zoomOut})}),l.jsx("div",{className:"absolute top-4 right-96 z-10",children:l.jsx(BE,{})}),l.jsx(uw,{hexSize:u,onTileClick:p.handleTileClick,onTileHover:m.handleTileHover,onTileLeave:m.handleTileLeave,isMovementTarget:m.isMovementTarget,isInDamagePreview:m.isInDamagePreview,isAttackTarget:m.isAttackTarget,isCaptureTarget:m.isCaptureTarget,isHovered:m.isHovered,getUnitEffects:o})]})},GE=()=>{const{selectedUnit:n}=Ye(),s=Pl(1),{handleUnitClick:i,handleEndTurn:o,handleSurrender:u}=ma(),d=jE();return l.jsxs("div",{className:"p-4 space-y-4 h-full overflow-y-auto",children:[l.jsx("div",{className:"card bg-base-100/50 glass shadow-lg border border-base-300",children:l.jsxs("div",{className:"card-body p-4",children:[l.jsx("div",{children:l.jsxs("div",{className:"stat",children:[l.jsx("div",{className:"stat-title",children:"Current Player"}),l.jsx("div",{className:"stat-value text-secondary",children:d.name})]})}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("button",{className:"btn btn-outline btn-primary btn-block",onClick:o,disabled:d.id!==1,children:[l.jsx(XS,{className:"w-4 h-4"}),"End Turn"]}),l.jsxs("button",{className:"btn btn-outline btn-error btn-block",onClick:u,children:[l.jsx(JS,{className:"w-4 h-4"}),"Surrender"]})]})]})}),l.jsx("div",{className:"space-y-4",children:l.jsx("div",{className:"card bg-base-100/50 glass shadow-lg border border-base-300",children:l.jsx("div",{className:"card-body p-4",children:s.map(p=>l.jsx("div",{className:`card bg-base-200/50 border-2 cursor-pointer ${p.id===n?"border-primary":p.health<=0?"border-error opacity-50":"border-base-300"}`,onClick:m=>i(p,m),children:l.jsxs("div",{className:"card-body p-3",children:[l.jsxs("div",{className:"flex justify-between items-baseline gap-2 mb-2",children:[l.jsx("span",{className:"font-semibold text-base-content flex-1",children:p.name}),l.jsx("span",{className:`badge badge-sm ${tn(p)?"badge-success":"badge-outline"}`,children:tn(p)?"Can Move":"Moved"}),p.unitType!=="general"&&l.jsx("span",{className:`badge badge-sm ${Hn(p)?"badge-accent":"badge-outline"}`,children:Hn(p)?"Can Attack":"Attacked"})]}),l.jsx("div",{className:"space-y-1 text-sm",children:l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex justify-between text-sm",children:[l.jsx("span",{children:"Health"}),l.jsxs("span",{className:p.health<=0?"text-error font-semibold":"font-semibold",children:[p.health,"/",p.maxHealth]})]}),l.jsx("progress",{className:"progress w-full progress-error",value:p.health,max:p.maxHealth})]})})]})},p.id))})})})]})},VE={[de.ATTACK_MULTIPLIER]:"Attack",[de.DEFENSE_MULTIPLIER]:"Defense"},KE=({effect:n})=>{switch(n.type){case D.APPLY_MODIFIER:return l.jsxs("span",{className:"badge badge-outline badge-xs",children:[VE[n.modifierType],n.value>0?` +${n.value}`:` ${n.value}`]});case D.HEAL:return l.jsxs("span",{className:"badge badge-outline badge-xs",children:["Heal: ",n.value]});case D.PUSH:return l.jsxs("span",{className:"badge badge-outline badge-xs",children:["Push: ",n.distance]});case D.POISON:return l.jsx("span",{className:"badge badge-outline badge-xs",children:"Poison"});case D.STUN:return l.jsx("span",{className:"badge badge-outline badge-xs",children:"Stun"});case D.SLEEP:return l.jsx("span",{className:"badge badge-outline badge-xs",children:"Sleep"});case D.BURN:return l.jsx("span",{className:"badge badge-outline badge-xs",children:"Burn"});case D.BLEED:return l.jsx("span",{className:"badge badge-outline badge-xs",children:"Bleed"});case D.SHIELD:return l.jsx("span",{className:"badge badge-outline badge-xs",children:"Shield"});case D.REFLECT:return l.jsx("span",{className:"badge badge-outline badge-xs",children:"Reflect"});case D.TELEPORT:return l.jsx("span",{className:"badge badge-outline badge-xs",children:"Teleport"});case D.ARMOR_PIERCE:return l.jsx("span",{className:"badge badge-outline badge-xs",children:"Armor Pierce"});case D.HASTE:return l.jsx("span",{className:"badge badge-outline badge-xs",children:"Haste"});case D.DRAIN:return l.jsx("span",{className:"badge badge-outline badge-xs",children:"Drain"});case D.CREATE_TERRAIN:return l.jsx("span",{className:"badge badge-outline badge-xs",children:"Create Terrain"});case D.CRITICAL_STRIKE:return l.jsx("span",{className:"badge badge-outline badge-xs",children:"Critical Strike"});case D.ROOT:return l.jsx("span",{className:"badge badge-outline badge-xs",children:"Root"});default:{const s=n;throw new Error(`Unknown effect type: ${s}`)}}},QE=""+new URL("attack-CjWLVDqi.png",import.meta.url).href,YE=""+new URL("defense-CqlxeKv8.png",import.meta.url).href,XE=""+new URL("poison-BQ7Hh4O6.png",import.meta.url).href,ZE=({modifier:n})=>{const s=()=>{switch(n.type){case de.ATTACK_MULTIPLIER:{const o=n.value>0?`+${n.value}`:`${n.value}`;return l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"tooltip","data-tip":"Attack",children:l.jsx("img",{src:QE,alt:"Attack",className:"w-6 h-6"})}),l.jsx("span",{className:"text-xs opacity-70",children:o})]})}case de.DEFENSE_MULTIPLIER:{const o=n.value>0?`+${n.value}`:`${n.value}`;return l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"tooltip","data-tip":"Defense",children:l.jsx("img",{src:YE,alt:"Defense",className:"w-6 h-6"})}),l.jsx("span",{className:"text-xs opacity-70",children:o})]})}case de.POISON:return l.jsx("div",{className:"tooltip","data-tip":"Poisoned",children:l.jsx("img",{src:XE,alt:"Poisoned",className:"w-6 h-6"})});case de.STUN:return l.jsx("span",{className:"badge badge-outline badge-xs",children:"Stun"});case de.SLEEP:return l.jsx("span",{className:"badge badge-outline badge-xs",children:"Sleep"});case de.BURN:return l.jsx("span",{className:"badge badge-outline badge-xs",children:"Burn"});case de.BLEED:return l.jsx("span",{className:"badge badge-outline badge-xs",children:"Bleed"});case de.SHIELD:return l.jsx("span",{className:"badge badge-outline badge-xs",children:"Shield"});case de.REFLECT:return l.jsx("span",{className:"badge badge-outline badge-xs",children:"Reflect"});case de.ROOT:return l.jsx("span",{className:"badge badge-outline badge-xs",children:"Root"});case de.HASTE:return l.jsx("span",{className:"badge badge-outline badge-xs",children:"Haste"});case de.DRAIN:return l.jsx("span",{className:"badge badge-outline badge-xs",children:"Drain"});default:{const o=n;throw new Error(`Unknown modifier type: ${o}`)}}},i=()=>n.duration===null?"Permanent":n.duration===1?"1 turn":`${n.duration} turns`;return l.jsxs("div",{className:"flex flex-row items-center gap-1",children:[s(),n.duration!==null&&l.jsx("span",{className:"text-xs opacity-70",children:i()})]})},JE=()=>{const n=Ar(),{selectedAttack:s,selectionMode:i,currentPlayerId:o}=Ye(),{handleAttackSelection:u,handleCaptureSelection:d}=ma();if(!n||o!==1)return null;const p=nn(n.attacks),m=He(n.unitType),h=n.playerId===o,y=Gl(n);return l.jsxs("div",{className:"p-4 space-y-4 h-full overflow-y-auto",children:[l.jsx("div",{className:"card bg-base-100/50 glass shadow-lg border border-base-300",children:l.jsxs("div",{className:"card-body p-4",children:[l.jsxs("div",{className:"flex justify-between items-baseline gap-2",children:[l.jsx("h3",{className:"card-title text-lg flex-1",children:n.name}),l.jsx("span",{className:`badge badge-sm ${tn(n)?"badge-success":"badge-outline"}`,children:tn(n)?"Can Move":"Moved"}),n.unitType!=="general"&&l.jsx("span",{className:`badge badge-sm ${Hn(n)?"badge-accent":"badge-outline"}`,children:Hn(n)?"Can Attack":"Attacked"})]}),l.jsxs("div",{className:"text-gray-500",children:[l.jsx("span",{className:"capitalize",children:m.affinity})," ",l.jsx("span",{className:"capitalize",children:m.family})]}),l.jsx("img",{src:m.image,alt:n.name,className:"w-full"}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex justify-between text-sm",children:[l.jsx("span",{children:"Health"}),l.jsxs("span",{className:n.health<=0?"text-error font-semibold":"font-semibold",children:[n.health,"/",n.maxHealth]})]}),l.jsx("progress",{className:"progress w-full progress-error",value:n.health,max:n.maxHealth})]}),h&&y&&l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex justify-between text-sm",children:[l.jsx("span",{children:"Level"}),l.jsx("span",{className:"font-semibold",children:n.level})]}),l.jsx("progress",{className:"progress w-full progress-error",value:y.experience,max:y.experienceToNextLevel})]}),n.modifiers.length>0&&l.jsx("div",{className:"flex flex-wrap gap-2",children:n.modifiers.map(v=>l.jsx(ZE,{modifier:v},v.id))})]})}),h&&rt(n)&&l.jsx("div",{className:"card bg-base-100/50 glass shadow-lg border border-base-300",children:l.jsxs("div",{className:"card-body p-4",children:[l.jsx("h4",{className:"card-title text-md text-secondary",children:"Actions"}),l.jsx("div",{className:"space-y-2",children:l.jsx("button",{className:`btn w-full ${i===le.ATTACK?"btn-primary":"btn-outline"}`,onClick:()=>d(),disabled:n.hasAttacked,children:"Capture"})})]})}),h&&!rt(n)&&l.jsx("div",{className:"card bg-base-100/50 glass shadow-lg border border-base-300",children:l.jsxs("div",{className:"card-body p-4",children:[l.jsx("h4",{className:"card-title text-md text-secondary",children:"Attacks"}),l.jsx("div",{className:"space-y-4",children:p.map(v=>l.jsx("div",{className:`
                    ${Hn(n)?"cursor-pointer":"cursor-default"}
                    ${v.id===s?"border-primary":"border-base-300"}
                    card bg-base-200/50 border
                  `,onClick:()=>u(v.id),children:l.jsxs("div",{className:"card-body p-2",children:[l.jsx("h5",{className:"font-semibold text-base-content",children:v.name}),l.jsx("p",{className:"text-sm text-base-content/80",children:v.description}),l.jsxs("div",{className:"flex flex-wrap gap-2",children:[v.power[0]>0&&l.jsxs("span",{className:"badge badge-xs badge-outline",children:["Power: ",v.power[0],"d",v.power[1]]}),Object.entries(v.pattern.meta).map(([_,$])=>l.jsxs("span",{className:"badge badge-xs badge-outline",children:[_,": ",$]},_)),v.effects.map((_,$)=>l.jsx(KE,{effect:_},`effect-${$}`))]})]})},v.id))})]})})]})},eC=Wt([n=>n.overworld],n=>n.locations.find(s=>s.id===n.playerLocationId)),tC=Wt([n=>n.overworld],n=>{const s=n.connections.filter(i=>n.unlockedConnections.includes(`${i.from}:${i.to}`)||n.unlockedConnections.includes(`${i.to}:${i.from}`));return n.locations.filter(i=>s.some(o=>[o.from,o.to].includes(i.id))).map(i=>i.id)}),nC=Wt([n=>n.overworld],n=>{const s=n.locations.find(i=>i.id===n.playerLocationId);return!s||!s.battleConfigId?null:Dh(s.battleConfigId)}),rC=()=>Ge(n=>n.overworld),sC=()=>Ge(n=>eC(n)),iC=()=>Ge(n=>tC(n)),fw=()=>Ge(n=>nC(n)),aC=()=>{const n=Pr();return{moveToLocation:s=>n(Cr.moveToLocation(s)),unlockConnection:s=>n(Cr.unlockConnections(s))}},oC=(n,s)=>{const{map:i,placementMode:o,currentPlayerId:u}=Ye(),{removePlacedUnit:d,setPlacementMode:p,placeUnit:m}=Mr(),{general:h,placedUnits:y,totalPlacedCost:v}=sw(u),_=SE(),$=fw();if(!$)throw new Error("Battle config not found");const S=$.pointLimit,M=A.useCallback((w,T)=>{if(!sn(w,i,T)||$r(i,w)||v+Tr(T)>S)return!1;if(o===wt.GENERAL){const I=Math.floor((i.length-1)/2);return w.q===-I||w.q+w.r===-I}else return _?at(w,_)<=3:!1},[i,_,o,S,v]),L=A.useCallback(w=>{const T=y.find(I=>I.id===w);if(!T){console.warn("Unit not found for removal:",w);return}if(T.playerId!==u){console.warn("Cannot remove enemy unit");return}w===h?.id?(y.filter(z=>z.playerId===u).forEach(z=>{d(z.id)}),p(wt.GENERAL),s(h)):d(w)},[y,h,u,d,p,s]),U=A.useCallback((w,T)=>{M(T.position,w)&&(m(w,T.position),s(null),o===wt.GENERAL&&w.unitType==="general"&&p(wt.UNITS))},[m,s,o,M,p]),E=A.useCallback((w,T)=>{if(T){L(T.id);return}if(n){U(n,w);return}},[U,L,n]),R=A.useCallback((w,T,I)=>I?M({q:w,r:T},I):!1,[M]);return{handleTileClick:E,handleRemoveUnit:L,isPlacementTarget:R}},lC=()=>{const{selectSquad:n}=pa(),{finishUnitPlacement:s}=Mr(),{currentPlayerId:i,placementMode:o}=Ye(),u=nw(i),{handleTileHover:d,handleTileLeave:p,isHovered:m}=dw(),{general:h,availableArmyUnits:y,placedUnits:v,selectedSquadId:_,totalPlacedCost:$}=sw(i),[S,M]=A.useState(h),{handleTileClick:L,handleRemoveUnit:U,isPlacementTarget:E}=oC(S,M),R=fw();if(!R)throw new Error("Battle config not found");const w=R.pointLimit,T=w-$;return h?l.jsxs("div",{className:"flex-1 min-h-screen bg-base-100 p-6",children:[l.jsx("div",{className:"card bg-base-100 shadow-lg border border-base-300 mb-6",children:l.jsxs("div",{className:"card-body text-center",children:[l.jsx("h2",{className:"card-title text-3xl text-primary justify-center",children:"Place Your Units"}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("p",{className:"text-lg",children:["Player ",i,"'s Turn"]}),o===wt.GENERAL?l.jsx("p",{className:"text-base-content/70",children:"First, place your General on the map"}):l.jsx("p",{className:"text-base-content/70",children:"Now place your other units within 3 tiles of your General"}),l.jsxs("div",{className:"stats stats-horizontal bg-base-200 rounded-lg",children:[l.jsxs("div",{className:"stat",children:[l.jsx("div",{className:"stat-title text-xs",children:"Point Limit"}),l.jsx("div",{className:"stat-value text-lg text-primary",children:w})]}),l.jsxs("div",{className:"stat",children:[l.jsx("div",{className:"stat-title text-xs",children:"Used"}),l.jsx("div",{className:"stat-value text-lg text-secondary",children:$})]}),l.jsxs("div",{className:"stat",children:[l.jsx("div",{className:"stat-title text-xs",children:"Remaining"}),l.jsx("div",{className:`stat-value text-lg ${T>=0?"text-success":"text-error"}`,children:T})]})]})]})]})}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[l.jsx("div",{className:"card bg-base-100 shadow-lg border border-base-300",children:l.jsxs("div",{className:"card-body",children:[l.jsx("h3",{className:"card-title text-xl mb-4",children:"Available Units"}),o===wt.UNITS&&l.jsxs("div",{className:"mb-4",children:[l.jsx("label",{className:"label",children:l.jsx("span",{className:"label-text",children:"Filter by Squad:"})}),l.jsxs("select",{className:"select select-bordered w-full",value:_??void 0,onChange:I=>n(i,I.target.value),children:[l.jsx("option",{value:"all",children:"All Units"}),u.map(I=>l.jsx("option",{value:I.id,children:I.name},I.id)),l.jsx("option",{value:"unassigned",children:"Unassigned"})]})]}),l.jsxs("div",{className:"space-y-3",children:[(o===wt.GENERAL?[h]:y).map(I=>{const z=Tr(I),Q=$+z<=w;return l.jsx("div",{className:`card bg-base-200 border-2 cursor-pointer transition-all duration-200 ${S?.id===I.id?"border-primary ring-2 ring-primary/50":"border-base-300"} ${!Q&&o===wt.UNITS?"opacity-50":""}`,onClick:()=>M(I),children:l.jsxs("div",{className:"card-body p-3",children:[l.jsxs("div",{className:"flex justify-between items-baseline mb-2 gap-2",children:[l.jsx("div",{className:"flex-1 font-medium text-base-content",children:I.name}),z>0&&l.jsx("span",{className:"badge badge-secondary",children:`${z} pts`})]}),l.jsxs("div",{className:"stats stats-horizontal bg-base-100 rounded-lg",children:[l.jsxs("div",{className:"stat",children:[l.jsx("div",{className:"stat-title text-xs",children:"HP"}),l.jsx("div",{className:"stat-value text-sm",children:I.maxHealth})]}),l.jsxs("div",{className:"stat",children:[l.jsx("div",{className:"stat-title text-xs",children:"ATK"}),l.jsx("div",{className:"stat-value text-sm",children:I.attack})]}),l.jsxs("div",{className:"stat",children:[l.jsx("div",{className:"stat-title text-xs",children:"DEF"}),l.jsx("div",{className:"stat-value text-sm",children:I.defense})]})]}),!Q&&o===wt.UNITS&&l.jsx("div",{className:"text-error text-xs mt-2 text-center",children:"Cannot afford this unit"})]})},I.id)}),y.length===0&&l.jsxs("div",{className:"text-center py-8 text-base-content/70",children:[l.jsx("div",{className:"text-2xl mb-2",children:""}),l.jsx("p",{children:"No units available for this squad"})]})]})]})}),l.jsx("div",{className:"card bg-base-100 shadow-lg border border-base-300",children:l.jsxs("div",{className:"card-body",children:[l.jsx("h3",{className:"card-title text-xl mb-4",children:"Map"}),l.jsx("div",{className:"h-[400px] max-h-[400px] min-h-[400px] border border-base-300",children:l.jsx(uw,{hexSize:20,onTileClick:L,onTileHover:d,onTileLeave:p,isMovementTarget:(I,z)=>E(I,z,S),isInDamagePreview:()=>!1,isAttackTarget:()=>!1,isCaptureTarget:()=>!1,isHovered:m,disableCameraControls:!0,getUnitEffects:()=>({isFlashing:!1,isBeingCaptured:!1,damageNumber:void 0})})})]})}),l.jsx("div",{className:"card bg-base-100 shadow-lg border border-base-300",children:l.jsxs("div",{className:"card-body",children:[l.jsx("h3",{className:"card-title text-xl mb-4",children:"Placed Units"}),l.jsx("div",{className:"space-y-3 mb-6",children:v.map(I=>l.jsx("div",{className:"card bg-base-200 border border-base-300",children:l.jsx("div",{className:"card-body p-3",children:l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsxs("span",{className:"font-medium",children:[I.name," (",I.unitType,")"]}),!rt(I)&&l.jsxs("div",{className:"text-xs text-base-content/70",children:["Cost: ",Tr(I)," pts"]})]}),l.jsx("button",{className:"btn btn-sm btn-outline btn-error",onClick:z=>U(I.id),children:"Remove"})]})})},I.id))}),l.jsx("button",{className:"btn btn-primary btn-block",onClick:s,disabled:o===wt.GENERAL||v.length===1,children:"Start Battle"})]})})]})]}):l.jsx("div",{className:"flex-1 min-h-screen bg-base-100 p-6",children:l.jsx("div",{className:"card bg-error text-error-content shadow-lg border border-error",children:l.jsxs("div",{className:"card-body text-center",children:[l.jsx("h2",{className:"card-title text-3xl",children:"Error"}),l.jsx("p",{children:"General unit not found in army!"})]})})})};class cC{name="Improved Strategic";DEBUG_LOGGING=!1;log(s,...i){this.DEBUG_LOGGING&&console.log(`[AI Strategy] ${s}`,...i)}selectUnitsToAct(s,i){this.log("=== SELECTING UNITS TO ACT ===");const o=s.filter(p=>!p.hasMoved||!p.hasAttacked);if(this.log(`Found ${o.length} available units out of ${s.length} total`),o.length===0)return this.log("No units available to act"),[];const d=o.sort((p,m)=>{const h=!p.hasMoved,y=!m.hasMoved;if(h&&!y)return-1;if(!h&&y)return 1;const v=!p.hasAttacked,_=!m.hasAttacked;return v&&!_?-1:!v&&_?1:0}).map(p=>p.id);return this.log("Selected units in priority order:",d.map(p=>{const m=s.find(h=>h.id===p);return`${p} (can move: ${!m?.hasMoved}, can attack: ${!m?.hasAttacked})`})),d}selectMovementTarget(s,i){if(this.log(`=== SELECTING MOVEMENT TARGET FOR UNIT ${s.id} ===`),s.hasMoved)return this.log(`Unit ${s.id} has already moved, skipping`),null;const{map:o,radius:u,units:d}=i,p=this.findEnemyUnits(s.playerId,d);if(this.log(`Found ${p.length} enemy units`),p.length===0)return this.log("No enemies found, no movement needed"),null;const m=Me(o,s.id);if(!m)return this.log(`Unit ${s.id} not found on map`),null;const h=Zl(o,u,s,m);if(this.log(`Found ${h.length} valid movement targets`),h.length===0)return this.log("No valid movement targets available"),null;const y=this.selectBestAttack(s,i);if(!y){this.log("No good attack available, moving towards closest enemy");const _=this.findClosestEnemy(s,p,o);if(!_)return this.log("No closest enemy found"),null;const $=Me(o,_.id);if(!$)return this.log("Closest enemy position not found"),null;const S=this.findBestMovementTowardsTarget(h,$);return this.log(`Moving towards enemy ${_.id} at position (${$.q}, ${$.r})`),S}const v=this.findBestPositionForAttack(s,y,h,i);return this.log(`Selected attack position: (${v?.q}, ${v?.r})`),v}selectAttackTarget(s,i){if(this.log(`=== SELECTING ATTACK TARGET FOR UNIT ${s.id} ===`),s.hasAttacked)return this.log(`Unit ${s.id} has already attacked, skipping`),null;const{map:o}=i;if(!Me(o,s.id))return this.log(`Unit ${s.id} not found on map`),null;const d=nn(s.attacks);if(this.log(`Unit has ${d.length} available attacks:`,d.map(h=>h.id)),d.length===0)return this.log("No attacks available"),null;const p=this.selectBestAttack(s,i);if(!p)return this.log("No suitable attack found"),null;this.log(`Selected best attack: ${p.id}`);const m=this.findBestTargetForAttack(s,p,i);return m?(this.log(`Selected target position: (${m.q}, ${m.r})`),{target:m,attackId:p.id}):(this.log("No suitable target found for selected attack"),null)}selectAttackType(s,i,o){if(nn(s.attacks).length===0)throw new Error(`Unit ${s.id} has no attacks`);return this.selectBestAttackForPosition(s,i,o).id}isPositiveEffect(s){switch(s.type){case D.HEAL:return!0;case D.SHIELD:return!0;case D.REFLECT:return!0;case D.HASTE:return!0;case D.APPLY_MODIFIER:return s.value>0;default:return!1}}isNegativeEffect(s){switch(s.type){case D.POISON:case D.STUN:case D.SLEEP:case D.BURN:case D.BLEED:case D.ROOT:case D.DRAIN:return!0;case D.APPLY_MODIFIER:return s.value<0;default:return!1}}getEffectValue(s){switch(s.type){case D.HEAL:return s.value;case D.SHIELD:return s.amount||0;case D.APPLY_MODIFIER:return s.value;case D.POISON:case D.BURN:case D.BLEED:return 0;case D.DRAIN:return-(s.amount||0);default:return 0}}selectBestAttack(s,i){this.log(`Evaluating attacks for unit ${s.id}`);const o=nn(s.attacks);if(o.length===0)return this.log("No attacks available"),null;if(o.length===1)return this.log(`Only one attack available: ${o[0].id}`),o[0];let u=o[0],d=this.evaluateAttack(o[0],s,i);this.log(`Evaluating attack ${o[0].id}: score ${d.toFixed(2)}`);for(let p=1;p<o.length;p++){const m=this.evaluateAttack(o[p],s,i);this.log(`Evaluating attack ${o[p].id}: score ${m.toFixed(2)}`),m>d&&(d=m,u=o[p],this.log(`New best attack: ${o[p].id} with score ${m.toFixed(2)}`))}return this.log(`Final selection: ${u.id} with score ${d.toFixed(2)}`),u}evaluateAttack(s,i,o){const{map:u}=o;if(!Me(u,i.id))return-1/0;if(s.pattern.id==="self")return this.evaluateSelfAttack(s,i);const p=this.findBestTargetForAttack(i,s,o);return p?this.evaluateTargetPosition(s,p,i,o):-1/0}evaluateSelfAttack(s,i){let o=0;for(const p of s.effects)this.isPositiveEffect(p)?o+=this.getEffectValue(p):this.isNegativeEffect(p)&&(o-=this.getEffectValue(p));const[u,d]=s.power;return o+=u*d*.5,o}findBestTargetForAttack(s,i,o){this.log(`Finding best target for attack ${i.id}`);const{map:u}=o,d=Me(u,s.id);if(!d)return this.log("Unit position not found"),null;if(i.pattern.id==="self")return this.log("Self-targeting attack, targeting self"),d;const p=this.getPossibleTargets(s,i,o);if(this.log(`Found ${p.length} possible targets`),p.length===0)return this.log("No possible targets found"),null;let m=p[0],h=this.evaluateTargetPosition(i,m,s,o);this.log(`Evaluating target (${m.q}, ${m.r}): score ${h.toFixed(2)}`);for(let y=1;y<p.length;y++){const v=this.evaluateTargetPosition(i,p[y],s,o);this.log(`Evaluating target (${p[y].q}, ${p[y].r}): score ${v.toFixed(2)}`),v>h&&(h=v,m=p[y],this.log(`New best target: (${p[y].q}, ${p[y].r}) with score ${v.toFixed(2)}`))}return this.log(`Final target selection: (${m.q}, ${m.r}) with score ${h.toFixed(2)}`),m}getPossibleTargets(s,i,o){const{map:u,units:d}=o,p=Me(u,s.id);if(!p)return[];const m=[];if(i.pattern.needsTarget){const h=this.findEnemyUnits(s.playerId,d);for(const y of h){const v=Me(u,y.id);v&&i.pattern.validateAttack(p,v)&&m.push(v)}}else{const{radius:h}=o;for(let y=-h;y<=h;y++)for(let v=-h;v<=h;v++){const _={q:y,r:v};i.pattern.validateAttack(p,_)&&m.push(_)}}return m}evaluateTargetPosition(s,i,o,u){const{map:d}=u;if(!Me(d,o.id))return-1/0;const m=this.getAffectedUnits(s,i,o,u);let h=0;for(const y of m.allies)h+=this.evaluateEffectOnUnit(s,y,!0);for(const y of m.enemies){h+=this.evaluateEffectOnUnit(s,y,!1);const[v,_]=s.power;h+=v*_*.5}return h}getAffectedUnits(s,i,o,u){const{map:d,units:p}=u,m=Me(d,o.id);if(!m)return{allies:[],enemies:[]};const h=s.pattern.getTargets(m,i,u.radius),y=[],v=[];for(const _ of h){const $=this.findUnitAtPosition(_,p,d);$&&($.playerId===o.playerId?y.push($):v.push($))}return{allies:y,enemies:v}}evaluateEffectOnUnit(s,i,o){const u=o?-1:1;let d=0;for(const h of s.effects){const y=this.getEffectValue(h);this.isPositiveEffect(h)?d+=-y*u:this.isNegativeEffect(h)&&(d+=y*u)}const[p,m]=s.power;return d+=u*p*m*.5,d}findBestPositionForAttack(s,i,o,u){let d=o[0],p=this.evaluateTargetPosition(i,d,s,u);for(let m=1;m<o.length;m++){const h=this.evaluateTargetPosition(i,o[m],s,u);h>p&&(p=h,d=o[m])}if(p===0){this.log("Best attack score is zero, moving towards opponent's general");const m=this.findEnemyGeneral(s.playerId,u.units);if(m){const h=Me(u.map,m.id);if(h){this.log(`Moving towards enemy general at (${h.q}, ${h.r})`);const y=this.findBestMovementTowardsTarget(o,h);this.log(`Best position towards general: (${y.q}, ${y.r})`),d=y}}}return this.log(`Best position for attack ${i.id}: (${d.q}, ${d.r}) with score ${p.toFixed(2)}`),d}selectBestAttackForPosition(s,i,o){const u=nn(s.attacks);let d=u[0],p=this.evaluateTargetPosition(u[0],i,s,o);for(let m=1;m<u.length;m++){const h=this.evaluateTargetPosition(u[m],i,s,o);h>p&&(p=h,d=u[m])}return d}findUnitAtPosition(s,i,o){for(const u of Object.values(i)){const d=Me(o,u.id);if(d&&d.q===s.q&&d.r===s.r)return u}return null}findEnemyUnits(s,i){const o=[];return Object.values(i).forEach(u=>{u.playerId!==s&&o.push(u)}),o}findEnemyGeneral(s,i){this.log(`Finding enemy general for player ${s}`);const u=this.findEnemyUnits(s,i).find(d=>rt(d));return u?this.log(`Found enemy general: ${u.id}`):this.log("No enemy general found"),u||null}findClosestEnemy(s,i,o){if(this.log(`Finding closest enemy for unit ${s.id}`),i.length===0)return this.log("No enemy units available"),null;const u=Me(o,s.id);if(!u)return this.log("Unit position not found"),null;let d=null,p=1/0;for(const m of i){const h=Me(o,m.id);if(h){const y=at(u,h);this.log(`Enemy ${m.id} at distance ${y}`),y<p&&(p=y,d=m,this.log(`New closest enemy: ${m.id} at distance ${y}`))}}return this.log(`Closest enemy: ${d?.id||"none"} at distance ${p}`),d}findBestMovementTowardsTarget(s,i){this.log(`Finding best movement towards target (${i.q}, ${i.r}) from ${s.length} options`);let o=s[0],u=at(s[0],i);this.log(`Initial position (${s[0].q}, ${s[0].r}) at distance ${u}`);for(const d of s){const p=at(d,i);this.log(`Position (${d.q}, ${d.r}) at distance ${p}`),p<u&&(u=p,o=d,this.log(`New best position: (${d.q}, ${d.r}) at distance ${p}`))}return this.log(`Final movement target: (${o.q}, ${o.r}) at distance ${u}`),o}}class uC{aiConfigs=new Map;constructor(){const s=new cC;this.aiConfigs.set(1,{playerId:1,strategy:s,isEnabled:!1}),this.aiConfigs.set(2,{playerId:2,strategy:s,isEnabled:!1})}isAIPlayer(s){return this.aiConfigs.get(s)?.isEnabled||!1}setAIPlayer(s,i,o){const u=this.aiConfigs.get(s);u&&this.aiConfigs.set(s,{...u,isEnabled:i,strategy:o||u.strategy})}determineAIAction(s,i){const o=this.aiConfigs.get(s);if(!o||!o.isEnabled)throw new Error(`Player ${s} is not enabled`);const u=o.strategy,d=this.getPlayerUnits(s,i),p=u.selectUnitsToAct(d,i);if(p.length===0)return{type:"end_turn"};for(const m of p){const h=i.units[m];if(!h)throw new Error(`Unit ${m} not found`);if(!h.hasMoved){const y=u.selectMovementTarget(h,i);if(y)return{type:"move",unitId:m,targetPosition:y}}if(!h.hasAttacked){const y=u.selectAttackTarget(h,i);if(y)return{type:"attack",unitId:m,targetPosition:y.target,attackId:y.attackId}}}return{type:"end_turn"}}getPlayerUnits(s,i){const o=i.players.find(u=>u.id===s);return o?o.units.map(u=>i.units[u]).filter(Boolean):[]}}const dC=1e3,fC=()=>{const n=Ye(),{currentPlayerId:s,aiPlayers:i,gamePhase:o,winner:u}=n,{moveUnit:d,startMovement:p,startAttacking:m}=Mr(),{executeAttack:h,endTurn:y}=Cs(),v=A.useRef(null);A.useEffect(()=>{v.current||(v.current=new uC,i.forEach(S=>{v.current.setAIPlayer(S.playerId,S.isEnabled)}))},[i]);const _=A.useCallback(()=>{if(!v.current)return;const S=v.current.determineAIAction(s,n);S.type==="move"&&S.targetPosition?(p(S.unitId),d(S.unitId,S.targetPosition)):S.type==="attack"&&S.targetPosition&&S.attackId?(m(S.unitId,S.attackId),h(S.unitId,S.targetPosition)):S.type==="end_turn"&&y()},[s,y,d,h,p,m,n]);A.useEffect(()=>{if(v.current&&o===$t.SELECTION&&v.current.isAIPlayer(s)&&!u){const S=setTimeout(()=>{_()},dC);return()=>clearTimeout(S)}},[s,o,i,_,u]);const $=A.useCallback(()=>{v.current&&i.forEach(S=>{v.current.setAIPlayer(S.playerId,S.isEnabled)})},[i]);A.useEffect(()=>{$()},[i,$])},pC=()=>{const{map:n,units:s,gamePhase:i}=Ye(),o=NE(),u=Ar(),{handleTileClick:d,handleUnitClick:p,handleUnitDeselection:m,handleEndTurn:h,handleAttackSelection:y,handleCaptureSelection:v}=ma(),_=A.useCallback(R=>{const w=parseInt(R.key,10)-1,T=s[o[w]];T&&(R.preventDefault(),p(T,R))},[s,o,p]),$=A.useCallback(R=>{R.preventDefault(),m()},[m]),S=A.useCallback(R=>{if(!u)return;const w=Me(n,u.id);if(!w)return;let T=null;switch(R.key){case"w":T={q:w.q,r:w.r-1};break;case"e":T={q:w.q+1,r:w.r-1};break;case"a":T={q:w.q-1,r:w.r};break;case"s":T={q:w.q,r:w.r};break;case"d":T={q:w.q+1,r:w.r};break;case"z":T={q:w.q-1,r:w.r+1};break;case"x":T={q:w.q+1,r:w.r+1};break}if(!T)return;const I=Kl(T,n);if(!I)return;const z=B_(T,n,s);R.preventDefault(),d(I,z??void 0,R)},[d,u,n,s]),M=A.useCallback(R=>{R.preventDefault(),h()},[h]),L=A.useCallback(R=>{if(!u)return;if(R.key==="j"&&rt(u)){v();return}const T={j:0,k:1,l:2,";":3}[R.key];if(T===void 0)return;const I=u.attacks[T];I&&(R.preventDefault(),y(I))},[y,v,u]),U=A.useCallback(R=>{R.preventDefault(),document.getElementById("chat-input")?.focus()},[]);return{handleKeyDown:A.useCallback(R=>{if(i!==$t.UNIT_PLACEMENT)switch(R.key){case"Escape":{$(R);break}case"Enter":M(R);break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":{_(R);break}case"w":case"e":case"a":case"s":case"d":case"z":case"x":S(R);break;case"j":case"k":case"l":case";":L(R);break;case"/":U(R);break;default:return}},[_,$,S,M,L,U,i])}},mC=()=>{const{gamePhase:n}=Ye();fC();const{handleKeyDown:s}=pC();return A.useEffect(()=>(document.addEventListener("keydown",s),()=>{document.removeEventListener("keydown",s)}),[s]),l.jsxs("div",{className:"flex h-screen min-h-screen bg-base-100",tabIndex:-1,children:[n===$t.UNIT_PLACEMENT&&l.jsx(lC,{}),n!==$t.UNIT_PLACEMENT&&l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"flex-1 flex flex-col",children:l.jsx(HE,{})}),l.jsx("div",{className:"w-96 overflow-y-auto absolute top-0 left-0 max-h-full",children:l.jsx(GE,{})}),l.jsxs("div",{className:"w-96 overflow-y-auto absolute top-0 right-0 max-h-full",children:[l.jsx(TE,{}),l.jsx(JE,{})]})]})]})},hC=()=>{const{captures:n,currentPlayerId:s}=Ye(),i=tw(s);return n.length===0?null:l.jsx("div",{className:"card bg-base-200 border border-base-300 mb-8",children:l.jsxs("div",{className:"card-body",children:[l.jsx("h3",{className:"card-title text-xl mb-4 justify-center",children:"Captures"}),l.jsx("div",{className:"space-y-4",children:n.map((o,u)=>{const d=i.find(h=>h.id===o);if(!d)return null;const p=He(d.unitType),m=nn(d.attacks);return l.jsx("div",{className:"card bg-base-100 border border-base-300",children:l.jsx("div",{className:"card-body p-4",children:l.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[l.jsx("div",{className:"flex-shrink-0",children:l.jsx("div",{className:"w-24 h-24 mx-auto lg:mx-0",children:l.jsx("img",{src:p.image,alt:p.name,className:"w-full h-full object-contain rounded-lg border border-base-300"})})}),l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 mb-4",children:[l.jsxs("div",{children:[l.jsx("h4",{className:"font-semibold text-xl text-primary mb-1",children:d.name}),l.jsx("p",{className:"text-sm text-base-content/70 capitalize",children:p.name})]}),l.jsx("div",{className:"badge badge-lg badge-success",children:"Captured"})]}),l.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4 mb-4",children:[l.jsxs("div",{className:"flex flex-col",children:[l.jsx("span",{className:"text-base-content/70 text-xs uppercase tracking-wide mb-1",children:"Level"}),l.jsx("span",{className:"font-semibold text-lg",children:d.level})]}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx("span",{className:"text-base-content/70 text-xs uppercase tracking-wide mb-1",children:"Max Health"}),l.jsx("span",{className:"font-semibold text-lg text-success",children:d.maxHealth})]}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx("span",{className:"text-base-content/70 text-xs uppercase tracking-wide mb-1",children:"Attack"}),l.jsx("span",{className:"font-semibold text-lg text-error",children:d.attack})]}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx("span",{className:"text-base-content/70 text-xs uppercase tracking-wide mb-1",children:"Defense"}),l.jsx("span",{className:"font-semibold text-lg text-info",children:d.defense})]})]}),l.jsxs("div",{children:[l.jsx("h5",{className:"font-medium text-base mb-2 text-base-content/90",children:"Attacks"}),l.jsx("div",{className:"space-y-2",children:m.map(h=>l.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between p-3 bg-base-200 rounded-lg border border-base-300",children:[l.jsxs("div",{className:"flex-1",children:[l.jsx("h6",{className:"font-medium text-sm text-primary mb-1",children:h.name}),l.jsx("p",{className:"text-xs text-base-content/70 mb-2",children:h.description})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("div",{className:"badge badge-outline badge-sm",children:[h.power[0],"d",h.power[1]]}),l.jsx("div",{className:"badge badge-ghost badge-sm",children:h.pattern.needsTarget?"Targeted":"Area"})]})]},h.id))})]})]})]})})},`${o}-${u}`)})})]})})},gC=()=>{const{units:n,experienceGains:s}=Ye(),i=s.filter(o=>{const u=n[o.unitId];return u&&u.unitType!=="general"&&o.experience>0});return i.length===0?null:l.jsx("div",{className:"card bg-base-200 border border-base-300 mb-8",children:l.jsxs("div",{className:"card-body",children:[l.jsx("h3",{className:"card-title text-xl mb-4 justify-center",children:"Experience Breakdown"}),l.jsx("div",{className:"space-y-4",children:i.map(o=>{const u=n[o.unitId];return u?l.jsx("div",{className:"card bg-base-100 border border-base-300",children:l.jsx("div",{className:"card-body p-4",children:l.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[l.jsxs("div",{className:"flex-1",children:[l.jsx("h4",{className:"font-semibold text-lg text-primary mb-2",children:u.name}),l.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3 text-sm",children:[l.jsxs("div",{className:"flex flex-col",children:[l.jsx("span",{className:"text-base-content/70 text-xs uppercase tracking-wide",children:"Kills"}),l.jsx("span",{className:"font-medium text-base-content",children:o.kills})]}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx("span",{className:"text-base-content/70 text-xs uppercase tracking-wide",children:"Experience"}),l.jsxs("span",{className:"font-medium text-success",children:[o.experience," XP"]})]}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx("span",{className:"text-base-content/70 text-xs uppercase tracking-wide",children:"Status"}),l.jsx("span",{className:`font-medium ${o.survived?"text-success":"text-error"}`,children:o.survived?"Survived":"Fallen"})]}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx("span",{className:"text-base-content/70 text-xs uppercase tracking-wide",children:"Unit Type"}),l.jsx("span",{className:"font-medium text-accent capitalize",children:u.unitType})]})]})]}),l.jsx("div",{className:"flex-shrink-0",children:l.jsx("div",{className:`badge badge-lg ${o.survived?"badge-success":"badge-error"}`,children:o.survived?"Alive":"Defeated"})})]})})},o.unitId):null})})]})})},$f=4,vC=({levelUpUnit:n,onClose:s})=>{const{learnAttack:i,forgetAttack:o}=pa(),u=rw(n.playerId,n.unitId),[d,p]=A.useState(null),[m,h]=A.useState(null);if(!u)return null;const y=u.attacks.length<$f,v=!y&&n.availableAttacks.length>0,_=()=>{d&&(y?i(n.playerId,n.unitId,d):m&&(o(n.playerId,n.unitId,m),i(n.playerId,n.unitId,d)),s())},$=()=>{s()},S=M=>Sn(M).description;return l.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:l.jsx("div",{className:"card bg-base-100 shadow-2xl border border-base-300 max-w-2xl w-full",children:l.jsxs("div",{className:"card-body p-8",children:[l.jsxs("div",{className:"text-center mb-6",children:[l.jsx("h2",{className:"text-2xl font-bold text-primary mb-2",children:"Learn New Attack"}),l.jsxs("p",{className:"text-lg text-base-content/70",children:[l.jsx("span",{className:"font-semibold text-accent",children:u.name})," can learn a new attack!"]})]}),l.jsxs("div",{className:"mb-6",children:[l.jsxs("h3",{className:"text-xl font-semibold mb-4",children:["Current Attacks (",u.attacks.length,"/",$f,")"]}),l.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:u.attacks.map(M=>l.jsx("div",{className:`card bg-base-200 border-2 cursor-pointer transition-all ${m===M?"border-error bg-error/10":v?"border-base-300 hover:border-error/50":"border-base-300"}`,onClick:()=>v&&h(M),children:l.jsxs("div",{className:"card-body p-3",children:[l.jsx("h4",{className:"card-title text-sm",children:M}),l.jsx("p",{className:"text-xs text-base-content/70",children:S(M)}),v&&l.jsx("p",{className:"text-xs text-error mt-1",children:m===M?"Selected for replacement":"Click to replace"})]})},M))})]}),n.availableAttacks.length>0&&l.jsxs("div",{className:"mb-6",children:[l.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Available to Learn"}),l.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:n.availableAttacks.map(M=>l.jsx("div",{className:`card bg-base-200 border-2 cursor-pointer transition-all ${d===M?"border-success bg-success/10":"border-base-300 hover:border-success/50"}`,onClick:()=>p(M),children:l.jsxs("div",{className:"card-body p-3",children:[l.jsx("h4",{className:"card-title text-sm",children:M}),l.jsx("p",{className:"text-xs text-base-content/70",children:S(M)}),d===M&&l.jsx("p",{className:"text-xs text-success mt-1",children:"Selected to learn"})]})},M))})]}),l.jsx("div",{className:"alert alert-info mb-6",children:l.jsx("div",{className:"text-sm",children:y?l.jsx("p",{children:"Select an attack to learn. You have available attack slots."}):v?l.jsx("p",{children:"Your attack slots are full. Select an attack to learn and an existing attack to replace."}):l.jsx("p",{children:"No new attacks are available to learn at this level."})})}),l.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[l.jsx("button",{className:"btn btn-primary btn-lg",onClick:_,disabled:!d||v&&!m,children:"Learn Attack"}),l.jsx("button",{className:"btn btn-ghost btn-lg",onClick:$,children:"Skip"})]})]})})})},yC=({levelUpUnit:n})=>{const{applyLevelUp:s}=pa(),i=rw(n.playerId,n.unitId),[o,u]=A.useState(!1);if(!n||!i)return null;const d=()=>{s(n)},p=()=>{u(!0)},m=()=>{u(!1)};return l.jsxs("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:[l.jsx("div",{className:"card bg-base-100 shadow-2xl border border-base-300 max-w-lg w-full",children:l.jsxs("div",{className:"card-body p-8",children:[l.jsx("div",{className:"text-center mb-6",children:l.jsxs("p",{className:"text-lg text-base-content/70",children:[l.jsx("span",{className:"font-semibold text-accent",children:i.name})," has reached level"," ",l.jsx("span",{className:"font-bold text-success",children:n.newLevel}),"!"]})}),l.jsx("div",{className:"card bg-base-200 border border-base-300 mb-6",children:l.jsxs("div",{className:"card-body p-4",children:[l.jsxs("div",{className:"flex items-center justify-between mb-3",children:[l.jsx("h3",{className:"card-title text-lg text-base-content",children:i.name}),l.jsx("div",{className:"badge badge-accent badge-outline capitalize",children:i.unitType})]}),l.jsxs("div",{className:"stats stats-horizontal shadow bg-base-100",children:[l.jsxs("div",{className:"stat",children:[l.jsx("div",{className:"stat-title text-xs",children:"Current Level"}),l.jsx("div",{className:"stat-value text-lg text-base-content",children:i.level})]}),l.jsxs("div",{className:"stat",children:[l.jsx("div",{className:"stat-title text-xs",children:"New Level"}),l.jsx("div",{className:"stat-value text-lg text-success",children:n.newLevel})]}),l.jsxs("div",{className:"stat",children:[l.jsx("div",{className:"stat-title text-xs",children:"Available Points"}),l.jsx("div",{className:"stat-value text-lg text-primary",children:n.availablePoints})]})]})]})}),n.availableAttacks.length>0&&l.jsxs("div",{className:"mb-6",children:[l.jsx("h3",{className:"text-xl font-semibold mb-4 text-center",children:"New Attacks Available"}),l.jsx("div",{className:"card bg-base-200 border border-base-300 mb-4",children:l.jsxs("div",{className:"card-body p-4",children:[l.jsxs("p",{className:"text-center text-base-content/70 mb-3",children:[n.availableAttacks.length," new attack",n.availableAttacks.length>1?"s":""," can be learned!"]}),l.jsx("div",{className:"flex justify-center",children:l.jsx("button",{className:"btn btn-secondary btn-sm",onClick:p,children:"Choose Attack"})})]})})]}),l.jsxs("div",{className:"mb-6",children:[l.jsx("h3",{className:"text-xl font-semibold mb-4 text-center",children:"Stat Improvements"}),l.jsxs("div",{className:"space-y-4",children:[l.jsx("div",{className:"card bg-base-200 border border-base-300",children:l.jsx("div",{className:"card-body p-4",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("div",{className:"w-3 h-3 bg-success rounded-full"}),l.jsx("span",{className:"font-semibold text-lg",children:"Health"})]}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"text-sm text-base-content/70 mb-1",children:"Current  New"}),l.jsxs("div",{className:"text-lg font-mono",children:[l.jsx("span",{className:"text-base-content",children:i.maxHealth}),l.jsx("span",{className:"text-base-content/50 mx-2",children:""}),l.jsx("span",{className:"text-success font-bold",children:i.maxHealth+n.statAllocation.health})]})]})]})})}),l.jsx("div",{className:"card bg-base-200 border border-base-300",children:l.jsx("div",{className:"card-body p-4",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("div",{className:"w-3 h-3 bg-error rounded-full"}),l.jsx("span",{className:"font-semibold text-lg",children:"Attack"})]}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"text-sm text-base-content/70 mb-1",children:"Current  New"}),l.jsxs("div",{className:"text-lg font-mono",children:[l.jsx("span",{className:"text-base-content",children:i.attack}),l.jsx("span",{className:"text-base-content/50 mx-2",children:""}),l.jsx("span",{className:"text-error font-bold",children:i.attack+n.statAllocation.attack})]})]})]})})}),l.jsx("div",{className:"card bg-base-200 border border-base-300",children:l.jsx("div",{className:"card-body p-4",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("div",{className:"w-3 h-3 bg-info rounded-full"}),l.jsx("span",{className:"font-semibold text-lg",children:"Defense"})]}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"text-sm text-base-content/70 mb-1",children:"Current  New"}),l.jsxs("div",{className:"text-lg font-mono",children:[l.jsx("span",{className:"text-base-content",children:i.defense}),l.jsx("span",{className:"text-base-content/50 mx-2",children:""}),l.jsx("span",{className:"text-info font-bold",children:i.defense+n.statAllocation.defense})]})]})]})})})]})]}),l.jsx("div",{className:"flex justify-center",children:l.jsx("button",{className:"btn btn-primary btn-lg px-8",onClick:d,children:"Confirm"})})]})}),o&&l.jsx(vC,{levelUpUnit:n,onClose:m})]})},xC=()=>{const{startOverworld:n}=fa(),{winner:s}=Ye(),i=GS(),o=Pl(1),u=Pl(2);if(!s)return l.jsx("div",{className:"min-h-screen bg-base-100 flex items-center justify-center p-6",children:l.jsx("div",{className:"card bg-base-100 shadow-2xl border border-base-300 max-w-2xl w-full",children:l.jsxs("div",{className:"card-body text-center p-8",children:[l.jsx("h1",{className:"text-4xl font-bold text-error mb-4",children:"Error"}),l.jsx("p",{className:"text-lg text-base-content/70",children:"No winner information found"})]})})});const d=($,S,M)=>{switch($){case pt.GENERAL_DEFEATED:return`${M}'s general was defeated in battle`;case pt.ALL_UNITS_DEFEATED:return`${M}'s army was completely destroyed`;case pt.SURRENDER:return`${M} surrendered the battle`;default:return"The battle has ended"}},p=o.filter($=>$.health>0).length,m=u.filter($=>$.health>0).length,h=o.length+u.length,y=p+m,v=()=>{n()},_=()=>{if(s.condition===pt.DRAW)return l.jsxs("div",{className:"mt-6",children:[l.jsx("h2",{className:"text-3xl font-bold text-warning mb-2",children:"It's a Draw!"}),l.jsx("p",{className:"text-lg text-base-content/70",children:"Both armies were destroyed simultaneously"})]});const $=s.playerId===1?"Player 1":"Player 2",S=s.playerId===1?"Player 2":"Player 1";return l.jsxs("div",{className:"mt-6",children:[l.jsxs("h2",{className:"text-3xl font-bold text-success mb-2",children:[$," Wins!"]}),l.jsx("p",{className:"text-lg text-base-content/70",children:d(s.condition,$,S)})]})};return l.jsxs("div",{className:"min-h-screen bg-base-100 flex items-center justify-center p-6",children:[l.jsx("div",{className:"card bg-base-100 shadow-2xl border border-base-300 max-w-2xl w-full",children:l.jsxs("div",{className:"card-body p-8",children:[l.jsxs("div",{className:"mb-8 text-center",children:[l.jsx("h1",{className:"text-4xl font-bold text-warning mb-4",children:"Battle Complete!"}),l.jsx("div",{className:"divider"}),_()]}),l.jsx("div",{className:"card bg-base-200 border border-base-300 mb-8 text-center",children:l.jsxs("div",{className:"card-body",children:[l.jsx("h3",{className:"card-title text-xl mb-4 justify-center",children:"Battle Statistics"}),l.jsxs("div",{className:"stats stats-vertical lg:stats-horizontal shadow",children:[l.jsxs("div",{className:"stat",children:[l.jsx("div",{className:"stat-title",children:"Total Units"}),l.jsx("div",{className:"stat-value text-primary",children:h})]}),l.jsxs("div",{className:"stat",children:[l.jsx("div",{className:"stat-title",children:"Survivors"}),l.jsx("div",{className:"stat-value text-success",children:y})]}),l.jsxs("div",{className:"stat",children:[l.jsx("div",{className:"stat-title",children:"Player 1 Survivors"}),l.jsx("div",{className:"stat-value text-accent",children:p})]}),l.jsxs("div",{className:"stat",children:[l.jsx("div",{className:"stat-title",children:"Player 2 Survivors"}),l.jsx("div",{className:"stat-value text-secondary",children:m})]})]})]})}),l.jsx(gC,{}),l.jsx(hC,{}),l.jsx("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:l.jsxs("button",{className:"btn btn-primary btn-lg",onClick:v,children:[l.jsx(tE,{className:"w-5 h-5"}),"Continue to Overworld"]})})]})}),i&&l.jsx(yC,{levelUpUnit:i})]})},wC=""+new URL("main-menu-BUZRMri6.png",import.meta.url).href,bC=""+new URL("logo-CpZ216rz.png",import.meta.url).href,kC=()=>{const{startOverworld:n}=fa(),{hasStarted:s}=Ir(),{saveGame:i,loadGame:o,startGame:u}=Cs(),d=A.useRef(null),p=()=>{u()},m=()=>{n()},h=()=>{i()},y=()=>{d.current?.click()},v=_=>{const $=_.target.files?.[0];$&&(async()=>{try{await o($),_.target.value=""}catch(S){console.error("Failed to load game:",S)}})()};return l.jsx("div",{className:"min-h-screen bg-cover bg-center bg-no-repeat",style:{backgroundImage:`url(${wC})`},children:l.jsx("div",{className:"hero min-h-screen bg-black/10 flex items-center justify-center",children:l.jsx("div",{className:"hero-content text-center",children:l.jsxs("div",{className:"max-w-md",children:[l.jsx("h1",{className:"text-5xl font-bold mb-20",children:l.jsx("img",{src:bC,alt:"Wildlight Tactics",className:"w-full h-full"})}),l.jsxs("div",{className:"space-y-4",children:[l.jsx("button",{className:"btn btn-accent btn-lg w-full shadow-lg",onClick:p,children:"New Game"}),l.jsx("div",{className:"divider"}),s&&l.jsx("button",{className:"btn btn-accent btn-lg w-full shadow-lg",onClick:m,children:"Resume Game"}),s&&l.jsx("button",{className:"btn btn-accent btn-lg w-full shadow-lg",onClick:h,children:"Save Game"}),l.jsx("button",{className:"btn btn-accent btn-lg w-full shadow-lg",onClick:y,children:"Load Game"}),l.jsx("input",{ref:d,type:"file",accept:".json",onChange:v,className:"hidden"})]})]})})})})},_C=""+new URL("welcome-dialog-d5d2n_JF.png",import.meta.url).href,jC=""+new URL("stone-monkey-BK07GLRa.png",import.meta.url).href,NC=()=>{const n=A.useRef(null),[s,i]=A.useState({step:1,playerName:"",stoneMonkeyName:"Stone Monkey"}),{submitWelcomeDialog:o}=Cs(),{playerName:u}=Ir(),d=m=>{m.preventDefault(),o(s),i(h=>({...h,step:h.step+1})),setTimeout(()=>{n.current?.scrollTo({top:n.current?.scrollHeight,behavior:"smooth"})},0)},p=m=>{const{name:h,value:y}=m.target;i(v=>({...v,[h]:y}))};return l.jsx("div",{className:"fixed inset-0 bg-base-100 flex items-center justify-center p-4 bg-cover bg-center bg-no-repeat",style:{backgroundImage:`url(${_C})`},children:l.jsxs("div",{className:"flex rounded-lg shadow-2xl max-w-6xl w-full max-h-[90vh] overflow-hidden glass",children:[l.jsxs("div",{className:"flex-1 bg-white/40 p-8 overflow-y-auto",children:[l.jsx("h2",{className:"text-4xl font-bold mb-8 text-center",children:"Welcome to the World of Wildlight!"}),l.jsxs("div",{className:"max-w-prose mx-auto space-y-6 text-md leading-relaxed",children:[l.jsx("p",{className:"text-base-content/80",children:"In this reborn world where nature and technology dance together, a new age has dawned. From the ruins of the old world grew gleaming bio-cities that thrive alongside crystal rivers and living architecture, a world where green towers pulse with life and energy flows clean and eternal."}),l.jsxs("p",{className:"text-base-content/80",children:["Here dwell the magnificent ",l.jsx("strong",{children:"Wildlight"}),", extraordinary creatures born when ancient nanobots fused with ordinary animals, evolving over generations into beings of incredible power. These microscopic guardians flow through their bodies like liquid starlight, granting devastating abilities while ensuring no lasting harm can befall them."]}),l.jsx("p",{className:"text-base-content/80",children:"In great bio-arenas, humans and Wildlight engage in spectacular battles, the ultimate sport that celebrates the bond between trainer and creature. Each thunderous clash showcases raw elemental power, but the nanobots protect these majestic beings, making every fight a celebration of what we've built together."}),l.jsx("p",{className:"text-base-content/80",children:l.jsx("em",{children:"Will you step forward to become a Wildlight trainer? Will you forge bonds with these incredible creatures and rise through the ranks of this most noble sport?"})}),l.jsx("p",{className:"text-base-content/80",children:l.jsx("strong",{children:"The arena awaits, trainer. Your legend begins now."})})]})]}),l.jsx("div",{className:"flex-1 p-8 bg-base-200 flex flex-col justify-center overflow-y-auto",ref:n,children:l.jsxs("div",{className:"max-w-md mx-auto w-full",children:[l.jsxs("div",{className:"chat chat-start",children:[l.jsx("div",{className:"chat-header",children:"Wildlight Guide"}),l.jsx("div",{className:"chat-bubble",children:"Welcome to the World of Wildlight! I'll be your guide throughout your journey."})]}),l.jsxs("div",{className:"chat chat-start",children:[l.jsx("div",{className:"chat-header",children:"Wildlight Guide"}),l.jsx("div",{className:"chat-bubble",children:"But first, what is your name?"})]}),s.step>1&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"chat chat-end",children:[l.jsx("div",{className:"chat-header",children:u}),l.jsx("div",{className:"chat-bubble chat-bubble-primary",children:s.playerName})]}),l.jsxs("div",{className:"chat chat-start",children:[l.jsx("div",{className:"chat-header",children:"Wildlight Guide"}),l.jsxs("div",{className:"chat-bubble",children:["Nice to meet you ",u,"!"]})]}),l.jsxs("div",{className:"chat chat-start",children:[l.jsx("div",{className:"chat-header",children:"Wildlight Guide"}),l.jsx("div",{className:"chat-bubble",children:"I'd like to introduce you to Stone Monkey. He will be joinging you on your adventure. Would you like to give him a name?"})]}),l.jsx("img",{src:jC,alt:"Stone Monkey",className:"w-50 h-50"})]}),s.step>2&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"chat chat-end",children:[l.jsx("div",{className:"chat-header",children:u}),l.jsx("div",{className:"chat-bubble chat-bubble-primary",children:s.stoneMonkeyName})]}),l.jsxs("div",{className:"chat chat-start",children:[l.jsx("div",{className:"chat-header",children:"Wildlight Guide"}),l.jsx("div",{className:"chat-bubble",children:"That's a great name! Let's get you started on your journey."})]})]}),l.jsx("div",{className:"divider"}),l.jsx("form",{onSubmit:d,className:"my-6",children:l.jsxs("div",{className:"flex w-full gap-2",children:[s.step===1&&l.jsxs(l.Fragment,{children:[l.jsx("input",{type:"text",name:"playerName",placeholder:"Enter your name...",className:"input input-bordered w-full",value:s.playerName,onChange:p,maxLength:20,required:!0,autoFocus:!0}),l.jsx("button",{type:"submit",className:"btn btn-primary ",children:"Send"})]}),s.step===2&&l.jsxs(l.Fragment,{children:[l.jsx("input",{type:"text",name:"stoneMonkeyName",placeholder:"Enter Stone Monkey's name...",className:"input input-bordered w-full",value:s.stoneMonkeyName,onChange:p,maxLength:20,required:!0,autoFocus:!0}),l.jsx("button",{type:"submit",className:"btn btn-primary ",children:"Send"})]}),s.step===3&&l.jsx("button",{type:"submit",className:"btn btn-primary w-full",autoFocus:!0,children:"Let's go!"})]})})]})})]})})},SC=()=>{const{currentNarrative:n}=Ir();switch(n){case Yl.WELCOME:return l.jsx(NC,{});case null:return null;default:{const s=n;throw new Error(`Unknown narrative: ${s}`)}}};class EC{seed;constructor(s){this.seed=s}next(){return this.seed=(this.seed*1664525+1013904223)%4294967296,this.seed/4294967296}}const CC=({connection:n,locations:s,highlight:i})=>{const o=s.find(E=>E.id===n.from),u=s.find(E=>E.id===n.to);if(!o||!u)return null;const d=o.visualPosition.x,p=o.visualPosition.y-20,m=u.visualPosition.x,h=u.visualPosition.y-20,y=Math.sqrt((m-d)**2+(h-p)**2),_=Math.atan2(h-p,m-d)+Math.PI/2,$=Math.max(3,Math.floor(y/40)),S=[],M=n.from.charCodeAt(0)+n.to.charCodeAt(0)+Math.floor(d)+Math.floor(p)+Math.floor(m)+Math.floor(h),L=new EC(M);for(let E=0;E<=$;E++){const R=E/$,w=d+(m-d)*R,T=p+(h-p)*R,I=(L.next()-.5)*Math.min(y*.4,60),z=w+Math.cos(_)*I,Q=T+Math.sin(_)*I;S.push({x:z,y:Q})}let U=`M ${d} ${p}`;for(let E=0;E<S.length-1;E++){const R=S[E],w=S[E+1],T=R.x+(w.x-R.x)*.3,I=R.y+(w.y-R.y)*.3,z=R.x+(w.x-R.x)*.7,Q=R.y+(w.y-R.y)*.7;U+=` C ${T} ${I}, ${z} ${Q}, ${w.x} ${w.y}`}return l.jsx("g",{children:l.jsx("path",{d:U,stroke:i?"#dbcd81":"#000000",strokeWidth:"5",fill:"none",opacity:i?"1":"0.4",filter:"url(#glow-filter)"})})},TC=({location:n,isPlayerHere:s,isAdjacentToPlayer:i,onClick:o})=>{const u=n.visualPosition.x,d=n.visualPosition.y,p=s?"var(--color-neutral)":"var(--color-accent)",m=s?"var(--color-neutral-content)":"var(--color-accent-content)";return l.jsxs("g",{onClick:()=>o(n),style:{cursor:i?"pointer":"default"},children:[l.jsx("defs",{children:l.jsx("filter",{id:`shadow-${n.id}`,x:"-20%",y:"-20%",width:"140%",height:"140%",children:l.jsx("feDropShadow",{dx:"0",dy:"0",stdDeviation:"8",floodColor:p})})}),l.jsx("text",{x:u,y:d,textAnchor:"middle",fontSize:"40",fontWeight:"600",fill:m,filter:`url(#shadow-${n.id})`,children:n.name})]})},$C=""+new URL("overworld-map-2_ngTzvm.png",import.meta.url).href,PC=""+new URL("overworld-2-DF98mQJU.png",import.meta.url).href,IC=()=>{const{enterLocation:n}=Cs(),{returnToMenu:s,startArmyManagement:i}=fa(),{moveToLocation:o}=aC(),u=rC(),d=sC(),p=iC(),h=ow({width:3072,height:2048},{originalPan:{x:-1024,y:-512},originalZoom:1.5,minZoom:1,maxZoom:2});aw({svgRef:h.svgRef,handleWheel:h.handleWheel});const y=u.locations.filter(S=>u.unlockedConnections.flatMap(M=>M.split(":")).includes(S.id));if(!d)return null;const v=S=>p.includes(S.id),_=S=>{o(S.id)},$=S=>{switch(S){case"town":return"";case"field":return"";case"dungeon":return"";default:return""}};return l.jsxs("div",{className:"flex h-screen min-h-screen bg-cover bg-center bg-no-repeat bg-fixed bg-black",style:{backgroundImage:`url(${$C})`},children:[l.jsxs("div",{className:"w-96 p-4 space-y-6",children:[l.jsx("div",{className:"card shadow-xl bg-base-100",children:l.jsx("div",{className:"card-body",children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-4xl mb-2",children:$(d.type)}),l.jsx("h4",{className:"font-bold text-lg",children:d.name}),l.jsx("p",{className:"text-sm text-base-content/70",children:d.description})]}),d.type!=="town"&&l.jsxs("button",{className:"btn btn-primary btn-block",onClick:()=>n(d),children:["Enter ",d.name]})]})})}),l.jsx("div",{className:"card shadow-xl bg-base-100",children:l.jsxs("div",{className:"card-body",children:[l.jsx("button",{className:"btn btn-block btn-accent",onClick:()=>s(),children:"Return to Menu"}),l.jsx("button",{className:"btn btn-block btn-accent",onClick:()=>i(),children:"Manage Army"})]})})]}),l.jsx("div",{className:"flex-1 p-4",children:l.jsx("div",{ref:h.containerRef,className:"relative min-h-[600px] h-full rounded-lg overflow-hidden shadow-xl",style:{cursor:h.isDragging?"grabbing":"grab"},children:l.jsxs("svg",{ref:h.svgRef,width:h.svgWidth,height:h.svgHeight,viewBox:`${h.viewBoxX} ${h.viewBoxY} ${h.viewBoxWidth} ${h.viewBoxHeight}`,onMouseDown:h.handleMouseDown,onMouseMove:h.handleMouseMove,onMouseUp:h.handleMouseUp,onMouseLeave:h.handleMouseLeave,onDoubleClick:h.resetView,className:"w-full h-full",children:[l.jsxs("defs",{children:[l.jsx("pattern",{id:"background-pattern",patternUnits:"userSpaceOnUse",width:"3072",height:"2048",children:l.jsx("image",{href:PC,width:"3072",height:"2048",preserveAspectRatio:"xMidYMid slice"})}),l.jsx("filter",{id:"glow-filter",x:"-50%",y:"-50%",width:"200%",height:"200%",children:l.jsx("feGaussianBlur",{stdDeviation:"5",result:"coloredBlur"})})]}),l.jsx("rect",{x:"0",y:"0",width:"3072",height:"2048",fill:"url(#background-pattern)"}),l.jsx("g",{children:u.connections.filter(S=>u.unlockedConnections.includes(`${S.from}:${S.to}`)).map(S=>l.jsx(CC,{connection:S,locations:u.locations,highlight:p.includes(S.from)||p.includes(S.to)},`${S.from}-${S.to}`))}),y.map(S=>l.jsx(TC,{location:S,isPlayerHere:S.id===d.id,isAdjacentToPlayer:v(S),onClick:_},S.id))]})})})]})};function AC(){const{status:n}=Ir();return l.jsxs("div",{className:"App",children:[n===nt.MENU&&l.jsx(kC,{}),n===nt.NARRATIVE&&l.jsx(SC,{}),n===nt.OVERWORLD&&l.jsx(IC,{}),n===nt.ARMY_MANAGEMENT&&l.jsx(vE,{}),n===nt.PLAYING&&l.jsx(mC,{}),n===nt.BATTLE_END&&l.jsx(xC,{})]})}yb.createRoot(document.getElementById("root")).render(l.jsx(A.StrictMode,{children:l.jsx(Lb,{store:Es,children:l.jsx(Mf,{loading:null,persistor:Bj,children:l.jsx(AC,{})})})}));
